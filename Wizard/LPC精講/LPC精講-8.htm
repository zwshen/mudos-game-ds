
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>網蟲樂園--泥潭風雲</TITLE>
<META content="MSHTML 5.00.2919.6307" name=GENERATOR>
<META content=TLT name=Author>
<META content=text/html;charset=big5 http-equiv=content-type>
<style>
<!--      
A:link {text-decoration: none;color:blue}       
.105V         {font-size: 10.5pt; font-family: 宋體;}
TD          {font-size: 9pt; font-family: 宋體;}
.90V         {font-size: 9pt; font-family: 宋體;}
.90VE         {font-size: 9pt; font-family: arial;}
A:hover      {text-decoration: none;color:red;}
A:visited  {text-decoration: none;}
A:active     {text-decoration: none;color:#ff0000}
-->
</style>


<script>
<!--
lstart=50
loop=true
speed=350 
pr_step=5 

function makeObj(obj,nest){
nest=(!nest) ? '':'document.'+nest+'.'
this.css=(document.layers) ? eval(nest+'document.'+obj):eval(obj+'.style')
    this.scrollHeight=document.layers?this.css.document.height:eval(obj+'.offsetHeight')
    this.up=goUp
this.obj = obj + "Object"
eval(this.obj + "=this")
return this
}
function goUp(speed){
    if(parseInt(this.css.top)>-this.scrollHeight){
        this.css.top=parseInt(this.css.top)-pr_step
        setTimeout(this.obj+".up("+speed+")",speed)
    }else if(loop) {
        this.css.top=lstart
        eval(this.obj+".up("+speed+")")
    }
}
function slideInit(){
    oSlide=makeObj('divNews','divCont')
    oSlide.css.top=lstart
    oSlide.up(speed)
}
onload=slideInit
//-->
</script></head>

<body aLink="#660033" bgColor="#ffffff" leftMargin="0" text=darkgreen link="#000066" vLink="#000066"
topMargin="0" >
<div align="center"><center>
   <table border="1" width="776" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/home.gif width=15 height=15><a href=http://202.114.98.14/>網蟲樂園首頁</a></td> 
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/soft.gif height=15 width=15 border=0><a href="http://202.114.98.12/softroom/">軟件大觀園</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/mud.gif height=15 width=15 border=0><a href="http://202.114.98.14/mud/">泥潭風雲</font></a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/freeweb.gif height=15 width=15 border=0><a href="http://202.114.98.14/freeweb/">個人主頁空間</a></td>  
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/bbs.gif height=15 width=15 border=0><a href=http://202.114.98.14/bbs/>網蟲社區</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/webresource.gif height=15 width=15 border=0><a href="http://202.114.98.14/webresource/">Web資源角</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/show.gif height=15 width=15 border=0><a href="#" onclick="window.open('http://202.114.98.14/show/','','menubar=no,toolbar=no,location=no,directories=no,status=no,resizable=1,scrollbars=1,width=800,height=600,top=0,left=0');">秀網珍藏</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/links1.gif height=15 width=15 border=0><a href=http://202.114.98.14/links/>友情鏈接</a></td>
      </tr>
    </table></center>

<table bgcolor=white width=770 border=1 borderColor=#ffffff borderColorLight=#ab9c36   cellpadding=0 cellspacing=0>
   <tr><td><table bgcolor=white width=770 border=0 cellpadding=0 cellspacing=0>
   <tr><td width=180 height=60><img src=http://202.114.98.14/images/netbugs1.gif width=180 height=60></td>
   <td align=center width=468 valign=center  bgcolor=white><script src="http://202.114.98.14/ad1.js" width=468 height=60 border=0></script></td>
   <td width=112 bgcolor=white><div id="divCont"
style="position:absolute; width:110; height:60; top:25; left:660; clip:rect(0,110,60,0)"><div
id="divNews" style="position:absolute; top:0; left:0">

<p>歡迎光臨網蟲樂園！<a href=http://202.114.98.14/>首頁</a>有網站各子站最新變動介紹和
教育網酷站連接。<p><a href=http://202.114.98.12/softroom/>軟件大觀園</a>每日更新；收藏3G軟件，均為最新版本。
<p><a href=http://202.114.98.14/mud>泥潭風雲</a>是教育網內最大的mud站點；<a href=http://202.114.98.14/webresource>Web資源角</a>有三千多動畫和背景為你網頁增添色彩。
<p><a href=http://202.114.98.14/freeweb/>10M免費個人主頁空間</a>，ftp維護；申請三日內批准。<p><a href=http://202.114.98.14/show>秀網珍藏</a>圖片近2G，欄目眾多，包羅萬像，每日都有大量圖片增加。
<p>對我們網站的建設的建議歡迎<a href=mailto:softroom@wuhee.edu.cn>來信</a>或寫在<a href=http://202.114.98.14/bbs>社區</a>內。</p>
</div></div>
</td>
   </tr>
   </table>
</td></tr></table>

<center>
   <table border="1" width="770" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/index.htm">首頁</A></td> 
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/newcomer/">泥巴入門</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/player/">泥巴進階</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/source/">泥巴資源</A></td>  
        <td align="center" width="96"><P align=center><A 
        href="http://202.114.98.14/mud/pmud/">圖形泥巴</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/mudlife/">泥巴人生</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/wiz/">巫師樂園</FONT></A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/download/">軟件下載</A>            <SCRIPT>
   document.write("<a href=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Basic&id=2138&ReferID=2138 target=_blank>");
   document.write("<img src=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Img2&add=1&id=2138&refer="+escape(top.document.referrer)+" border=0 alt=酷站今日訪問 width=12 height=12>");
   </SCRIPT></td>

      </tr>
    </table></center>
    


<table border="0" width="100%" style="color: rgb(255,255,0)" cellspacing="0" cellpadding="0">
  <tr>
    <td width="8%" rowspan="4"></td>
    <td width="83%"><p align="center"><font color="#000000">LPC語言<br>
    –––––––––––––––––––––<br>
    <font size="2">綜合地介紹MUD編程語言（LPC）<br>
    –––––––––––––––––––––––––</font></font></td>
    <td width="9%" rowspan="4"></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><font color="#000000">LPC語言精講（8）</td>
  </tr>
  <tr>
    <td width="83%"><font color="#000000">第四章 Lpc的繼承簡介<br>
    第一節 前言<br>
    通過上一章的閱讀，你應該知道Lpc的函數的基本工作方式。你應該學會如何聲明和調用函數。更進一步，你應該有能力自己寫函數定義，即使你是首次接觸Lpc。你知道了函數調用是如何執行的，函數必須有一個返回值，除非是 
    void 類型的。<br>
    下面我們來看一個例子。看看巫師的工作室，可能幾乎都有類似下面的一段代碼。(這個不同的 
    MudLib 是不一樣的)<br>
    -----<br>
    void create();<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    room::create();<br>
    set( &quot;short&quot;, &quot;巫師工作室&quot;);<br>
    set( &quot;long&quot;, &quot;這是一片未曾開墾的土地，需要巫師的畫筆去描繪。\n&quot; 
    );<br>
    set( &quot;exits&quot;, ([<br>
    &quot;trill&quot; : &quot;/u/trill/workroom&quot;,<br>
    ]);<br>
    create_door(&quot;south&quot;, &quot;時空之門&quot;, &quot;north&quot;, 0);<br>
    setup();<br>
    }<br>
    -----<br>
    如果你理解了前面的幾章，你應該能立刻指出幾點：<br>
    1) create() 是一個函數的定義部分。&quot;void create();&quot; 
    是它的函數聲明，卻有在 create() 裡面有個 room::create() 沒有聲明。2) 
    它調用了set(), create_door(), setup()，在代碼中卻沒有聲明。3) 
    在第三行，既不是變量聲明也不是函數聲明，更不是函數定義。<br>
    這一章就是回答以下問題的：<br>
    1) room::create()是什麼東西？<br>
    2) 函數 set()，create_door()，在哪裡聲明、哪裡定義？<br>
    3) 第三行是什麼東西？<br>
    第二節 面對對像編程(OOP)的繼承<br>
    繼承是面對對像編程的一個基本特性。它使你能寫一些基本的代碼能以不同的方式被不同的程序使用。一個 
    MudLib 做的就是創建一些基本的 Object 
    ，在此基礎上你能用他們創建自己特殊的 Object。如果不得不寫那些定義巫師工作室所必須的所有代碼，你可能要寫超過 
    1000 行的代碼，這樣你才可能有這個 room 
    所需要的所有函數。如果每個 room 
    都必須這麼做的話，首先是浪費硬盤空間；其次，你寫的代碼可能根本無法和別人的寫的代碼組合在一起，每個人對 
    room 擴展的特性的各種函數搞出每個人自己的標準。比如，你可能把 
    room 的長描述的接口函數叫做 GetLong()，別的巫師可能喜歡把它命名為query_long()。這個就是各個 
    MudLib 不兼容的根本問題，因為它們 Object 
    相互繼承、調用上使用不同的協議。OOP 
    能克服上面的問題。在上面的例子中，你直接使用的函數都定義在繼承的叫做 
    &quot;/std/room.c&quot; 的 Object 裡面了。它有所有那些 room 
    常用的函數的定義。當你寫創建一個特別的 room，你通過繼承得到 
    room的的基本的功能，通過加入你自己寫的函數，這樣就把它變成了一個獨特的 
    room 了。<br>
    OOP 
    通過繼承不只是提高了代碼的可重用性，而且它可以是你只關心繼承基本的 
    Object 
    後，那些特性需要改變的，而不用考慮那些東西是需要的，就是說當你看到別人寫好的 
    Object 
    時，發現已經很像你心中所想的東西，就只有一點點不符合，那你所要做只是繼承原先的 
    Object，然後加入和想的那一點點不同的東西就可以了。OOP 
    當然不只是繼承，還有別的一些。但是對於我們現在是談論繼承的最基本的概念。<br>
    第三節 繼承是如何工作的？<br>
    還記得最開始提的三個問題嗎？在這一節裡面，將解答這些問題。首先最後一個問題：<br>
    例子中的第三行：<br>
    -----<br>
    inherit &quot;/std/room&quot;;<br>
    -----<br>
    是做什麼？我想到了現在，你應該你猜出來這一行確保你寫的巫師工作室繼承了標準的 
    room: &quot;/std/room.c&quot; 的特性。通過繼承獲得標準 room 
    的功能，你就可以使用那些已經在&quot;/std/room.c&quot; 
    底下聲明和定義好的所有函數。這就是為什麼你可以直接使用 set(), 
    create_door() 這些函數的原因了。在你自己寫的函數 create()，你只要設置那些你要的值就可以了。這些值使得你的 
    room 與眾不同，但確保和別的Object 能相互作用。那 room::create() 
    是做什麼的？你可能看到類似的東西比如： ::create()、::init()等。可能現在完全理解有些困難。你只要有個印像就可以了。<br>
    在你繼承的那些 Object 中，可能會有 create() 函數，但是在你寫的的 
    Object 中也有 create() 了，那麼 Driver 將只調用你寫 create() 
    來完成一些初始化工作，一般情況下這是你所希望的。可是，有時候，你發現你繼承的 
    Object，比如 /std/room.c 中的 create()，也是有用的，那怎辦？那麼你可以這麼做：在你寫的 
    room 的 create() 當中加入<br>
    -----------------<br>
    room::create();<br>
    -----------------<br>
    這一行，&quot;::&quot;這個操作符加在一個函數 example() 
    的前面，那麼它就調用它繼承的 Object 中的那個函數，如果 
    &quot;::&quot;的前面沒有任何限定，那麼就調用所有繼承的當前的一級的 
    Object 中叫做 example() 的函數，如果有限定，那麼就只調用給定的 
    Object 的叫做 example() 的函數，在我們的例子就調用/std/room.c 的 create() 
    函數。&quot;::&quot;這個操作符，是用於調用繼承的 Object 
    一個特殊的函數。通常把 &quot;::&quot; 操作符叫做 域訪問操作符 。<br>
    一個對比例子：<br>
    -----<br>
    #1<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    create();<br>
    }<br>
    -----<br>
    -----<br>
    #2<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    room::create();<br>
    }<br>
    -----<br>
    例子 1 的後果是災難性的。當它被裝入內存中，Driver 調用 create()，接著 
    create() 調用 create()，create() 還接著調用 create()，如此往復永無窮盡。就是說，create() 
    持續不斷的調用自己，除非 Driver 
    發現這是一個太深的遞歸，將其強制退出。例子 2 
    是對的，但是除了浪費內存之外沒有任何作用，因為它和 room.c的功能沒有區別。對於這個 
    Object，Driver 調用它的 create()，在它的create() 通過room::create() 
    返回去調用 room.c 中的 create()。<br>
    總的來說，每個 MudLib 
    都是不同的，每個自己有一套標準函數的集合，它們對於一些基本的功能都能完成。有些功能特性多有些，有些少一些，有些在一些特殊方面完成特殊的工作，比如 
    Es2 帶了對中文的處理。但是如果這個 MudLib 
    如果比較完善的話，它一般要提供一些標準的 Object 
    的特性和功能的說明。一般可能在 &quot;/doc/build&quot; 底下，可能叫做&quot;room_prop&quot;、&quot;monster_prop&quot; 
    等。看看這些，你會得到你繼承的Object 
    的有的函數，它們的輸入參數，返回的數據類型，以及能完成什麼工作。<br>
    第四節 小結<br>
    實際上複雜對像的繼承是很複雜的，就這麼簡單解釋是遠遠不夠的。這篇簡介只是在你創建一些簡單的 
    Object 能使用繼承。更全面的討論我們將在 Lpc進階 
    裡面看到。現在你應該知道：<br>
    1) 每個 MudLib 有自己的一套基本 Object 
    的庫，有著一些基本的功能，巫師們通過繼承能更容易創建自己的 
    Object，不同的Object 之間的交互作用也更容易一些。<br>
    2) 每個 MudLib 有自己一套標準。通常有自己一些文檔說明標準的Object 
    是什麼，有什麼樣的功能。<br>
    3) 你可以用這樣繼承別的 Object 的功能：<br>
    -----<br>
    inherit &quot;filename&quot;;<br>
    -----<br>
    這裡的 filename 是被繼承的 Object 的文件名。inherit &quot;xxx&quot;要在你的寫的代碼的開頭部分。</small></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><a href="lpc_7.asp">上一篇</a> 
    &nbsp;&nbsp;&nbsp;&nbsp; <a href="lpc_9.asp">下一篇</a></td>
  </tr>
</table>
   <TABLE border=0 cellPadding=0 cellSpacing=0 width=730>
  <TBODY>
  <TR>
    <TD bgColor=#000033 colSpan=3 height=2>
    </TD>
  </TR>
  </TBODY>
</TABLE>
<P>
<CENTER><FONT color=#919191 face=ARIAL,HELVETICA size=-1>對我們網站的建議和合作請與<A 
href="mailto:softroom@wuhee.edu.cn">mailto:softroom@wuhee.edu.cn</A>聯繫.<BR><BR>Copyright 
(C) 2000 網蟲樂園工作室.<script src="http://202.114.98.14/count.js" width=468 height=60 border=0></script></FONT>
<P></P></CENTER></CENTER></CENTER></DIV></BODY></HTML>
