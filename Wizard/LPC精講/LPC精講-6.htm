
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>網蟲樂園--泥潭風雲</TITLE>
<META content="MSHTML 5.00.2919.6307" name=GENERATOR>
<META content=TLT name=Author>
<META content=text/html;charset=big5 http-equiv=content-type>
<style>
<!--      
A:link {text-decoration: none;color:blue}       
.105V         {font-size: 10.5pt; font-family: 宋體;}
TD          {font-size: 9pt; font-family: 宋體;}
.90V         {font-size: 9pt; font-family: 宋體;}
.90VE         {font-size: 9pt; font-family: arial;}
A:hover      {text-decoration: none;color:red;}
A:visited  {text-decoration: none;}
A:active     {text-decoration: none;color:#ff0000}
-->
</style>


<script>
<!--
lstart=50
loop=true
speed=350 
pr_step=5 

function makeObj(obj,nest){
nest=(!nest) ? '':'document.'+nest+'.'
this.css=(document.layers) ? eval(nest+'document.'+obj):eval(obj+'.style')
    this.scrollHeight=document.layers?this.css.document.height:eval(obj+'.offsetHeight')
    this.up=goUp
this.obj = obj + "Object"
eval(this.obj + "=this")
return this
}
function goUp(speed){
    if(parseInt(this.css.top)>-this.scrollHeight){
        this.css.top=parseInt(this.css.top)-pr_step
        setTimeout(this.obj+".up("+speed+")",speed)
    }else if(loop) {
        this.css.top=lstart
        eval(this.obj+".up("+speed+")")
    }
}
function slideInit(){
    oSlide=makeObj('divNews','divCont')
    oSlide.css.top=lstart
    oSlide.up(speed)
}
onload=slideInit
//-->
</script></head>

<body aLink="#660033" bgColor="#ffffff" leftMargin="0" text=darkgreen link="#000066" vLink="#000066"
topMargin="0" >
<div align="center"><center>
   <table border="1" width="776" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/home.gif width=15 height=15><a href=http://202.114.98.14/>網蟲樂園首頁</a></td> 
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/soft.gif height=15 width=15 border=0><a href="http://202.114.98.12/softroom/">軟件大觀園</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/mud.gif height=15 width=15 border=0><a href="http://202.114.98.14/mud/">泥潭風雲</font></a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/freeweb.gif height=15 width=15 border=0><a href="http://202.114.98.14/freeweb/">個人主頁空間</a></td>  
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/bbs.gif height=15 width=15 border=0><a href=http://202.114.98.14/bbs/>網蟲社區</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/webresource.gif height=15 width=15 border=0><a href="http://202.114.98.14/webresource/">Web資源角</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/show.gif height=15 width=15 border=0><a href="#" onclick="window.open('http://202.114.98.14/show/','','menubar=no,toolbar=no,location=no,directories=no,status=no,resizable=1,scrollbars=1,width=800,height=600,top=0,left=0');">秀網珍藏</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/links1.gif height=15 width=15 border=0><a href=http://202.114.98.14/links/>友情鏈接</a></td>
      </tr>
    </table></center>

<table bgcolor=white width=770 border=1 borderColor=#ffffff borderColorLight=#ab9c36   cellpadding=0 cellspacing=0>
   <tr><td><table bgcolor=white width=770 border=0 cellpadding=0 cellspacing=0>
   <tr><td width=180 height=60><img src=http://202.114.98.14/images/netbugs1.gif width=180 height=60></td>
   <td align=center width=468 valign=center  bgcolor=white><script src="http://202.114.98.14/ad1.js" width=468 height=60 border=0></script></td>
   <td width=112 bgcolor=white><div id="divCont"
style="position:absolute; width:110; height:60; top:25; left:660; clip:rect(0,110,60,0)"><div
id="divNews" style="position:absolute; top:0; left:0">

<p>歡迎光臨網蟲樂園！<a href=http://202.114.98.14/>首頁</a>有網站各子站最新變動介紹和
教育網酷站連接。<p><a href=http://202.114.98.12/softroom/>軟件大觀園</a>每日更新；收藏3G軟件，均為最新版本。
<p><a href=http://202.114.98.14/mud>泥潭風雲</a>是教育網內最大的mud站點；<a href=http://202.114.98.14/webresource>Web資源角</a>有三千多動畫和背景為你網頁增添色彩。
<p><a href=http://202.114.98.14/freeweb/>10M免費個人主頁空間</a>，ftp維護；申請三日內批准。<p><a href=http://202.114.98.14/show>秀網珍藏</a>圖片近2G，欄目眾多，包羅萬像，每日都有大量圖片增加。
<p>對我們網站的建設的建議歡迎<a href=mailto:softroom@wuhee.edu.cn>來信</a>或寫在<a href=http://202.114.98.14/bbs>社區</a>內。</p>
</div></div>
</td>
   </tr>
   </table>
</td></tr></table>

<center>
   <table border="1" width="770" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/index.htm">首頁</A></td> 
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/newcomer/">泥巴入門</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/player/">泥巴進階</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/source/">泥巴資源</A></td>  
        <td align="center" width="96"><P align=center><A 
        href="http://202.114.98.14/mud/pmud/">圖形泥巴</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/mudlife/">泥巴人生</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/wiz/">巫師樂園</FONT></A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/download/">軟件下載</A>            <SCRIPT>
   document.write("<a href=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Basic&id=2138&ReferID=2138 target=_blank>");
   document.write("<img src=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Img2&add=1&id=2138&refer="+escape(top.document.referrer)+" border=0 alt=酷站今日訪問 width=12 height=12>");
   </SCRIPT></td>

      </tr>
    </table></center>
    


<table border="0" width="100%" style="color: rgb(255,255,0)" cellspacing="0" cellpadding="0">
  <tr>
    <td width="8%" rowspan="4"></td>
    <td width="83%"><p align="center"><font color="#000000">LPC語言<br>
    –––––––––––––––––––––<br>
    <font size="2">綜合地介紹MUD編程語言（LPC）<br>
    –––––––––––––––––––––––––</font></font></td>
    <td width="9%" rowspan="4"></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><font color="#000000">LPC語言精講（6）</td>
  </tr>
  <tr>
    <td width="83%"><font color="#000000">第三章 Lpc的函數<br>
    第一節 序言<br>
    在前面的介紹中，大家應該知道了Lpc的Object包含能處理變量的函數。當函數被執行時，它的工作就是處理操作變量，還有是調用(call)別的函數。變量在函數中被改變操作。變量必須有個數據類型使得計算機能明白它指向的內存中&quot;0&quot;和&quot;1&quot;到底是什麼東西。一個Object的性質通常由它的包含的變量確定，但是它的特性的表現卻是依賴於它包含的函數。一個Object如果不含有任何一個函數那是不可想像的。那麼：什麼是函數。<br>
    第二節 函數<br>
    2.1 什麼是函數？<br>
    和數學的函數一樣，你給Lpc的函數一個值，它能返回一個值。有些語言，比如Pascal，會區分過程和函數。Lpc和C/C++一樣，沒有過程，但是明白這種區別還是有用的。Pascal叫做過程的東西，Lpc叫做類型是void的函數。換句話說，過程就是什麼都不返回的函數。Pascal叫做函數的，必須返回一些東西。在Lpc中，最無聊的，最簡單的，但也是正確的函數是這樣的：<br>
    -----<br>
    void eventDoNothing() {}<br>
    -----<br>
    這個函數不接收任何輸入，不執行指令，也不返回任何值。<br>
    每一個Lpc函數都由三部分組成：<br>
    1) 函數聲明<br>
    2) 函數定義<br>
    3) 函數調用<br>
    和變量一樣，函數必須先有個聲明。這樣可以讓Driver知道：<br>
    1) 這個函數將返回的是哪種數據類型。<br>
    2) 需要的輸入是什麼，多少。通常把輸入叫做參數。<br>
    一個函數聲明通常是這樣的：<br>
    類型 函數名(參數1, 參數2, ..., 參數N);<br>
    下面是一個函數聲明的例子，這個函數叫 DrinkWater，有一個string類型的參數，返回的是一個int。<br>
    -----<br>
    int eventDrinkWater(string str);<br>
    -----<br>
    在上面的聲明中, str是輸入的參數的變量名，也可以沒有。就是說可以像下面這樣聲明 
    eventDrinkWater()<br>
    -----<br>
    int eventDrinkWater(string);<br>
    -----<br>
    函數定義就是代碼，它描述了這個函數對傳人的參數究竟做了些什麼。函數調用就是別的函數在任何地方使用執行了這個函數。一個函數在它寫完後永遠不會被調用，那這個函數的存在的唯一意義只能是浪費內存和硬盤。一個函數寫出來的目的是為了被調用。下面是兩個函數相互調用的例子，兩個函數是eventPrintValue() 
    和add(),<br>
    -----<br>
    /* 首先是函數聲明，這個通常是在一個Object的開始部分。<br>
    */<br>
    void eventPrintValue();<br>
    int add(int x, int y);<br>
    /* 其次是函數 write_vals() 的函數定義。我們假定這個函數將被調用<br>
    * 是為了描述這個Object.<br>
    */<br>
    void eventPrintValue()<br>
    {<br>
    int x;<br>
    x = add(2, 2); // 我們指定 x 接收調用函數 add() 後返回的值。<br>
    write(x + &quot;\n&quot;);<br>
    }<br>
    /* 最後是函數 add() 的函數定義。 */<br>
    int add(int x, int y)<br>
    {<br>
    return (x + y);<br>
    }<br>
    -----<br>
    有一點是指明的，在XO的編程的風格我們要求所有的函數都必須有聲明，這個在我們最開始時候說明過。但是實際上必須有函數聲明的函數是那些被調用在函數定義之前的函數。我們規定必須有函數聲明，這個只是規定，但是它會給編程帶來好處。<br>
    在這一節我們知道什麼是函數，函數是由什麼組成。要記住，寫一個函數的根本目的是為用它，調用它。一個函數永遠不會被調用，那它就失去了存在的價值。通常別人使用你寫的函數，通常只關心它能對傳人的參數做些什麼加工，就是這個函數的功能是什麼，返回什麼。因此一個函數有一個好的函數名，能直接描述這個函數的功能是很重要的。我在第一章中說明了XO規定的對函數的命名機制。採用統一的命名方式有助於相互合作提高效率。<br>
    2.2 Efuns<br>
    也許你已經聽說過efun這個詞了，他們是外部定義的函數，是<br>
    externally defined function 的縮寫。就是說，他們是由Mud Driver定義好的。如果參加過Lpc的編程，或者看過Lpc的代碼，你可能找到這樣的一些表達式：this_player(), 
    strcmp(), implode(), filter()，等等，看起來像是一個函數，而你找遍整個Object以及這個Object繼承的所有Object中都沒有這些函數，這就表明他們是efun。efun存在價值是因為他們執行起來要比一般的Object帶有的函數速度快的多，為什麼快呢，因為他們是以計算機直接能理解的二進制的形式存在。對於Object內部定義的函數，我們通常叫他們是lfun(local 
    function)。一個巫師主要工作也就是編寫一些lfun組成的Object。在上面的例子中的 
    eventPrintValue() 中調用了兩個函數，第一個是函數 add(), 
    這個是有你聲明和定義的，這個就是lfun。第二次調用，是調用函數 
    write() 這個函數通常就是efun。Driver已經替你聲明和定義好了。你所要做只是調用它。<br>
    efun被創立是為了<br>
    1) 處理一些很常用的，每天都有許多函數會調用的。<br>
    2) 處理internet socket的輸入輸出。<br>
    3) 以及一些Lpc很難處理的事，畢竟Lpc是C的很小的子集。<br>
    efun是用C寫好的，內嵌在Driver裡面的。在Mud起來之前，和Driver一起編譯好的，他們執行起來會快的多。但是正和你期望的一樣，他們的調用和你寫的函數的調用方法是完全一樣的。總的來說，需要關心的和一般函數一樣，它需要傳入什麼參數，它將會返回什麼的東西。<br>
    怎樣得到一些efun的信息，比如傳入參數和返回的類型，通常在一個Mud裡面，你可以在類似這樣的 
    /doc/efun 的目錄底下找到，或者直接用 help 指令就可以得到幫助。efun及其依賴於你所在的Mud的Driver，不同的Driver帶有的efun區別是很大。對於XO，使用的是MudOS，一般的efun，只要用 
    help 
    指令就能得到幫助，或者你多看看源碼，看看別人是怎樣使用的，當然你如果無論如何也不能明白一個efun，你可以問問大巫師，他們通常會很樂意和你探討的。但是有一點是指出，能自己解決的問題最好自己解決。</small></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><a href="lpc_5.asp">上一篇</a> 
    &nbsp;&nbsp;&nbsp;&nbsp; <a href="lpc_7.asp">下一篇</a></td>
  </tr>
</table>
   <TABLE border=0 cellPadding=0 cellSpacing=0 width=730>
  <TBODY>
  <TR>
    <TD bgColor=#000033 colSpan=3 height=2>
    </TD>
  </TR>
  </TBODY>
</TABLE>
<P>
<CENTER><FONT color=#919191 face=ARIAL,HELVETICA size=-1>對我們網站的建議和合作請與<A 
href="mailto:softroom@wuhee.edu.cn">mailto:softroom@wuhee.edu.cn</A>聯繫.<BR><BR>Copyright 
(C) 2000 網蟲樂園工作室.<script src="http://202.114.98.14/count.js" width=468 height=60 border=0></script></FONT>
<P></P></CENTER></CENTER></CENTER></DIV></BODY></HTML>
