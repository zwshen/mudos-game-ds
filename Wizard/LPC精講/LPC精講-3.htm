
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>網蟲樂園--泥潭風雲</TITLE>
<META content="MSHTML 5.00.2919.6307" name=GENERATOR>
<META content=TLT name=Author>
<META content=text/html;charset=big5 http-equiv=content-type>
<style>
<!--      
A:link {text-decoration: none;color:blue}       
.105V         {font-size: 10.5pt; font-family: 宋體;}
TD          {font-size: 9pt; font-family: 宋體;}
.90V         {font-size: 9pt; font-family: 宋體;}
.90VE         {font-size: 9pt; font-family: arial;}
A:hover      {text-decoration: none;color:red;}
A:visited  {text-decoration: none;}
A:active     {text-decoration: none;color:#ff0000}
-->
</style>


<script>
<!--
lstart=50
loop=true
speed=350 
pr_step=5 

function makeObj(obj,nest){
nest=(!nest) ? '':'document.'+nest+'.'
this.css=(document.layers) ? eval(nest+'document.'+obj):eval(obj+'.style')
    this.scrollHeight=document.layers?this.css.document.height:eval(obj+'.offsetHeight')
    this.up=goUp
this.obj = obj + "Object"
eval(this.obj + "=this")
return this
}
function goUp(speed){
    if(parseInt(this.css.top)>-this.scrollHeight){
        this.css.top=parseInt(this.css.top)-pr_step
        setTimeout(this.obj+".up("+speed+")",speed)
    }else if(loop) {
        this.css.top=lstart
        eval(this.obj+".up("+speed+")")
    }
}
function slideInit(){
    oSlide=makeObj('divNews','divCont')
    oSlide.css.top=lstart
    oSlide.up(speed)
}
onload=slideInit
//-->
</script></head>

<body aLink="#660033" bgColor="#ffffff" leftMargin="0" text=darkgreen link="#000066" vLink="#000066"
topMargin="0" >
<div align="center"><center>
   <table border="1" width="776" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/home.gif width=15 height=15><a href=http://202.114.98.14/>網蟲樂園首頁</a></td> 
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/soft.gif height=15 width=15 border=0><a href="http://202.114.98.12/softroom/">軟件大觀園</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/mud.gif height=15 width=15 border=0><a href="http://202.114.98.14/mud/">泥潭風雲</font></a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/freeweb.gif height=15 width=15 border=0><a href="http://202.114.98.14/freeweb/">個人主頁空間</a></td>  
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/bbs.gif height=15 width=15 border=0><a href=http://202.114.98.14/bbs/>網蟲社區</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/webresource.gif height=15 width=15 border=0><a href="http://202.114.98.14/webresource/">Web資源角</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/show.gif height=15 width=15 border=0><a href="#" onclick="window.open('http://202.114.98.14/show/','','menubar=no,toolbar=no,location=no,directories=no,status=no,resizable=1,scrollbars=1,width=800,height=600,top=0,left=0');">秀網珍藏</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/links1.gif height=15 width=15 border=0><a href=http://202.114.98.14/links/>友情鏈接</a></td>
      </tr>
    </table></center>

<table bgcolor=white width=770 border=1 borderColor=#ffffff borderColorLight=#ab9c36   cellpadding=0 cellspacing=0>
   <tr><td><table bgcolor=white width=770 border=0 cellpadding=0 cellspacing=0>
   <tr><td width=180 height=60><img src=http://202.114.98.14/images/netbugs1.gif width=180 height=60></td>
   <td align=center width=468 valign=center  bgcolor=white><script src="http://202.114.98.14/ad1.js" width=468 height=60 border=0></script></td>
   <td width=112 bgcolor=white><div id="divCont"
style="position:absolute; width:110; height:60; top:25; left:660; clip:rect(0,110,60,0)"><div
id="divNews" style="position:absolute; top:0; left:0">

<p>歡迎光臨網蟲樂園！<a href=http://202.114.98.14/>首頁</a>有網站各子站最新變動介紹和
教育網酷站連接。<p><a href=http://202.114.98.12/softroom/>軟件大觀園</a>每日更新；收藏3G軟件，均為最新版本。
<p><a href=http://202.114.98.14/mud>泥潭風雲</a>是教育網內最大的mud站點；<a href=http://202.114.98.14/webresource>Web資源角</a>有三千多動畫和背景為你網頁增添色彩。
<p><a href=http://202.114.98.14/freeweb/>10M免費個人主頁空間</a>，ftp維護；申請三日內批准。<p><a href=http://202.114.98.14/show>秀網珍藏</a>圖片近2G，欄目眾多，包羅萬像，每日都有大量圖片增加。
<p>對我們網站的建設的建議歡迎<a href=mailto:softroom@wuhee.edu.cn>來信</a>或寫在<a href=http://202.114.98.14/bbs>社區</a>內。</p>
</div></div>
</td>
   </tr>
   </table>
</td></tr></table>

<center>
   <table border="1" width="770" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/index.htm">首頁</A></td> 
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/newcomer/">泥巴入門</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/player/">泥巴進階</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/source/">泥巴資源</A></td>  
        <td align="center" width="96"><P align=center><A 
        href="http://202.114.98.14/mud/pmud/">圖形泥巴</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/mudlife/">泥巴人生</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/wiz/">巫師樂園</FONT></A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/download/">軟件下載</A>            <SCRIPT>
   document.write("<a href=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Basic&id=2138&ReferID=2138 target=_blank>");
   document.write("<img src=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Img2&add=1&id=2138&refer="+escape(top.document.referrer)+" border=0 alt=酷站今日訪問 width=12 height=12>");
   </SCRIPT></td>

      </tr>
    </table></center>
    


<table border="0" width="100%" style="color: rgb(255,255,0)" cellspacing="0" cellpadding="0">
  <tr>
    <td width="8%" rowspan="4"></td>
    <td width="83%"><p align="center"><font color="#000000">LPC語言<br>
    –––––––––––––––––––––<br>
    <font size="2">綜合地介紹MUD編程語言（LPC）<br>
    –––––––––––––––––––––––––</font></font></td>
    <td width="9%" rowspan="4"></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><font color="#000000">LPC語言精講（3）</td>
  </tr>
  <tr>
    <td width="83%"><font color="#000000">2.3 代碼風格<br>
    在上面說過函數的順序對這個Object的特性是毫無影響的。<br>
    但是一個有著良好代碼風格的程序對LpMud是很重要的。因為<br>
    LpMud通常不會也不可能是一個人完成的，如果程序沒有較好<br>
    的可讀性，那麼別人理解你的“作品”是很困難的。而且有個<br>
    良好的程序風格能給人以優雅的感覺，因此希望大家寫的Lpc<br>
    程序能有個好的風格。大家中的有些人可能以後會加入XO team<br>
    創建自己夢想中的世界，我們要求你採用如下的格式書寫程序。<br>
    2.3.1 頭文件<br>
    在一個文件的開頭是一段說明。採用如下格式：<br>
    /* /u/trill/obj/test.c<br>
    * from XO Object Library<br>
    * 測試用的Object<br>
    * created by trill 19970808<br>
    * version @(#) test.c 2.1@(#)<br>
    * last modified by trill 19971008<br>
    * 測試tell_wizard這個simul_efun<br>
    */<br>
    第一行是這個文件的絕對路徑，就是全路徑。<br>
    第二行是它所在的Mudlib<br>
    第三行是它的功能的簡單的描述，可以超過一行。<br>
    第四行是這個文件的作者和創建時間。<br>
    第五行是它的版本號，可能做了多次修改，甚至可能會重寫，<br>
    這個數字2.1標誌了它大概做過多少次改動。<br>
    第六行是最後一次修改的人和時間。<br>
    第七行是最後一些修改什麼東西。<br>
    對於一個Object我們要求必須有這樣一段說明，特別是前面的五行必須存在，如果做了改動那麼最後兩行也要加上。這樣一般的一個Object，我們從這段說明就能了解到一些很重要的信息。<br>
    下面是include一些文件和繼承(inherit)一些Object。<br>
    #include<br>
    #include &quot;include/test.h&quot;<br>
    inherit NPC;<br>
    先系統的文件，後自己定義的一些頭文件。特別要求的是必須<br>
    有個和這個Object同名的&quot;.h&quot;文件，比如&quot;test.h&quot;放在這個Object所在的目錄的下一級目錄&quot;include&quot;底下，就是說在include部分的最後一行是#include 
    &quot;include/test.h&quot;。在test.h定義所有在test.c用到的函數的原形，以及定義一些<br>
    宏和常量。<br>
    這樣做的好處是：<br>
    第一不用出現一個函數在引用時沒有說明，<br>
    第二如果想知道這個Object有什麼函數，直接看這個文件就可以了，不必去看那個test.c，可能test.c非常長。<br>
    第三如果建立一個help系統，用來查詢每個Object存在的函數，那麼這樣直接去讀test.h就可以，否則是一件很麻煩的事。<br>
    關於inherit我們在繼承部分再說。<br>
    2.3.2 變量說明<br>
    在變量說明部分，大家最好在每個變量後面加一個簡單的說明。<br>
    2.3.3 函數<br>
    一個Object的函數的順序和名字對這個Object的表現是毫無影<br>
    響的。但是為了讓這個Object有良好的可讀性，我們要求一個Object<br>
    的函數按如下方式排列和命名：<br>
    首先是變量的接口部分，這些函數統一用Set+變量名來改變該<br>
    變量的值，用Get+變量來返回變量的值。比如<br>
    static int level;<br>
    void SetLevl(int i)<br>
    {<br>
    level = i;<br>
    }<br>
    int GetLevel()<br>
    {<br>
    return level;<br>
    }<br>
    其次是一些操縱和控制變量的一些函數。比如<br>
    void AddLevel(int i)<br>
    {<br>
    level += i;<br>
    }<br>
    這兩類函數要求每個單詞的第一字母大寫。<br>
    再是一些Object所能做的事件(event)，比如戰鬥，結婚等等。比如<br>
    void eventQuit()<br>
    {<br>
    ...<br>
    }<br>
    這些函數要求事件的每個單詞的第一字母大寫，比如ventFight,eventMarry等等。<br>
    再下面的是由Driver調用的一些函數，比如create(),heart_beat,setup()。<br>
    最後是一些這個Object自己私有的函數，完成一些特別的功能。這些函數通常讓要求每個單詞的小寫，中間用下劃線(_)隔開。要注意的是每個函數之間用一個空行隔開。<br>
    這些是對一個文件的整體要求，如果你有興趣將來在XO team寫程序，最好從現在開始就養成這樣的編程習慣。如果你是別的Mud裡面的巫師，我想一個Mud裡面最好也有一個統一的整齊的風格。也許你會問，這樣要求有必要嗎？這樣太麻煩，程序寫了自己能明白就可以了。這是不對的，LpMud是大家合作的項目，如果你做的程序別人沒法看懂，不知道寫的東西裡面有些什麼，能調用什麼函數，那麼實際上你寫的東西是失敗的，沒人會去用它，它可能永遠“死”在硬盤上。而且函數統一的命名法能盡快找到你所需要的函數，同時也能提高整個程序的可讀性。對於代碼風格XO還有一些別的要求，我們將在以後的文章中介紹，如果你加入了XO 
    team，代碼風格將是第一篇要讀的文章。<br>
    小結:<br>
    關於Lpc程序和編程環境，就介紹到這裡。看完這一章，我想大家要記住的是LpMud是採用Lpc做為編程語言，Unix文件結構作為文件組織形式。Lpc是編寫Object的一種語言，它的程序沒有特殊的開始和結束的標誌。如果Object被使用到，那麼它被調入內存，如果這個Object有一個叫create()的函數，首先被執行，來初始化一些變量。Lpc的Object是一堆變量的集合，同時帶有一些能操縱改變這些變量的函數。Lpc的代碼風格，我想一個Mud最好有一個統一的風格，特別的XO有自己的特別的要求。<br>
    題外話：<br>
    當了好久的巫師，也用Lpc寫了一些東西。我一直在試著理解Lpc，因為以我看如果一個巫師沒有真正理解Lpc，他就不可能真正理解LpMud。理解Lpc並不僅僅意味著會使用它，許多巫師能使用它但是並不真正理解它。我希望在這個Lpc的介紹文章，能給大家一個Lpc的整體的印像，真正把握和理解Lpc，能創造自己心中夢想的世界。</small></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><font size="2"><a href="lpc_2.asp">上一篇</a> 
    &nbsp;&nbsp;&nbsp;&nbsp; <a href="lpc_4.asp">下一篇</a></font></td>
  </tr>
</table>
   <TABLE border=0 cellPadding=0 cellSpacing=0 width=730>
  <TBODY>
  <TR>
    <TD bgColor=#000033 colSpan=3 height=2>
    </TD>
  </TR>
  </TBODY>
</TABLE>
<P>
<CENTER><FONT color=#919191 face=ARIAL,HELVETICA size=-1>對我們網站的建議和合作請與<A 
href="mailto:softroom@wuhee.edu.cn">mailto:softroom@wuhee.edu.cn</A>聯繫.<BR><BR>Copyright 
(C) 2000 網蟲樂園工作室.<script src="http://202.114.98.14/count.js" width=468 height=60 border=0></script></FONT>
<P></P></CENTER></CENTER></CENTER></DIV></BODY></HTML>
