<HTML>
<HEAD>
<TITLE>BBS簸觳M地浮J弘地跋</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBS簸觳M地浮J弘地跋</H1></CENTER>
<A Name="top"></a>
oHH:&nbsp;jameson&nbsp;(ㄤ),&nbsp;H跋:&nbsp;Mud_Builder&nbsp;<BR>
夹&nbsp;&nbsp;D:&nbsp;LPC&nbsp;Manual&nbsp;-&nbsp;Advanced&nbsp;LPC&nbsp;and&nbsp;Mudlib&nbsp;(3)&nbsp;<BR>
oH:&nbsp;BBS&nbsp;簸觳M地&nbsp;(Fri&nbsp;May&nbsp;23&nbsp;23:02:55&nbsp;1997)&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Traps&nbsp;and&nbsp;pitfalls&nbsp;<BR>
&nbsp;<BR>
It's&nbsp;easy&nbsp;to&nbsp;get&nbsp;confused,&nbsp;to&nbsp;do&nbsp;things&nbsp;that&nbsp;look&nbsp;good&nbsp;but&nbsp;later&nbsp;prove&nbsp;to&nbsp;be&nbsp;pure&nbsp;disaster.&nbsp;This&nbsp;chapter&nbsp;will&nbsp;deal&nbsp;with&nbsp;some&nbsp;of&nbsp;the&nbsp;more&nbsp;common&nbsp;<BR>
mistakes&nbsp;you're&nbsp;likely&nbsp;to&nbsp;make.&nbsp;&nbsp;<BR>
&nbsp;<BR>
Most&nbsp;of&nbsp;the&nbsp;stuff&nbsp;here&nbsp;has&nbsp;been&nbsp;mentioned&nbsp;before&nbsp;while&nbsp;explaining&nbsp;the&nbsp;functions&nbsp;that&nbsp;are&nbsp;involved.&nbsp;However,&nbsp;judging&nbsp;by&nbsp;the&nbsp;amount&nbsp;of&nbsp;<BR>
mistakes&nbsp;that&nbsp;being&nbsp;made&nbsp;all&nbsp;the&nbsp;time,&nbsp;it&nbsp;won't&nbsp;hurt&nbsp;to&nbsp;rub&nbsp;it&nbsp;in&nbsp;once&nbsp;more.&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mapping/Array&nbsp;security:&nbsp;How&nbsp;to&nbsp;make&nbsp;mappings&nbsp;and&nbsp;arrays&nbsp;secure&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alarm&nbsp;loops:&nbsp;Crashing&nbsp;the&nbsp;game&nbsp;with&nbsp;alarms&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Mapping/Array&nbsp;security&nbsp;<BR>
&nbsp;<BR>
The&nbsp;problem,&nbsp;as&nbsp;indicated&nbsp;in&nbsp;chapter&nbsp;2.2.9&nbsp;ealier,&nbsp;is&nbsp;that&nbsp;mappings&nbsp;and&nbsp;arrays&nbsp;aren't&nbsp;copied&nbsp;every&nbsp;time&nbsp;they&nbsp;are&nbsp;moved&nbsp;around.&nbsp;Instead&nbsp;only&nbsp;a&nbsp;<BR>
reference&nbsp;is&nbsp;passed.&nbsp;This&nbsp;is&nbsp;the&nbsp;basis&nbsp;for&nbsp;a&nbsp;lot&nbsp;of&nbsp;security&nbsp;blunders&nbsp;in&nbsp;the&nbsp;code.&nbsp;Consider&nbsp;this&nbsp;example&nbsp;where&nbsp;the&nbsp;object&nbsp;is&nbsp;a&nbsp;guild&nbsp;object&nbsp;that&nbsp;<BR>
handles&nbsp;the&nbsp;membership&nbsp;of&nbsp;a&nbsp;guild.&nbsp;The&nbsp;global&nbsp;string&nbsp;Council&nbsp;which&nbsp;is&nbsp;saved&nbsp;elsewhere&nbsp;using&nbsp;save_object()&nbsp;contains&nbsp;the&nbsp;list&nbsp;of&nbsp;guild&nbsp;<BR>
members.&nbsp;&nbsp;<BR>
&nbsp;<BR>
string&nbsp;*Council;&nbsp;<BR>
&nbsp;<BR>
public&nbsp;string&nbsp;<BR>
query_council()&nbsp;<BR>
{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Council;&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
This&nbsp;looks&nbsp;all&nbsp;right,&nbsp;but...&nbsp;in&nbsp;fact&nbsp;you&nbsp;return&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;original&nbsp;array.&nbsp;If&nbsp;someone&nbsp;else&nbsp;wants&nbsp;to&nbsp;add&nbsp;a&nbsp;member&nbsp;to&nbsp;your&nbsp;guild&nbsp;council&nbsp;he&nbsp;<BR>
only&nbsp;has&nbsp;to&nbsp;do&nbsp;this:&nbsp;&nbsp;<BR>
&nbsp;<BR>
void&nbsp;<BR>
my_fix()&nbsp;<BR>
{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;*stolen_council;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;stolen_council&nbsp;=&nbsp;YOUR_GUILD_OB-&gt;query_council();&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;stolen_council&nbsp;+=&nbsp;({&nbsp;&quot;olorin&quot;&nbsp;});&nbsp;//&nbsp;Add&nbsp;Olorin&nbsp;to&nbsp;the&nbsp;council&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
How&nbsp;to&nbsp;fix&nbsp;this&nbsp;then?&nbsp;Well,&nbsp;simply&nbsp;modify&nbsp;your&nbsp;query_council()&nbsp;routine&nbsp;to&nbsp;return&nbsp;Council&nbsp;+&nbsp;({})&nbsp;instead,&nbsp;and&nbsp;all&nbsp;is&nbsp;well.&nbsp;Easy&nbsp;to&nbsp;miss,&nbsp;<BR>
but...&nbsp;sooooo&nbsp;important!&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Alarm&nbsp;loops&nbsp;<BR>
&nbsp;<BR>
Look&nbsp;at&nbsp;this&nbsp;function:&nbsp;&nbsp;<BR>
&nbsp;<BR>
public&nbsp;void&nbsp;<BR>
my_alarm_func(int&nbsp;generation)&nbsp;<BR>
{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;set_alarm(1.0,&nbsp;1.0,&nbsp;my_alarm_func(generation&nbsp;+&nbsp;1));&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;tell_object(find_player(&quot;&lt;your&nbsp;name&gt;&quot;),&nbsp;&quot;Yohooo!&nbsp;&quot;&nbsp;+&nbsp;generation&nbsp;+&nbsp;&quot;\n&quot;);&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
What's&nbsp;happening&nbsp;here?&nbsp;Well,&nbsp;every&nbsp;second&nbsp;an&nbsp;alarm&nbsp;is&nbsp;generated,&nbsp;calling&nbsp;itself&nbsp;in&nbsp;one&nbsp;second.&nbsp;What&nbsp;does&nbsp;this&nbsp;mean?&nbsp;Let's&nbsp;look&nbsp;at&nbsp;the&nbsp;<BR>
development&nbsp;of&nbsp;alarm&nbsp;calls&nbsp;after&nbsp;the&nbsp;first&nbsp;call:&nbsp;&nbsp;<BR>
&nbsp;<BR>
1&nbsp;second:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;0&nbsp;(original&nbsp;call)&nbsp;<BR>
2&nbsp;seconds:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;1&nbsp;(repeat&nbsp;of&nbsp;1&nbsp;sec&nbsp;0)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;1&nbsp;(new&nbsp;from&nbsp;1&nbsp;sec&nbsp;0)&nbsp;<BR>
3&nbsp;seconds:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;1&nbsp;(repeat&nbsp;of&nbsp;1&nbsp;sec&nbsp;0)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(repeat&nbsp;of&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(repeat&nbsp;of&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(new&nbsp;from&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(new&nbsp;from&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
4&nbsp;seconds:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;1&nbsp;(repeat&nbsp;of&nbsp;1&nbsp;sec&nbsp;0)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(new&nbsp;from&nbsp;3&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(repeat&nbsp;of&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;2&nbsp;(repeat&nbsp;of&nbsp;2&nbsp;sec&nbsp;1)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(repeat&nbsp;of&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(repeat&nbsp;of&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(repeat&nbsp;of&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(repeat&nbsp;of&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(new&nbsp;from&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(new&nbsp;from&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(new&nbsp;from&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Yohoo!&nbsp;3&nbsp;(new&nbsp;from&nbsp;3&nbsp;sec&nbsp;2)&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;...&nbsp;etc.&nbsp;<BR>
&nbsp;<BR>
As&nbsp;you&nbsp;can&nbsp;see&nbsp;we&nbsp;have&nbsp;exponential&nbsp;growth&nbsp;here...&nbsp;VERY&nbsp;funny...&nbsp;the&nbsp;game&nbsp;will&nbsp;grind&nbsp;to&nbsp;a&nbsp;halt&nbsp;practically&nbsp;at&nbsp;once!&nbsp;This,&nbsp;if&nbsp;you&nbsp;didn't&nbsp;know&nbsp;it,&nbsp;is&nbsp;<BR>
so&nbsp;stupid&nbsp;as&nbsp;to&nbsp;be&nbsp;a&nbsp;demoting&nbsp;offense.&nbsp;Is&nbsp;this&nbsp;easy&nbsp;to&nbsp;do&nbsp;by&nbsp;mistake?&nbsp;Well...&nbsp;I've&nbsp;seen&nbsp;it&nbsp;a&nbsp;few&nbsp;times.&nbsp;Often&nbsp;enough&nbsp;to&nbsp;warrant&nbsp;this&nbsp;warning&nbsp;<BR>
anyway.&nbsp;Oh,&nbsp;try&nbsp;this&nbsp;on&nbsp;Genesis&nbsp;and&nbsp;you're&nbsp;dead&nbsp;meat!&nbsp;Consider&nbsp;yourself&nbsp;warned!&nbsp;&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
“&nbsp;ㄓ方:EBBS&nbsp;簸觳M地&nbsp;bbs.net.tsinghua.edu.cnE[FROM:&nbsp;klab.ishii.utsu]&nbsp;<BR>
<A HREF="00000021.htm">W@g</A>
<A HREF='javascript:history.go(-1)'>穰^W@</A>
<A HREF="index.htm">^欹乜</A>
<A HREF="#top">^飙董</A>
</CENTER>
<CENTER><H1>BBS簸觳M地浮J弘地跋</H1></CENTER>
</BODY></HTML>