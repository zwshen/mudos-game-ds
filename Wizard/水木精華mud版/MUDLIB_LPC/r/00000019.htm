<HTML>
<HEAD>
<TITLE>BBS簸觳M地浮J弘地跋</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBS簸觳M地浮J弘地跋</H1></CENTER>
<A Name="top"></a>
oHH:&nbsp;jameson&nbsp;(ㄤ),&nbsp;H跋:&nbsp;Mud_Builder&nbsp;<BR>
夹&nbsp;&nbsp;D:&nbsp;LPC&nbsp;Manual&nbsp;-&nbsp;Advanced&nbsp;LPC&nbsp;and&nbsp;Mudlib&nbsp;(1)&nbsp;<BR>
oH:&nbsp;BBS&nbsp;簸觳M地&nbsp;(Fri&nbsp;May&nbsp;23&nbsp;22:59:51&nbsp;1997)&nbsp;<BR>
&nbsp;<BR>
Advanced&nbsp;LPC&nbsp;and&nbsp;Mudlib&nbsp;<BR>
&nbsp;<BR>
This&nbsp;chapter&nbsp;will&nbsp;deal&nbsp;with&nbsp;the&nbsp;more&nbsp;advanced&nbsp;portions&nbsp;of&nbsp;LPC.&nbsp;This&nbsp;does&nbsp;not&nbsp;mean&nbsp;that&nbsp;you&nbsp;are&nbsp;able&nbsp;to&nbsp;do&nbsp;without&nbsp;them,&nbsp;other&nbsp;than&nbsp;in&nbsp;very&nbsp;<BR>
simple&nbsp;objects.&nbsp;It's&nbsp;just&nbsp;that&nbsp;you&nbsp;really&nbsp;need&nbsp;to&nbsp;understand&nbsp;the&nbsp;basics&nbsp;of&nbsp;LPC&nbsp;as&nbsp;described&nbsp;in&nbsp;the&nbsp;earlier&nbsp;two&nbsp;chapters&nbsp;before&nbsp;you&nbsp;can&nbsp;assimilate&nbsp;<BR>
what&nbsp;I'll&nbsp;describe&nbsp;here.&nbsp;&nbsp;<BR>
&nbsp;<BR>
Please&nbsp;don't&nbsp;hesitate&nbsp;to&nbsp;review&nbsp;earlier&nbsp;portions&nbsp;as&nbsp;necessary&nbsp;while&nbsp;you&nbsp;read&nbsp;the&nbsp;text.&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Function&nbsp;definition&nbsp;(part&nbsp;3):&nbsp;The&nbsp;function&nbsp;type&nbsp;once&nbsp;and&nbsp;for&nbsp;all&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Efficient&nbsp;code:&nbsp;Writing&nbsp;efficient&nbsp;code&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Traps&nbsp;and&nbsp;pitfalls:&nbsp;Don't&nbsp;do&nbsp;this,&nbsp;ok?&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Function&nbsp;data&nbsp;type,&nbsp;part&nbsp;3&nbsp;<BR>
&nbsp;<BR>
The&nbsp;function&nbsp;type&nbsp;hasn't&nbsp;been&nbsp;discussed&nbsp;in&nbsp;any&nbsp;depth&nbsp;earlier.&nbsp;You've&nbsp;seen&nbsp;it&nbsp;used&nbsp;but&nbsp;not&nbsp;really&nbsp;explained.&nbsp;However,&nbsp;it's&nbsp;very&nbsp;important&nbsp;that&nbsp;<BR>
you&nbsp;do&nbsp;understand&nbsp;how&nbsp;they&nbsp;work,&nbsp;as&nbsp;you&nbsp;can&nbsp;build&nbsp;very&nbsp;complex&nbsp;and&nbsp;effective&nbsp;expressions&nbsp;using&nbsp;them,&nbsp;and&nbsp;above&nbsp;all&nbsp;you&nbsp;will&nbsp;bot&nbsp;see&nbsp;them&nbsp;<BR>
used&nbsp;and&nbsp;be&nbsp;forced&nbsp;to&nbsp;use&nbsp;them&nbsp;here&nbsp;and&nbsp;there.&nbsp;All&nbsp;the&nbsp;functions&nbsp;that&nbsp;used&nbsp;to&nbsp;take&nbsp;function&nbsp;names&nbsp;as&nbsp;strings&nbsp;now&nbsp;take&nbsp;function&nbsp;pointers&nbsp;as&nbsp;<BR>
arguments&nbsp;instead.&nbsp;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;basics&nbsp;of&nbsp;the&nbsp;function&nbsp;type:&nbsp;The&nbsp;very&nbsp;basics&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Partial&nbsp;argument&nbsp;lists:&nbsp;Using&nbsp;partial&nbsp;argument&nbsp;lists&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Complex&nbsp;function&nbsp;applications:&nbsp;In-line&nbsp;function&nbsp;applications&nbsp;&nbsp;<BR>
&nbsp;<BR>
The&nbsp;basics&nbsp;of&nbsp;the&nbsp;function&nbsp;type&nbsp;<BR>
&nbsp;<BR>
Functions&nbsp;are&nbsp;accessed&nbsp;through&nbsp;function&nbsp;pointers.&nbsp;As&nbsp;has&nbsp;been&nbsp;demonstrated&nbsp;implicitly&nbsp;earlier,&nbsp;every&nbsp;function&nbsp;call&nbsp;basically&nbsp;is&nbsp;nothing&nbsp;but&nbsp;a&nbsp;<BR>
dereferenced&nbsp;function&nbsp;pointer&nbsp;along&nbsp;with&nbsp;a&nbsp;list&nbsp;of&nbsp;arguments.&nbsp;Take&nbsp;this&nbsp;simple&nbsp;example:&nbsp;&nbsp;<BR>
&nbsp;<BR>
void&nbsp;<BR>
my_func(string&nbsp;str,&nbsp;int&nbsp;value)&nbsp;<BR>
{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;write(&quot;The&nbsp;string&nbsp;is&nbsp;'&quot;&nbsp;+&nbsp;str&nbsp;+&nbsp;&quot;'&nbsp;and&nbsp;the&nbsp;value&nbsp;is&nbsp;&quot;&nbsp;+&nbsp;value&nbsp;+&nbsp;&quot;.\n&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
The&nbsp;function&nbsp;is&nbsp;then&nbsp;called,&nbsp;as&nbsp;demonstrated&nbsp;earlier,&nbsp;by&nbsp;giving&nbsp;the&nbsp;function&nbsp;name&nbsp;followed&nbsp;by&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;arguments&nbsp;within&nbsp;brackets:&nbsp;&nbsp;<BR>
&nbsp;<BR>
e.g.&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;my_func(&quot;smurf&quot;,&nbsp;1000);&nbsp;<BR>
&nbsp;<BR>
Now&nbsp;we&nbsp;add&nbsp;the&nbsp;idea&nbsp;of&nbsp;the&nbsp;function&nbsp;type&nbsp;where&nbsp;the&nbsp;address&nbsp;of&nbsp;the&nbsp;function&nbsp;can&nbsp;be&nbsp;taken&nbsp;and&nbsp;assigned&nbsp;to&nbsp;another&nbsp;variable:&nbsp;&nbsp;<BR>
&nbsp;<BR>
e.g.&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;new_func;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;new_func&nbsp;=&nbsp;my_func;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;or&nbsp;equivalent&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;new_func&nbsp;=&nbsp;&amp;my_func();&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;my_func(&quot;smurf&quot;,&nbsp;1000);&nbsp;&nbsp;&nbsp;//&nbsp;or&nbsp;equivalent&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;new_func(&quot;smurf&quot;,&nbsp;1000);&nbsp;<BR>
&nbsp;<BR>
Beware&nbsp;that&nbsp;before&nbsp;the&nbsp;variable&nbsp;new_func&nbsp;has&nbsp;been&nbsp;set&nbsp;to&nbsp;a&nbsp;proper&nbsp;value,&nbsp;it&nbsp;doesn't&nbsp;refer&nbsp;to&nbsp;any&nbsp;function&nbsp;at&nbsp;all.&nbsp;Using&nbsp;it&nbsp;will&nbsp;cause&nbsp;a&nbsp;run-time&nbsp;<BR>
error.&nbsp;&nbsp;<BR>
&nbsp;<BR>
Partial&nbsp;argument&nbsp;lists&nbsp;<BR>
&nbsp;<BR>
As&nbsp;seen&nbsp;in&nbsp;the&nbsp;previous&nbsp;chapter,&nbsp;it's&nbsp;possible&nbsp;to&nbsp;assign&nbsp;the&nbsp;reference&nbsp;of&nbsp;a&nbsp;function&nbsp;to&nbsp;a&nbsp;function&nbsp;variable&nbsp;with&nbsp;another&nbsp;name.&nbsp;Another&nbsp;handy&nbsp;<BR>
feature&nbsp;is&nbsp;that&nbsp;it's&nbsp;possible&nbsp;to&nbsp;set&nbsp;this&nbsp;new&nbsp;function&nbsp;up&nbsp;so&nbsp;that&nbsp;it&nbsp;defines&nbsp;a&nbsp;number&nbsp;of&nbsp;the&nbsp;arguments&nbsp;to&nbsp;the&nbsp;original&nbsp;function&nbsp;as&nbsp;constants,&nbsp;<BR>
leaving&nbsp;only&nbsp;the&nbsp;remaining&nbsp;as&nbsp;variables.&nbsp;Look&nbsp;at&nbsp;this&nbsp;example:&nbsp;&nbsp;<BR>
&nbsp;<BR>
e.g.&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;tell_player(object&nbsp;player,&nbsp;string&nbsp;mess)&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player-&gt;catch_msg(mess&nbsp;+&nbsp;&quot;\n&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;my_func()&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;mod_tell;&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod_tell&nbsp;=&nbsp;&amp;tell_player(this_player(),&nbsp;);&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod_tell(&quot;Hello!&quot;);&nbsp;//&nbsp;Equivalent&nbsp;to&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tell_player(this_player(),&nbsp;&quot;Hello!&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<BR>
&nbsp;<BR>
This&nbsp;works&nbsp;fine&nbsp;for&nbsp;any&nbsp;number&nbsp;of&nbsp;arguments.&nbsp;The&nbsp;remaining&nbsp;arguments&nbsp;will&nbsp;be&nbsp;filled&nbsp;in&nbsp;left&nbsp;to&nbsp;right,&nbsp;just&nbsp;as&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;expect.&nbsp;i.e.&nbsp;a&nbsp;<BR>
function&nbsp;with&nbsp;the&nbsp;header&nbsp;void&nbsp;func(int&nbsp;a,&nbsp;int&nbsp;b,&nbsp;int&nbsp;c,&nbsp;int&nbsp;d,&nbsp;int&nbsp;e)&nbsp;defined&nbsp;as&nbsp;function&nbsp;my_func&nbsp;=&nbsp;func(1,&nbsp;,&nbsp;3,&nbsp;<BR>
4,)&nbsp;and&nbsp;called&nbsp;as&nbsp;my_func(100,&nbsp;101)&nbsp;is&nbsp;eqvivalent&nbsp;to&nbsp;the&nbsp;call&nbsp;func(1,&nbsp;100,&nbsp;3,&nbsp;4,&nbsp;101).&nbsp;&nbsp;<BR>
&nbsp;<BR>
Complex&nbsp;function&nbsp;applications&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
“&nbsp;ㄓ方:EBBS&nbsp;簸觳M地&nbsp;bbs.net.tsinghua.edu.cnE[FROM:&nbsp;klab.ishii.utsu]&nbsp;<BR>
<A HREF="00000018.htm">W@g</A>
<A HREF='javascript:history.go(-1)'>穰^W@</A>
<A HREF="index.htm">^欹乜</A>
<A HREF="#top">^飙董</A>
<A HREF="00000020.htm">U@g</A>
</H1></CENTER>
<CENTER><H1>BBS簸觳M地浮J弘地跋</H1></CENTER>
</BODY></HTML>