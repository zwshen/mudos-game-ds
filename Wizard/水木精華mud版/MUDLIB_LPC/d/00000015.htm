<HTML>
<HEAD>
<TITLE>BBS水木清華站︰精華區</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBS水木清華站︰精華區</H1></CENTER>
<A Name="top"></a>
發信人:&nbsp;Ranma&nbsp;(亂馬~~~~~~~無聊中),&nbsp;信區:&nbsp;Mud_Builder&nbsp;<BR>
標&nbsp;&nbsp;題:&nbsp;Lpc&nbsp;intermediate&nbsp;(4)--The&nbsp;LPC&nbsp;Pre-Compiler&nbsp;<BR>
發信站:&nbsp;BBS&nbsp;水木清華站&nbsp;(Mon&nbsp;Oct&nbsp;20&nbsp;09:15:27&nbsp;1997)&nbsp;<BR>
&nbsp;<BR>
Intermediate&nbsp;LPC&nbsp;<BR>
Descartes&nbsp;of&nbsp;Borg&nbsp;<BR>
November&nbsp;1993&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Chapter&nbsp;4:&nbsp;The&nbsp;LPC&nbsp;Pre-Compiler&nbsp;<BR>
&nbsp;<BR>
4.1&nbsp;Review&nbsp;<BR>
The&nbsp;previous&nbsp;chapter&nbsp;was&nbsp;quite&nbsp;heavy,&nbsp;so&nbsp;now&nbsp;I&nbsp;will&nbsp;slow&nbsp;down&nbsp;a&nbsp;bit&nbsp;so&nbsp;<BR>
you&nbsp;can&nbsp;digest&nbsp;and&nbsp;play&nbsp;with&nbsp;mappings&nbsp;and&nbsp;arrays&nbsp;by&nbsp;taking&nbsp;on&nbsp;the&nbsp;<BR>
rather&nbsp;simple&nbsp;topic&nbsp;of&nbsp;the&nbsp;LPC&nbsp;pre-compiler.&nbsp;&nbsp;By&nbsp;this&nbsp;point,&nbsp;however,&nbsp;<BR>
you&nbsp;should&nbsp;well&nbsp;understand&nbsp;how&nbsp;the&nbsp;driver&nbsp;interacts&nbsp;with&nbsp;the&nbsp;mudlib&nbsp;and&nbsp;<BR>
be&nbsp;able&nbsp;to&nbsp;code&nbsp;objects&nbsp;which&nbsp;use&nbsp;call&nbsp;outs&nbsp;and&nbsp;heart&nbsp;beats.&nbsp;&nbsp;In&nbsp;addition,&nbsp;<BR>
you&nbsp;should&nbsp;be&nbsp;coding&nbsp;simple&nbsp;objects&nbsp;which&nbsp;use&nbsp;mappings&nbsp;and&nbsp;arrays,&nbsp;<BR>
noting&nbsp;how&nbsp;these&nbsp;data&nbsp;types&nbsp;perform&nbsp;in&nbsp;objects.&nbsp;&nbsp;It&nbsp;is&nbsp;also&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;<BR>
start&nbsp;looking&nbsp;in&nbsp;detail&nbsp;at&nbsp;the&nbsp;actual&nbsp;mudlib&nbsp;code&nbsp;that&nbsp;makes&nbsp;up&nbsp;your&nbsp;mud.&nbsp;&nbsp;<BR>
See&nbsp;if&nbsp;you&nbsp;understand&nbsp;everything&nbsp;which&nbsp;is&nbsp;going&nbsp;on&nbsp;in&nbsp;your&nbsp;mudlibs&nbsp;<BR>
room&nbsp;and&nbsp;monster&nbsp;codes.&nbsp;&nbsp;For&nbsp;things&nbsp;you&nbsp;do&nbsp;not&nbsp;understand,&nbsp;ask&nbsp;the&nbsp;<BR>
people&nbsp;on&nbsp;your&nbsp;mud&nbsp;designated&nbsp;to&nbsp;answer&nbsp;creator&nbsp;coding&nbsp;questions.&nbsp;<BR>
&nbsp;<BR>
Pre-compiler&nbsp;is&nbsp;actually&nbsp;a&nbsp;bit&nbsp;of&nbsp;a&nbsp;misnomer&nbsp;since&nbsp;LPC&nbsp;code&nbsp;is&nbsp;never&nbsp;<BR>
truly&nbsp;compiled.&nbsp;&nbsp;Although&nbsp;this&nbsp;is&nbsp;changing&nbsp;with&nbsp;prototypes&nbsp;of&nbsp;newer&nbsp;<BR>
LPC&nbsp;drivers,&nbsp;LPC&nbsp;drivers&nbsp;interpret&nbsp;the&nbsp;LPC&nbsp;code&nbsp;written&nbsp;by&nbsp;creators&nbsp;<BR>
rather&nbsp;than&nbsp;compile&nbsp;it&nbsp;into&nbsp;binary&nbsp;format.&nbsp;&nbsp;Nevertheless,&nbsp;the&nbsp;LPC&nbsp;pre-&nbsp;<BR>
compiler&nbsp;functions&nbsp;still&nbsp;perform&nbsp;much&nbsp;like&nbsp;pre-compilers&nbsp;for&nbsp;compiled&nbsp;<BR>
languages&nbsp;in&nbsp;that&nbsp;pre-compiler&nbsp;directives&nbsp;are&nbsp;interpreted&nbsp;before&nbsp;the&nbsp;driver&nbsp;<BR>
even&nbsp;starts&nbsp;to&nbsp;look&nbsp;at&nbsp;object&nbsp;code.&nbsp;&nbsp;<BR>
&nbsp;<BR>
4.2&nbsp;Pre-compiler&nbsp;Directives&nbsp;<BR>
If&nbsp;you&nbsp;do&nbsp;not&nbsp;know&nbsp;what&nbsp;a&nbsp;pre-compiler&nbsp;is,&nbsp;you&nbsp;really&nbsp;do&nbsp;not&nbsp;need&nbsp;to&nbsp;<BR>
worry.&nbsp;&nbsp;With&nbsp;respect&nbsp;to&nbsp;LPC,&nbsp;it&nbsp;is&nbsp;basically&nbsp;a&nbsp;process&nbsp;which&nbsp;happens&nbsp;<BR>
before&nbsp;the&nbsp;driver&nbsp;begins&nbsp;to&nbsp;interpret&nbsp;LPC&nbsp;code&nbsp;which&nbsp;allows&nbsp;you&nbsp;to&nbsp;<BR>
perform&nbsp;actions&nbsp;upon&nbsp;the&nbsp;entire&nbsp;code&nbsp;found&nbsp;in&nbsp;your&nbsp;file.&nbsp;&nbsp;Since&nbsp;the&nbsp;code&nbsp;<BR>
is&nbsp;not&nbsp;yet&nbsp;interpreted,&nbsp;the&nbsp;pre-compiler&nbsp;process&nbsp;is&nbsp;involved&nbsp;before&nbsp;the&nbsp;file&nbsp;<BR>
exists&nbsp;as&nbsp;an&nbsp;object&nbsp;and&nbsp;before&nbsp;any&nbsp;LPC&nbsp;functions&nbsp;or&nbsp;instructions&nbsp;are&nbsp;ever&nbsp;<BR>
examined.&nbsp;&nbsp;The&nbsp;pre-compiler&nbsp;is&nbsp;thus&nbsp;working&nbsp;at&nbsp;the&nbsp;file&nbsp;level,&nbsp;meaning&nbsp;<BR>
that&nbsp;it&nbsp;does&nbsp;not&nbsp;deal&nbsp;with&nbsp;any&nbsp;code&nbsp;in&nbsp;inherited&nbsp;files.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;pre-compiler&nbsp;searches&nbsp;a&nbsp;file&nbsp;sent&nbsp;to&nbsp;it&nbsp;for&nbsp;pre-compiler&nbsp;directives.&nbsp;&nbsp;<BR>
These&nbsp;are&nbsp;little&nbsp;instructions&nbsp;in&nbsp;the&nbsp;file&nbsp;meant&nbsp;only&nbsp;for&nbsp;the&nbsp;pre-compiler&nbsp;<BR>
and&nbsp;are&nbsp;not&nbsp;really&nbsp;part&nbsp;of&nbsp;the&nbsp;LPC&nbsp;language.&nbsp;&nbsp;A&nbsp;pre-compiler&nbsp;directive&nbsp;is&nbsp;<BR>
any&nbsp;line&nbsp;in&nbsp;a&nbsp;file&nbsp;beginning&nbsp;with&nbsp;a&nbsp;pound&nbsp;(#)&nbsp;sign.&nbsp;&nbsp;Pre-compiler&nbsp;<BR>
directives&nbsp;are&nbsp;generally&nbsp;used&nbsp;to&nbsp;construct&nbsp;what&nbsp;the&nbsp;final&nbsp;code&nbsp;of&nbsp;a&nbsp;file&nbsp;will&nbsp;<BR>
look&nbsp;at.&nbsp;&nbsp;The&nbsp;most&nbsp;common&nbsp;pre-compiler&nbsp;directives&nbsp;are:&nbsp;<BR>
&nbsp;<BR>
#define&nbsp;<BR>
#undefine&nbsp;<BR>
#include&nbsp;<BR>
#ifdef&nbsp;<BR>
#ifndef&nbsp;<BR>
#if&nbsp;<BR>
#elseif&nbsp;<BR>
#else&nbsp;<BR>
#endif&nbsp;<BR>
#pragma&nbsp;<BR>
&nbsp;<BR>
Most&nbsp;realm&nbsp;coders&nbsp;on&nbsp;muds&nbsp;use&nbsp;exclusively&nbsp;the&nbsp;directives&nbsp;#define&nbsp;and&nbsp;<BR>
#include.&nbsp;&nbsp;The&nbsp;other&nbsp;directives&nbsp;you&nbsp;may&nbsp;see&nbsp;often&nbsp;and&nbsp;should&nbsp;understand&nbsp;<BR>
what&nbsp;they&nbsp;mean&nbsp;even&nbsp;if&nbsp;you&nbsp;never&nbsp;use&nbsp;them.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;first&nbsp;pair&nbsp;of&nbsp;directives&nbsp;are:&nbsp;<BR>
#define&nbsp;<BR>
#undefine&nbsp;<BR>
&nbsp;<BR>
The&nbsp;#define&nbsp;directive&nbsp;sets&nbsp;up&nbsp;a&nbsp;set&nbsp;of&nbsp;characters&nbsp;which&nbsp;will&nbsp;be&nbsp;replaced&nbsp;<BR>
any&nbsp;where&nbsp;they&nbsp;exist&nbsp;in&nbsp;the&nbsp;code&nbsp;at&nbsp;precompiler&nbsp;time&nbsp;with&nbsp;their&nbsp;definition.&nbsp;&nbsp;<BR>
For&nbsp;example,&nbsp;take:&nbsp;<BR>
&nbsp;<BR>
#define&nbsp;OB_USER&nbsp;&quot;/std/user&quot;&nbsp;<BR>
&nbsp;<BR>
This&nbsp;directive&nbsp;has&nbsp;the&nbsp;pre-compiler&nbsp;search&nbsp;the&nbsp;entire&nbsp;file&nbsp;for&nbsp;instances&nbsp;of&nbsp;<BR>
OB_USER.&nbsp;&nbsp;Everywhere&nbsp;it&nbsp;sees&nbsp;OB_USER,&nbsp;it&nbsp;replaces&nbsp;with&nbsp;&quot;/std/user&quot;.&nbsp;&nbsp;<BR>
Note&nbsp;that&nbsp;it&nbsp;does&nbsp;not&nbsp;make&nbsp;OB_USER&nbsp;a&nbsp;variable&nbsp;in&nbsp;the&nbsp;code.&nbsp;&nbsp;The&nbsp;LPC&nbsp;<BR>
interpreter&nbsp;never&nbsp;sees&nbsp;the&nbsp;OB_USER&nbsp;label.&nbsp;&nbsp;As&nbsp;stated&nbsp;above,&nbsp;the&nbsp;pre-&nbsp;<BR>
compiler&nbsp;is&nbsp;a&nbsp;process&nbsp;which&nbsp;takes&nbsp;place&nbsp;before&nbsp;code&nbsp;interpretation.&nbsp;&nbsp;So&nbsp;<BR>
what&nbsp;you&nbsp;wrote&nbsp;as:&nbsp;<BR>
&nbsp;<BR>
#define&nbsp;OB_USER&nbsp;&quot;/std/user&quot;&nbsp;<BR>
&nbsp;<BR>
void&nbsp;create()&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;if(!file_exists(OB_USER+&quot;.c&quot;))&nbsp;write(&quot;Merde!&nbsp;No&nbsp;user&nbsp;file!&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;write(&quot;Good!&nbsp;User&nbsp;file&nbsp;still&nbsp;exists!&quot;);&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
would&nbsp;arrive&nbsp;at&nbsp;the&nbsp;LPC&nbsp;interpreter&nbsp;as:&nbsp;<BR>
&nbsp;<BR>
void&nbsp;create()&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;if(!file_exists(&quot;/std/user&quot;+&quot;.c&quot;))&nbsp;write(&quot;Merde!&nbsp;No&nbsp;user&nbsp;file!&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;write(&quot;Good!&nbsp;User&nbsp;file&nbsp;still&nbsp;exists!&quot;);&nbsp;<BR>
}&nbsp;<BR>
&nbsp;<BR>
Simply&nbsp;put,&nbsp;#define&nbsp;just&nbsp;literally&nbsp;replaces&nbsp;the&nbsp;defined&nbsp;label&nbsp;with&nbsp;whatever&nbsp;<BR>
follows&nbsp;it.&nbsp;&nbsp;You&nbsp;may&nbsp;also&nbsp;use&nbsp;#define&nbsp;in&nbsp;a&nbsp;special&nbsp;instance&nbsp;where&nbsp;no&nbsp;<BR>
value&nbsp;follows.&nbsp;&nbsp;This&nbsp;is&nbsp;called&nbsp;a&nbsp;binary&nbsp;definition.&nbsp;&nbsp;For&nbsp;example:&nbsp;<BR>
&nbsp;<BR>
#define&nbsp;__NIGHTMARE&nbsp;<BR>
&nbsp;<BR>
exists&nbsp;in&nbsp;the&nbsp;config&nbsp;file&nbsp;for&nbsp;the&nbsp;Nightmare&nbsp;Mudlib.&nbsp;&nbsp;This&nbsp;allows&nbsp;for&nbsp;pre-&nbsp;<BR>
compiler&nbsp;tests&nbsp;which&nbsp;will&nbsp;be&nbsp;described&nbsp;later&nbsp;in&nbsp;the&nbsp;chapter.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;other&nbsp;pre-compiler&nbsp;directive&nbsp;you&nbsp;are&nbsp;likely&nbsp;to&nbsp;use&nbsp;often&nbsp;is&nbsp;#include.&nbsp;&nbsp;<BR>
As&nbsp;the&nbsp;name&nbsp;implies,&nbsp;#include&nbsp;includes&nbsp;the&nbsp;contents&nbsp;of&nbsp;another&nbsp;file&nbsp;right&nbsp;<BR>
into&nbsp;the&nbsp;file&nbsp;being&nbsp;pre-compiled&nbsp;at&nbsp;the&nbsp;point&nbsp;in&nbsp;the&nbsp;file&nbsp;where&nbsp;the&nbsp;directive&nbsp;<BR>
is&nbsp;placed.&nbsp;&nbsp;Files&nbsp;made&nbsp;for&nbsp;inclusion&nbsp;into&nbsp;other&nbsp;files&nbsp;are&nbsp;often&nbsp;called&nbsp;header&nbsp;<BR>
files.&nbsp;&nbsp;They&nbsp;sometimes&nbsp;contain&nbsp;things&nbsp;like&nbsp;#define&nbsp;directives&nbsp;used&nbsp;by&nbsp;<BR>
multiple&nbsp;files&nbsp;and&nbsp;function&nbsp;declarations&nbsp;for&nbsp;the&nbsp;file.&nbsp;&nbsp;The&nbsp;traditional&nbsp;file&nbsp;<BR>
extension&nbsp;to&nbsp;header&nbsp;files&nbsp;is&nbsp;.h.&nbsp;<BR>
&nbsp;<BR>
Include&nbsp;directives&nbsp;follow&nbsp;one&nbsp;of&nbsp;2&nbsp;syntax's:&nbsp;<BR>
&nbsp;<BR>
#include&nbsp;&lt;filename&gt;&nbsp;<BR>
#include&nbsp;&quot;filename&quot;&nbsp;<BR>
&nbsp;<BR>
If&nbsp;you&nbsp;give&nbsp;the&nbsp;absolute&nbsp;name&nbsp;of&nbsp;the&nbsp;file,&nbsp;then&nbsp;which&nbsp;syntax&nbsp;you&nbsp;use&nbsp;is&nbsp;<BR>
irrelevant.&nbsp;&nbsp;How&nbsp;you&nbsp;enclose&nbsp;the&nbsp;file&nbsp;name&nbsp;determines&nbsp;how&nbsp;the&nbsp;pre-&nbsp;<BR>
compiler&nbsp;searches&nbsp;for&nbsp;the&nbsp;header&nbsp;files.&nbsp;&nbsp;The&nbsp;pre-compiler&nbsp;first&nbsp;searches&nbsp;in&nbsp;<BR>
system&nbsp;include&nbsp;directories&nbsp;for&nbsp;files&nbsp;enclosed&nbsp;in&nbsp;&lt;&gt;.&nbsp;&nbsp;For&nbsp;files&nbsp;enclosed&nbsp;in&nbsp;<BR>
&quot;&quot;,&nbsp;the&nbsp;pre-compiler&nbsp;begins&nbsp;its&nbsp;search&nbsp;in&nbsp;the&nbsp;same&nbsp;directory&nbsp;as&nbsp;the&nbsp;file&nbsp;<BR>
going&nbsp;through&nbsp;the&nbsp;pre-compiler.&nbsp;&nbsp;Either&nbsp;way,&nbsp;the&nbsp;pre-compiler&nbsp;will&nbsp;<BR>
search&nbsp;the&nbsp;system&nbsp;include&nbsp;directories&nbsp;and&nbsp;the&nbsp;directory&nbsp;of&nbsp;the&nbsp;file&nbsp;for&nbsp;the&nbsp;<BR>
header&nbsp;file&nbsp;before&nbsp;giving&nbsp;up.&nbsp;&nbsp;The&nbsp;syntax&nbsp;simply&nbsp;determines&nbsp;the&nbsp;order.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;simplest&nbsp;pre-compiler&nbsp;directive&nbsp;is&nbsp;the&nbsp;#pragma&nbsp;directive.&nbsp;&nbsp;It&nbsp;is&nbsp;<BR>
doubtful&nbsp;you&nbsp;will&nbsp;ever&nbsp;use&nbsp;this&nbsp;one.&nbsp;&nbsp;Basically,&nbsp;you&nbsp;follow&nbsp;the&nbsp;directive&nbsp;<BR>
with&nbsp;some&nbsp;keyword&nbsp;which&nbsp;is&nbsp;meaningful&nbsp;to&nbsp;your&nbsp;driver.&nbsp;&nbsp;The&nbsp;only&nbsp;<BR>
keyword&nbsp;I&nbsp;have&nbsp;ever&nbsp;seen&nbsp;is&nbsp;strict_types,&nbsp;which&nbsp;simply&nbsp;lets&nbsp;the&nbsp;driver&nbsp;<BR>
know&nbsp;you&nbsp;want&nbsp;this&nbsp;file&nbsp;interpreted&nbsp;with&nbsp;strict&nbsp;data&nbsp;typing.&nbsp;&nbsp;I&nbsp;doubt&nbsp;you&nbsp;<BR>
will&nbsp;ever&nbsp;need&nbsp;to&nbsp;use&nbsp;this,&nbsp;and&nbsp;you&nbsp;may&nbsp;never&nbsp;even&nbsp;see&nbsp;it.&nbsp;&nbsp;I&nbsp;just&nbsp;included&nbsp;<BR>
it&nbsp;in&nbsp;the&nbsp;list&nbsp;in&nbsp;the&nbsp;event&nbsp;you&nbsp;do&nbsp;see&nbsp;it&nbsp;so&nbsp;you&nbsp;do&nbsp;not&nbsp;think&nbsp;it&nbsp;is&nbsp;doing&nbsp;<BR>
anything&nbsp;truly&nbsp;meaningful.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;final&nbsp;group&nbsp;of&nbsp;pre-compiler&nbsp;directives&nbsp;are&nbsp;the&nbsp;conditional&nbsp;pre-&nbsp;<BR>
compiler&nbsp;directives.&nbsp;&nbsp;They&nbsp;allow&nbsp;you&nbsp;to&nbsp;pre-compile&nbsp;the&nbsp;file&nbsp;one&nbsp;way&nbsp;<BR>
given&nbsp;the&nbsp;truth&nbsp;value&nbsp;of&nbsp;an&nbsp;expression,&nbsp;otherwise&nbsp;pre-compile&nbsp;the&nbsp;file&nbsp;<BR>
another&nbsp;way.&nbsp;&nbsp;This&nbsp;is&nbsp;mostly&nbsp;useful&nbsp;for&nbsp;making&nbsp;code&nbsp;portable&nbsp;among&nbsp;<BR>
mudlibs,&nbsp;since&nbsp;putting&nbsp;the&nbsp;m_delete()&nbsp;efun&nbsp;in&nbsp;code&nbsp;on&nbsp;a&nbsp;MudOS&nbsp;mud&nbsp;<BR>
would&nbsp;normally&nbsp;cause&nbsp;an&nbsp;error,&nbsp;for&nbsp;example.&nbsp;&nbsp;So&nbsp;you&nbsp;might&nbsp;write&nbsp;the&nbsp;<BR>
following:&nbsp;<BR>
&nbsp;<BR>
#ifdef&nbsp;&nbsp;MUDOS&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;map_delete(map,&nbsp;key);&nbsp;<BR>
#else&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;map&nbsp;=&nbsp;m_delete(map,&nbsp;key);&nbsp;<BR>
#endif&nbsp;<BR>
&nbsp;<BR>
which&nbsp;after&nbsp;being&nbsp;passed&nbsp;through&nbsp;the&nbsp;pre-compiler&nbsp;will&nbsp;appear&nbsp;to&nbsp;the&nbsp;<BR>
interpreter&nbsp;as:&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;map_delete(map,&nbsp;key);&nbsp;&nbsp;&nbsp;&nbsp;<BR>
&nbsp;<BR>
on&nbsp;a&nbsp;MudOS&nbsp;mud,&nbsp;and:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;map&nbsp;=&nbsp;m_delete(map,&nbsp;key);&nbsp;<BR>
&nbsp;<BR>
on&nbsp;other&nbsp;muds.&nbsp;&nbsp;The&nbsp;interpreter&nbsp;never&nbsp;sees&nbsp;the&nbsp;function&nbsp;call&nbsp;that&nbsp;would&nbsp;<BR>
cause&nbsp;it&nbsp;to&nbsp;spam&nbsp;out&nbsp;in&nbsp;error.&nbsp;&nbsp;<BR>
&nbsp;<BR>
Notice&nbsp;that&nbsp;my&nbsp;example&nbsp;made&nbsp;use&nbsp;of&nbsp;a&nbsp;binary&nbsp;definition&nbsp;as&nbsp;described&nbsp;<BR>
above.&nbsp;&nbsp;Binary&nbsp;definitions&nbsp;allow&nbsp;you&nbsp;to&nbsp;pass&nbsp;certain&nbsp;code&nbsp;to&nbsp;the&nbsp;<BR>
interpreter&nbsp;based&nbsp;on&nbsp;what&nbsp;driver&nbsp;or&nbsp;mudlib&nbsp;you&nbsp;are&nbsp;using,&nbsp;among&nbsp;other&nbsp;<BR>
conditions.&nbsp;<BR>
&nbsp;<BR>
4.3&nbsp;Summary&nbsp;<BR>
The&nbsp;pre-compiler&nbsp;is&nbsp;a&nbsp;useful&nbsp;LPC&nbsp;tool&nbsp;for&nbsp;maintaining&nbsp;modularity&nbsp;among&nbsp;<BR>
your&nbsp;programs.&nbsp;&nbsp;When&nbsp;you&nbsp;have&nbsp;values&nbsp;that&nbsp;might&nbsp;be&nbsp;subject&nbsp;to&nbsp;change,&nbsp;<BR>
but&nbsp;are&nbsp;used&nbsp;widely&nbsp;throughout&nbsp;your&nbsp;files,&nbsp;you&nbsp;might&nbsp;stick&nbsp;all&nbsp;of&nbsp;those&nbsp;<BR>
values&nbsp;in&nbsp;a&nbsp;header&nbsp;file&nbsp;as&nbsp;#define&nbsp;statements&nbsp;so&nbsp;that&nbsp;any&nbsp;need&nbsp;to&nbsp;make&nbsp;a&nbsp;<BR>
future&nbsp;change&nbsp;will&nbsp;cause&nbsp;you&nbsp;to&nbsp;need&nbsp;to&nbsp;change&nbsp;just&nbsp;the&nbsp;#define&nbsp;directive.&nbsp;&nbsp;<BR>
A&nbsp;very&nbsp;good&nbsp;example&nbsp;of&nbsp;where&nbsp;this&nbsp;would&nbsp;be&nbsp;useful&nbsp;would&nbsp;be&nbsp;a&nbsp;header&nbsp;<BR>
file&nbsp;called&nbsp;money.h&nbsp;&nbsp;which&nbsp;includes&nbsp;the&nbsp;directive:&nbsp;<BR>
#define&nbsp;HARD_CURRENCIES&nbsp;({&nbsp;&quot;gold&quot;,&nbsp;&quot;platinum&quot;,&nbsp;&quot;silver&quot;,&nbsp;<BR>
&quot;electrum&quot;,&nbsp;&quot;copper&quot;&nbsp;})&nbsp;<BR>
so&nbsp;that&nbsp;if&nbsp;ever&nbsp;you&nbsp;wanted&nbsp;to&nbsp;add&nbsp;a&nbsp;new&nbsp;hard&nbsp;currency,&nbsp;you&nbsp;only&nbsp;need&nbsp;<BR>
change&nbsp;this&nbsp;directive&nbsp;in&nbsp;order&nbsp;to&nbsp;update&nbsp;all&nbsp;files&nbsp;needing&nbsp;to&nbsp;know&nbsp;what&nbsp;the&nbsp;<BR>
hard&nbsp;currencies&nbsp;are.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;LPC&nbsp;pre-compiler&nbsp;also&nbsp;allows&nbsp;you&nbsp;to&nbsp;write&nbsp;code&nbsp;which&nbsp;can&nbsp;be&nbsp;<BR>
ported&nbsp;without&nbsp;change&nbsp;among&nbsp;different&nbsp;mudlibs&nbsp;and&nbsp;drivers.&nbsp;&nbsp;Finally,&nbsp;<BR>
you&nbsp;should&nbsp;be&nbsp;aware&nbsp;that&nbsp;the&nbsp;pre-compiler&nbsp;only&nbsp;accepts&nbsp;lines&nbsp;ending&nbsp;in&nbsp;<BR>
carriage&nbsp;returns.&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;a&nbsp;multiple&nbsp;line&nbsp;pre-compiler&nbsp;directive,&nbsp;you&nbsp;<BR>
need&nbsp;to&nbsp;end&nbsp;each&nbsp;incomplete&nbsp;line&nbsp;with&nbsp;a&nbsp;backslash(\).&nbsp;<BR>
&nbsp;<BR>
Copyright&nbsp;(c)&nbsp;George&nbsp;Reese&nbsp;1993&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
小樓一夜聽秋雨&nbsp;<BR>
--&nbsp;<BR>
佇倚危樓風細細&nbsp;望極春愁&nbsp;黯黯生天際&nbsp;&nbsp;草色煙光殘照裡&nbsp;無言誰會憑欄意[0&nbsp;<BR>
擬把疏狂圖一醉&nbsp;對酒當歌&nbsp;強樂還無味&nbsp;&nbsp;衣帶漸寬終不悔&nbsp;為伊消得人憔悴&nbsp;<BR>
&nbsp;<BR>
※&nbsp;來源:•BBS&nbsp;水木清華站&nbsp;bbs.net.tsinghua.edu.cn•[FROM:&nbsp;166.111.5.25]&nbsp;<BR>
<A HREF="00000014.htm">上一篇</A>
<A HREF='javascript:history.go(-1)'>返回上一頁</A>
<A HREF="index.htm">回到目錄</A>
<A HREF="#top">回到頁首</A>
<A HREF="00000016.htm">下一篇</A>
</H1></CENTER>
<CENTER><H1>BBS水木清華站︰精華區</H1></CENTER>
</BODY></HTML>