<HTML>
<HEAD>
<TITLE>BBS水木清華站︰精華區</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBS水木清華站︰精華區</H1></CENTER>
<A Name="top"></a>
發信人:&nbsp;Ranma&nbsp;(亂馬~~~~~~~無聊中),&nbsp;信區:&nbsp;Mud_Builder&nbsp;<BR>
標&nbsp;&nbsp;題:&nbsp;Lpc&nbsp;basics&nbsp;(8)--The&nbsp;data&nbsp;type&nbsp;&quot;object&quot;&nbsp;<BR>
發信站:&nbsp;BBS&nbsp;水木清華站&nbsp;(Mon&nbsp;Oct&nbsp;20&nbsp;09:08:19&nbsp;1997)&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LPC&nbsp;Basics&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Written&nbsp;by&nbsp;Descartes&nbsp;of&nbsp;Borg&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;edition:&nbsp;23&nbsp;april&nbsp;1993&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;edition:&nbsp;12&nbsp;july&nbsp;1993&nbsp;<BR>
&nbsp;<BR>
CHAPTER&nbsp;8:&nbsp;The&nbsp;data&nbsp;type&nbsp;&quot;object&quot;&nbsp;<BR>
&nbsp;<BR>
8.1&nbsp;Review&nbsp;<BR>
You&nbsp;should&nbsp;now&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;anything&nbsp;so&nbsp;long&nbsp;as&nbsp;you&nbsp;stick&nbsp;to&nbsp;calling&nbsp;<BR>
functions&nbsp;within&nbsp;your&nbsp;own&nbsp;object.&nbsp;&nbsp;You&nbsp;should&nbsp;also&nbsp;know,&nbsp;that&nbsp;at&nbsp;the&nbsp;<BR>
bare&nbsp;minimum&nbsp;you&nbsp;can&nbsp;get&nbsp;the&nbsp;create()&nbsp;(or&nbsp;reset())&nbsp;function&nbsp;in&nbsp;your&nbsp;object&nbsp;<BR>
called&nbsp;to&nbsp;start&nbsp;just&nbsp;by&nbsp;loading&nbsp;it&nbsp;into&nbsp;memory,&nbsp;and&nbsp;that&nbsp;your&nbsp;reset()&nbsp;<BR>
function&nbsp;will&nbsp;be&nbsp;called&nbsp;every&nbsp;now&nbsp;and&nbsp;then&nbsp;so&nbsp;that&nbsp;you&nbsp;may&nbsp;write&nbsp;the&nbsp;<BR>
code&nbsp;necessary&nbsp;to&nbsp;refresh&nbsp;your&nbsp;room.&nbsp;&nbsp;Note&nbsp;that&nbsp;neither&nbsp;of&nbsp;these&nbsp;<BR>
functions&nbsp;MUST&nbsp;be&nbsp;in&nbsp;your&nbsp;object.&nbsp;&nbsp;The&nbsp;driver&nbsp;checks&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;<BR>
function&nbsp;exists&nbsp;in&nbsp;your&nbsp;object&nbsp;first.&nbsp;&nbsp;If&nbsp;it&nbsp;does&nbsp;not,&nbsp;then&nbsp;it&nbsp;does&nbsp;not&nbsp;<BR>
bother.&nbsp;&nbsp;You&nbsp;are&nbsp;also&nbsp;acquainted&nbsp;with&nbsp;the&nbsp;data&nbsp;types&nbsp;void,&nbsp;int,&nbsp;and&nbsp;string.&nbsp;<BR>
&nbsp;&nbsp;<BR>
7.2&nbsp;Objects&nbsp;as&nbsp;data&nbsp;types&nbsp;<BR>
In&nbsp;this&nbsp;chapter&nbsp;you&nbsp;will&nbsp;be&nbsp;acquainted&nbsp;with&nbsp;a&nbsp;more&nbsp;complex&nbsp;data&nbsp;type,&nbsp;<BR>
object.&nbsp;&nbsp;An&nbsp;object&nbsp;variable&nbsp;points&nbsp;to&nbsp;a&nbsp;real&nbsp;object&nbsp;loaded&nbsp;into&nbsp;the&nbsp;<BR>
driver's&nbsp;memory.&nbsp;&nbsp;You&nbsp;declare&nbsp;it&nbsp;in&nbsp;the&nbsp;same&nbsp;manner&nbsp;as&nbsp;other&nbsp;data&nbsp;types:&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;object&nbsp;ob;&nbsp;<BR>
It&nbsp;differs&nbsp;in&nbsp;that&nbsp;you&nbsp;cannot&nbsp;use&nbsp;+,&nbsp;-,&nbsp;+=,&nbsp;-=,&nbsp;*,&nbsp;or&nbsp;/&nbsp;(what&nbsp;would&nbsp;it&nbsp;<BR>
mean&nbsp;to&nbsp;divide&nbsp;a&nbsp;monster&nbsp;by&nbsp;another&nbsp;monster?).&nbsp;&nbsp;And&nbsp;since&nbsp;efuns&nbsp;like&nbsp;<BR>
say()&nbsp;and&nbsp;write()&nbsp;only&nbsp;want&nbsp;strings&nbsp;or&nbsp;ints,&nbsp;you&nbsp;cannot&nbsp;write()&nbsp;or&nbsp;<BR>
say()&nbsp;them&nbsp;(again,&nbsp;what&nbsp;would&nbsp;it&nbsp;mean&nbsp;to&nbsp;say&nbsp;a&nbsp;monster?).&nbsp;<BR>
But&nbsp;you&nbsp;can&nbsp;use&nbsp;them&nbsp;with&nbsp;some&nbsp;other&nbsp;of&nbsp;the&nbsp;most&nbsp;important&nbsp;efuns&nbsp;on&nbsp;any&nbsp;<BR>
LPMud.&nbsp;<BR>
&nbsp;&nbsp;<BR>
8.3&nbsp;The&nbsp;efun:&nbsp;this_object()&nbsp;<BR>
This&nbsp;is&nbsp;an&nbsp;efun&nbsp;which&nbsp;returns&nbsp;an&nbsp;object&nbsp;in&nbsp;which&nbsp;the&nbsp;function&nbsp;being&nbsp;executed&nbsp;<BR>
exists.&nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;in&nbsp;a&nbsp;file,&nbsp;this_object()&nbsp;refers&nbsp;to&nbsp;the&nbsp;object&nbsp;your&nbsp;<BR>
file&nbsp;is&nbsp;in&nbsp;whether&nbsp;the&nbsp;file&nbsp;gets&nbsp;cloned&nbsp;itself&nbsp;or&nbsp;inherted&nbsp;by&nbsp;another&nbsp;file.&nbsp;<BR>
It&nbsp;is&nbsp;often&nbsp;useful&nbsp;when&nbsp;you&nbsp;are&nbsp;writing&nbsp;a&nbsp;file&nbsp;which&nbsp;is&nbsp;getting&nbsp;inherited&nbsp;<BR>
by&nbsp;another&nbsp;file.&nbsp;&nbsp;Say&nbsp;you&nbsp;are&nbsp;writing&nbsp;your&nbsp;own&nbsp;living.c&nbsp;which&nbsp;gets&nbsp;<BR>
inherited&nbsp;by&nbsp;user.c&nbsp;and&nbsp;monster.c,&nbsp;but&nbsp;never&nbsp;used&nbsp;alone.&nbsp;&nbsp;You&nbsp;want&nbsp;to&nbsp;log&nbsp;<BR>
the&nbsp;function&nbsp;set_level()&nbsp;it&nbsp;is&nbsp;a&nbsp;player's&nbsp;level&nbsp;being&nbsp;set&nbsp;(but&nbsp;you&nbsp;do&nbsp;not&nbsp;<BR>
care&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;monster.&nbsp;<BR>
You&nbsp;might&nbsp;do&nbsp;this:&nbsp;<BR>
&nbsp;&nbsp;<BR>
void&nbsp;set_level(int&nbsp;x)&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;if(this_object()-&gt;is_player())&nbsp;log_file(&quot;levels&quot;,&nbsp;&quot;foo\n&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;=&nbsp;x;&nbsp;<BR>
}&nbsp;<BR>
&nbsp;&nbsp;<BR>
Since&nbsp;is_player()&nbsp;is&nbsp;not&nbsp;defined&nbsp;in&nbsp;living.c&nbsp;or&nbsp;anything&nbsp;it&nbsp;inherits,&nbsp;<BR>
just&nbsp;saying&nbsp;if(is_player())&nbsp;will&nbsp;result&nbsp;in&nbsp;an&nbsp;error&nbsp;since&nbsp;the&nbsp;driver&nbsp;<BR>
does&nbsp;not&nbsp;find&nbsp;that&nbsp;function&nbsp;in&nbsp;your&nbsp;file&nbsp;or&nbsp;anything&nbsp;it&nbsp;inherits.&nbsp;<BR>
this_object()&nbsp;allows&nbsp;you&nbsp;to&nbsp;access&nbsp;functions&nbsp;which&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;<BR>
present&nbsp;in&nbsp;any&nbsp;final&nbsp;products&nbsp;because&nbsp;your&nbsp;file&nbsp;is&nbsp;inherited&nbsp;by&nbsp;others&nbsp;<BR>
without&nbsp;resulting&nbsp;in&nbsp;an&nbsp;error.&nbsp;<BR>
&nbsp;&nbsp;<BR>
8.4&nbsp;Calling&nbsp;functions&nbsp;in&nbsp;other&nbsp;objects&nbsp;<BR>
This&nbsp;of&nbsp;course&nbsp;introduces&nbsp;us&nbsp;to&nbsp;the&nbsp;most&nbsp;important&nbsp;characteristic&nbsp;of&nbsp;<BR>
the&nbsp;object&nbsp;data&nbsp;type.&nbsp;&nbsp;It&nbsp;allows&nbsp;us&nbsp;to&nbsp;access&nbsp;functions&nbsp;in&nbsp;other&nbsp;objects.&nbsp;<BR>
In&nbsp;previous&nbsp;examples&nbsp;you&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;find&nbsp;out&nbsp;about&nbsp;a&nbsp;player's&nbsp;level,&nbsp;<BR>
reduce&nbsp;the&nbsp;money&nbsp;they&nbsp;have,&nbsp;and&nbsp;how&nbsp;much&nbsp;hp&nbsp;they&nbsp;have.&nbsp;<BR>
Calls&nbsp;to&nbsp;functions&nbsp;in&nbsp;other&nbsp;objects&nbsp;may&nbsp;be&nbsp;done&nbsp;in&nbsp;two&nbsp;ways:&nbsp;<BR>
&nbsp;&nbsp;<BR>
object-&gt;function(parameters)&nbsp;<BR>
call_other(object,&nbsp;&quot;function&quot;,&nbsp;parameters);&nbsp;<BR>
&nbsp;&nbsp;<BR>
example:&nbsp;<BR>
this_player()-&gt;add_money(&quot;silver&quot;,&nbsp;-5);&nbsp;<BR>
call_other(this_player(),&nbsp;&quot;add_money&quot;,&nbsp;&quot;silver&quot;,&nbsp;-5);&nbsp;<BR>
&nbsp;&nbsp;<BR>
In&nbsp;some&nbsp;(very&nbsp;loose&nbsp;sense),&nbsp;the&nbsp;game&nbsp;is&nbsp;just&nbsp;a&nbsp;chain&nbsp;reaction&nbsp;of&nbsp;function&nbsp;<BR>
calls&nbsp;initiated&nbsp;by&nbsp;player&nbsp;commands.&nbsp;&nbsp;When&nbsp;a&nbsp;player&nbsp;initiates&nbsp;a&nbsp;chain&nbsp;of&nbsp;<BR>
function&nbsp;calls,&nbsp;that&nbsp;player&nbsp;is&nbsp;the&nbsp;object&nbsp;which&nbsp;is&nbsp;returned&nbsp;by&nbsp;<BR>
the&nbsp;efun&nbsp;this_player().&nbsp;&nbsp;So,&nbsp;since&nbsp;this_player()&nbsp;can&nbsp;change&nbsp;depending&nbsp;<BR>
on&nbsp;who&nbsp;initiated&nbsp;the&nbsp;sequence&nbsp;of&nbsp;events,&nbsp;you&nbsp;want&nbsp;to&nbsp;be&nbsp;very&nbsp;careful&nbsp;<BR>
as&nbsp;to&nbsp;where&nbsp;you&nbsp;place&nbsp;calls&nbsp;to&nbsp;functions&nbsp;in&nbsp;this_player().&nbsp;&nbsp;The&nbsp;most&nbsp;common&nbsp;<BR>
place&nbsp;you&nbsp;do&nbsp;this&nbsp;is&nbsp;through&nbsp;the&nbsp;last&nbsp;important&nbsp;lfun&nbsp;(we&nbsp;have&nbsp;mentioned&nbsp;<BR>
create()&nbsp;and&nbsp;reset())&nbsp;init().&nbsp;<BR>
&nbsp;&nbsp;<BR>
8.5&nbsp;The&nbsp;lfun:&nbsp;init()&nbsp;<BR>
Any&nbsp;time&nbsp;a&nbsp;living&nbsp;thing&nbsp;encounters&nbsp;an&nbsp;object&nbsp;(enters&nbsp;a&nbsp;new&nbsp;room,&nbsp;or&nbsp;enters&nbsp;<BR>
the&nbsp;same&nbsp;room&nbsp;as&nbsp;a&nbsp;certain&nbsp;other&nbsp;object),&nbsp;init()&nbsp;is&nbsp;called&nbsp;in&nbsp;all&nbsp;of&nbsp;<BR>
the&nbsp;objects&nbsp;the&nbsp;living&nbsp;being&nbsp;newly&nbsp;encounters.&nbsp;&nbsp;It&nbsp;is&nbsp;at&nbsp;this&nbsp;point&nbsp;<BR>
that&nbsp;you&nbsp;can&nbsp;add&nbsp;commands&nbsp;the&nbsp;player&nbsp;can&nbsp;issue&nbsp;in&nbsp;order&nbsp;to&nbsp;act.&nbsp;<BR>
Here&nbsp;is&nbsp;a&nbsp;sample&nbsp;init()&nbsp;function&nbsp;in&nbsp;a&nbsp;flower.&nbsp;<BR>
&nbsp;&nbsp;<BR>
void&nbsp;init()&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;::init();&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;add_action(&quot;smell_flower&quot;,&nbsp;&quot;smell&quot;);&nbsp;<BR>
}&nbsp;<BR>
&nbsp;&nbsp;<BR>
Ito&nbsp;smell_flower().&nbsp;&nbsp;So&nbsp;you&nbsp;should&nbsp;have&nbsp;smell_flower()&nbsp;look&nbsp;like&nbsp;this:&nbsp;<BR>
&nbsp;&nbsp;<BR>
1&nbsp;int&nbsp;smell_flower(string&nbsp;str);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;action&nbsp;functions&nbsp;are&nbsp;type&nbsp;int&nbsp;*/&nbsp;<BR>
2&nbsp;<BR>
3&nbsp;int&nbsp;smell_flower(string&nbsp;str)&nbsp;{&nbsp;<BR>
4&nbsp;&nbsp;&nbsp;&nbsp;if(str&nbsp;!=&nbsp;&quot;flower&quot;)&nbsp;return&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;it&nbsp;is&nbsp;not&nbsp;the&nbsp;flower&nbsp;being&nbsp;smelled&nbsp;*/&nbsp;<BR>
5&nbsp;&nbsp;&nbsp;&nbsp;write(&quot;You&nbsp;sniff&nbsp;the&nbsp;flower.\n&quot;);&nbsp;<BR>
6&nbsp;&nbsp;&nbsp;&nbsp;say((string)this_player()-&gt;query_cap_name()+&quot;&nbsp;smells&nbsp;the&nbsp;flower.\n&quot;);&nbsp;<BR>
7&nbsp;&nbsp;&nbsp;&nbsp;this_player()-&gt;add_hp(random(5));&nbsp;<BR>
8&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;&nbsp;<BR>
9&nbsp;}&nbsp;<BR>
&nbsp;&nbsp;<BR>
In&nbsp;line&nbsp;1,&nbsp;we&nbsp;have&nbsp;our&nbsp;function&nbsp;declared.&nbsp;<BR>
In&nbsp;line&nbsp;3,&nbsp;smell_flower()&nbsp;begins.&nbsp;&nbsp;str&nbsp;becomes&nbsp;whatever&nbsp;comes&nbsp;after&nbsp;the&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;players&nbsp;command&nbsp;(not&nbsp;including&nbsp;the&nbsp;first&nbsp;white&nbsp;space).&nbsp;<BR>
In&nbsp;line&nbsp;4,&nbsp;it&nbsp;checks&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;player&nbsp;had&nbsp;typed&nbsp;&quot;smell&nbsp;flower&quot;.&nbsp;&nbsp;If&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;player&nbsp;had&nbsp;typed&nbsp;&quot;smell&nbsp;cheese&quot;,&nbsp;then&nbsp;str&nbsp;would&nbsp;be&nbsp;&quot;cheese&quot;.&nbsp;&nbsp;If&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;not&nbsp;in&nbsp;fact&nbsp;&quot;flower&quot;&nbsp;which&nbsp;is&nbsp;being&nbsp;smelled,&nbsp;then&nbsp;0&nbsp;is&nbsp;returned,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;letting&nbsp;the&nbsp;driver&nbsp;know&nbsp;that&nbsp;this&nbsp;was&nbsp;not&nbsp;the&nbsp;function&nbsp;which&nbsp;should&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;have&nbsp;been&nbsp;called.&nbsp;&nbsp;If&nbsp;in&nbsp;fact&nbsp;the&nbsp;player&nbsp;had&nbsp;a&nbsp;piece&nbsp;of&nbsp;cheese&nbsp;as&nbsp;well&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;had&nbsp;a&nbsp;smell&nbsp;command&nbsp;to&nbsp;it,&nbsp;the&nbsp;driver&nbsp;would&nbsp;then&nbsp;call&nbsp;the&nbsp;function&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;smelling&nbsp;in&nbsp;that&nbsp;object.&nbsp;&nbsp;The&nbsp;driver&nbsp;will&nbsp;keep&nbsp;calling&nbsp;all&nbsp;functions&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;tied&nbsp;to&nbsp;smell&nbsp;commands&nbsp;until&nbsp;one&nbsp;of&nbsp;them&nbsp;returns&nbsp;1.&nbsp;&nbsp;If&nbsp;they&nbsp;all&nbsp;return&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;then&nbsp;the&nbsp;player&nbsp;sees&nbsp;&quot;What?&quot;&nbsp;<BR>
In&nbsp;line&nbsp;5,&nbsp;the&nbsp;efun&nbsp;write()&nbsp;is&nbsp;called.&nbsp;&nbsp;write()&nbsp;prints&nbsp;the&nbsp;string&nbsp;which&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;passed&nbsp;to&nbsp;it&nbsp;to&nbsp;this_player().&nbsp;&nbsp;So&nbsp;whoever&nbsp;typed&nbsp;the&nbsp;command&nbsp;here&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;sees&nbsp;&quot;You&nbsp;sniff&nbsp;the&nbsp;flower.&quot;&nbsp;<BR>
In&nbsp;line&nbsp;6,&nbsp;the&nbsp;efun&nbsp;say()&nbsp;is&nbsp;called.&nbsp;&nbsp;say()&nbsp;prints&nbsp;the&nbsp;string&nbsp;which&nbsp;is&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;doing&nbsp;the&nbsp;sniffing,&nbsp;we&nbsp;have&nbsp;to&nbsp;call&nbsp;the&nbsp;query_cap_name()&nbsp;function&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;this_player().&nbsp;&nbsp;That&nbsp;way&nbsp;if&nbsp;the&nbsp;player&nbsp;is&nbsp;invis,&nbsp;it&nbsp;will&nbsp;say&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;Someone&quot;&nbsp;(or&nbsp;something&nbsp;like&nbsp;that),&nbsp;and&nbsp;it&nbsp;will&nbsp;also&nbsp;be&nbsp;properly&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;capitalized.&nbsp;<BR>
In&nbsp;line&nbsp;7,&nbsp;we&nbsp;call&nbsp;the&nbsp;add_hp()&nbsp;function&nbsp;in&nbsp;the&nbsp;this_player()&nbsp;object,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;since&nbsp;we&nbsp;want&nbsp;to&nbsp;do&nbsp;a&nbsp;little&nbsp;healing&nbsp;for&nbsp;the&nbsp;sniff&nbsp;(Note:&nbsp;do&nbsp;not&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;this&nbsp;object&nbsp;on&nbsp;your&nbsp;mud,&nbsp;whoever&nbsp;balances&nbsp;your&nbsp;mud&nbsp;will&nbsp;shoot&nbsp;you).&nbsp;<BR>
In&nbsp;line&nbsp;8,&nbsp;we&nbsp;return&nbsp;control&nbsp;of&nbsp;the&nbsp;game&nbsp;to&nbsp;the&nbsp;driver,&nbsp;returning&nbsp;1&nbsp;to&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;it&nbsp;know&nbsp;that&nbsp;this&nbsp;was&nbsp;in&nbsp;fact&nbsp;the&nbsp;right&nbsp;function&nbsp;to&nbsp;call.&nbsp;<BR>
&nbsp;&nbsp;<BR>
8.6&nbsp;Adding&nbsp;objects&nbsp;to&nbsp;your&nbsp;rooms&nbsp;<BR>
And&nbsp;now,&nbsp;using&nbsp;the&nbsp;data&nbsp;type&nbsp;object,&nbsp;you&nbsp;can&nbsp;add&nbsp;monsters&nbsp;to&nbsp;your&nbsp;rooms:&nbsp;<BR>
&nbsp;&nbsp;<BR>
void&nbsp;create()&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;::create();&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;set_property(&quot;light&quot;,&nbsp;3);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;set(&quot;short&quot;,&nbsp;&quot;Krasna&nbsp;Square&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;set(&quot;long&quot;,&nbsp;&quot;Welcome&nbsp;to&nbsp;the&nbsp;Central&nbsp;Square&nbsp;of&nbsp;the&nbsp;town&nbsp;of&nbsp;Praxis.\n&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;set_exits(&nbsp;({&nbsp;&quot;d/standard/hall&quot;&nbsp;}),&nbsp;({&nbsp;&quot;east&quot;&nbsp;})&nbsp;);&nbsp;<BR>
}&nbsp;<BR>
&nbsp;&nbsp;<BR>
void&nbsp;reset()&nbsp;{&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;object&nbsp;ob;&nbsp;<BR>
&nbsp;&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;::reset();&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;if(present(&quot;guard&quot;))&nbsp;return;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Do&nbsp;not&nbsp;want&nbsp;to&nbsp;add&nbsp;a&nbsp;guard&nbsp;if&nbsp;*/&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob&nbsp;=&nbsp;new(&quot;/std/monster&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;one&nbsp;is&nbsp;already&nbsp;here&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_name(&quot;guard&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set(&quot;id&quot;,&nbsp;({&nbsp;&quot;guard&quot;,&nbsp;&quot;town&nbsp;guard&quot;&nbsp;})&nbsp;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set(&quot;short&quot;,&nbsp;&quot;Town&nbsp;guard&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set(&quot;long&quot;,&nbsp;&quot;He&nbsp;guards&nbsp;Praxis&nbsp;from&nbsp;nothingness.\n&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_gender(&quot;male&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_race(&quot;human&quot;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_level(10);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_alignment(200);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_humanoid();&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_hp(150);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;set_wielding_limbs(&nbsp;({&nbsp;&quot;right&nbsp;hand&quot;,&nbsp;&quot;left&nbsp;hand&quot;&nbsp;})&nbsp;);&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;ob-&gt;move(this_object());&nbsp;<BR>
}&nbsp;<BR>
&nbsp;&nbsp;<BR>
Now,&nbsp;this&nbsp;will&nbsp;be&nbsp;wildly&nbsp;different&nbsp;on&nbsp;most&nbsp;muds.&nbsp;&nbsp;Some,&nbsp;as&nbsp;noted&nbsp;before,&nbsp;<BR>
in&nbsp;that&nbsp;object&nbsp;so&nbsp;you&nbsp;have&nbsp;a&nbsp;uniquely&nbsp;configured&nbsp;monster&nbsp;object.&nbsp;&nbsp;The&nbsp;<BR>
last&nbsp;act&nbsp;in&nbsp;native&nbsp;muds&nbsp;is&nbsp;to&nbsp;call&nbsp;move()&nbsp;in&nbsp;the&nbsp;monster&nbsp;object&nbsp;to&nbsp;move&nbsp;<BR>
it&nbsp;to&nbsp;this&nbsp;room&nbsp;(this_object()).&nbsp;&nbsp;In&nbsp;compat&nbsp;muds,&nbsp;you&nbsp;call&nbsp;the&nbsp;efun&nbsp;<BR>
move_object()&nbsp;which&nbsp;takes&nbsp;two&nbsp;parameters,&nbsp;the&nbsp;object&nbsp;to&nbsp;be&nbsp;moved,&nbsp;and&nbsp;the&nbsp;<BR>
object&nbsp;into&nbsp;which&nbsp;it&nbsp;is&nbsp;being&nbsp;moved.&nbsp;<BR>
&nbsp;&nbsp;<BR>
8.7&nbsp;Chapter&nbsp;summary&nbsp;<BR>
At&nbsp;this&nbsp;point,&nbsp;you&nbsp;now&nbsp;have&nbsp;enough&nbsp;knowledge&nbsp;to&nbsp;code&nbsp;some&nbsp;really&nbsp;nice&nbsp;<BR>
stuff.&nbsp;&nbsp;Of&nbsp;course,&nbsp;as&nbsp;I&nbsp;have&nbsp;been&nbsp;stressing&nbsp;all&nbsp;along,&nbsp;you&nbsp;really&nbsp;need&nbsp;<BR>
to&nbsp;read&nbsp;the&nbsp;documents&nbsp;on&nbsp;building&nbsp;for&nbsp;your&nbsp;mud,&nbsp;as&nbsp;they&nbsp;detail&nbsp;which&nbsp;<BR>
functions&nbsp;exist&nbsp;in&nbsp;which&nbsp;types&nbsp;of&nbsp;objects&nbsp;for&nbsp;you&nbsp;to&nbsp;call.&nbsp;&nbsp;No&nbsp;matter&nbsp;<BR>
what&nbsp;your&nbsp;knowledge&nbsp;of&nbsp;the&nbsp;mudlib&nbsp;is,&nbsp;you&nbsp;have&nbsp;enough&nbsp;know-how&nbsp;to&nbsp;<BR>
give&nbsp;a&nbsp;player&nbsp;extra&nbsp;things&nbsp;to&nbsp;do&nbsp;like&nbsp;sniffing&nbsp;flowers&nbsp;or&nbsp;glue&nbsp;or&nbsp;whatever.&nbsp;<BR>
At&nbsp;this&nbsp;point&nbsp;you&nbsp;should&nbsp;get&nbsp;busy&nbsp;coding&nbsp;stuff.&nbsp;&nbsp;But&nbsp;the&nbsp;moment&nbsp;things&nbsp;<BR>
even&nbsp;look&nbsp;to&nbsp;become&nbsp;tedious,&nbsp;that&nbsp;means&nbsp;it&nbsp;is&nbsp;time&nbsp;for&nbsp;you&nbsp;to&nbsp;move&nbsp;to&nbsp;<BR>
the&nbsp;next&nbsp;level&nbsp;and&nbsp;do&nbsp;more.&nbsp;&nbsp;Right&nbsp;now&nbsp;code&nbsp;yourself&nbsp;a&nbsp;small&nbsp;area.&nbsp;<BR>
Make&nbsp;extensive&nbsp;use&nbsp;of&nbsp;the&nbsp;special&nbsp;functions&nbsp;coded&nbsp;in&nbsp;your&nbsp;mud's&nbsp;<BR>
room.c&nbsp;(search&nbsp;the&nbsp;docs&nbsp;for&nbsp;obscure&nbsp;ones&nbsp;no&nbsp;one&nbsp;else&nbsp;seems&nbsp;to&nbsp;use).&nbsp;<BR>
Add&nbsp;lots&nbsp;o'&nbsp;neat&nbsp;actions.&nbsp;&nbsp;Create&nbsp;weapons&nbsp;which&nbsp;have&nbsp;magic&nbsp;powers&nbsp;which&nbsp;<BR>
gradually&nbsp;fade&nbsp;away.&nbsp;&nbsp;All&nbsp;of&nbsp;this&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;now.&nbsp;&nbsp;Once&nbsp;<BR>
this&nbsp;becomes&nbsp;routine&nbsp;for&nbsp;you,&nbsp;it&nbsp;will&nbsp;be&nbsp;time&nbsp;to&nbsp;move&nbsp;on&nbsp;to&nbsp;intermediate&nbsp;<BR>
stuff.&nbsp;&nbsp;Note&nbsp;that&nbsp;few&nbsp;people&nbsp;actually&nbsp;get&nbsp;to&nbsp;the&nbsp;intermediate&nbsp;stuff.&nbsp;<BR>
If&nbsp;you&nbsp;have&nbsp;played&nbsp;at&nbsp;all,&nbsp;you&nbsp;notice&nbsp;there&nbsp;are&nbsp;few&nbsp;areas&nbsp;on&nbsp;the&nbsp;mud&nbsp;<BR>
which&nbsp;do&nbsp;what&nbsp;I&nbsp;just&nbsp;told&nbsp;you&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;do.&nbsp;&nbsp;It&nbsp;is&nbsp;not&nbsp;<BR>
because&nbsp;it&nbsp;is&nbsp;hard,&nbsp;but&nbsp;because&nbsp;there&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;arrogance&nbsp;out&nbsp;there&nbsp;<BR>
on&nbsp;the&nbsp;part&nbsp;of&nbsp;people&nbsp;who&nbsp;have&nbsp;gotten&nbsp;beyond&nbsp;this&nbsp;point,&nbsp;and&nbsp;very&nbsp;little&nbsp;<BR>
communicating&nbsp;of&nbsp;that&nbsp;knowledge.&nbsp;&nbsp;The&nbsp;trick&nbsp;is&nbsp;to&nbsp;push&nbsp;yourself&nbsp;and&nbsp;<BR>
think&nbsp;of&nbsp;something&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;that&nbsp;is&nbsp;impossible.&nbsp;&nbsp;If&nbsp;you&nbsp;ask&nbsp;someone&nbsp;<BR>
in&nbsp;the&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;X,&nbsp;and&nbsp;they&nbsp;say&nbsp;that&nbsp;is&nbsp;impossible,&nbsp;find&nbsp;out&nbsp;<BR>
youself&nbsp;how&nbsp;to&nbsp;code&nbsp;it&nbsp;by&nbsp;experimenting.&nbsp;<BR>
&nbsp;<BR>
George&nbsp;Reese&nbsp;<BR>
Descartes&nbsp;of&nbsp;Borg&nbsp;<BR>
12&nbsp;july&nbsp;1993&nbsp;<BR>
<A HREF="mailto:borg@hebron.connected.com">borg@hebron.connected.com</A>&nbsp;<BR>
Descartes@Nightmare&nbsp;(intermud)&nbsp;<BR>
Descartes@Igor&nbsp;(not&nbsp;intermud)&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
小樓一夜聽秋雨&nbsp;<BR>
--&nbsp;<BR>
佇倚危樓風細細&nbsp;望極春愁&nbsp;黯黯生天際&nbsp;&nbsp;草色煙光殘照裡&nbsp;無言誰會憑欄意[0&nbsp;<BR>
擬把疏狂圖一醉&nbsp;對酒當歌&nbsp;強樂還無味&nbsp;&nbsp;衣帶漸寬終不悔&nbsp;為伊消得人憔悴&nbsp;<BR>
&nbsp;<BR>
※&nbsp;來源:•BBS&nbsp;水木清華站&nbsp;bbs.net.tsinghua.edu.cn•[FROM:&nbsp;166.111.5.25]&nbsp;<BR>
<A HREF="00000008.htm">上一篇</A>
<A HREF='javascript:history.go(-1)'>返回上一頁</A>
<A HREF="index.htm">回到目錄</A>
<A HREF="#top">回到頁首</A>
<A HREF="00000010.htm">下一篇</A>
</H1></CENTER>
<CENTER><H1>BBS水木清華站︰精華區</H1></CENTER>
</BODY></HTML>