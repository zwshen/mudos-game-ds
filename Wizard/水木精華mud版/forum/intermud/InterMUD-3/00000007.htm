<HTML>
<HEAD>
<TITLE>BBSË®Ä¾Çå»ªÕ¾¡Ã¾«»ªÇø</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBSË®Ä¾Çå»ªÕ¾¡Ã¾«»ªÇø</H1></CENTER>
<A Name="top"></a>
·¢ÐÅÈË:&nbsp;Qyz&nbsp;(åÒÑ²..ÔÚÒ¹°ë¿Õ¿õµÄÐ£Ô°),&nbsp;ÐÅÇø:&nbsp;Mud_Builder&nbsp;<BR>
±ê&nbsp;&nbsp;Ìâ:&nbsp;¹ØÓÚInterMUD-3(8)&nbsp;<BR>
·¢ÐÅÕ¾:&nbsp;BBS&nbsp;Ë®Ä¾Çå»ªÕ¾&nbsp;(Sun&nbsp;Jan&nbsp;11&nbsp;21:29:11&nbsp;1998)&nbsp;<BR>
&nbsp;<BR>
Service:&nbsp;file&nbsp;<BR>
&nbsp;<BR>
###&nbsp;work&nbsp;to&nbsp;do&nbsp;here...&nbsp;this&nbsp;is&nbsp;an&nbsp;OOB&nbsp;service,&nbsp;also&nbsp;<BR>
employing&nbsp;the&nbsp;auth&nbsp;service&nbsp;###&nbsp;<BR>
&nbsp;<BR>
###&nbsp;this&nbsp;service&nbsp;still&nbsp;in&nbsp;development&nbsp;###&nbsp;<BR>
&nbsp;<BR>
This&nbsp;service&nbsp;is&nbsp;used&nbsp;to&nbsp;transfer&nbsp;files&nbsp;between&nbsp;muds.&nbsp;Before&nbsp;<BR>
files&nbsp;may&nbsp;be&nbsp;transferred,&nbsp;a&nbsp;session&nbsp;token&nbsp;must&nbsp;be&nbsp;returned&nbsp;<BR>
from&nbsp;the&nbsp;remote&nbsp;mud&nbsp;using&nbsp;the&nbsp;login&nbsp;protocols.&nbsp;<BR>
&nbsp;<BR>
It&nbsp;will&nbsp;use&nbsp;the&nbsp;out-of-band&nbsp;TCP&nbsp;port&nbsp;and&nbsp;has&nbsp;the&nbsp;following&nbsp;<BR>
form:&nbsp;<BR>
To&nbsp;list&nbsp;the&nbsp;files&nbsp;on&nbsp;a&nbsp;remote&nbsp;mud,&nbsp;send&nbsp;the&nbsp;following&nbsp;<BR>
packet:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;file-list-req&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_username,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;dir,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Where&nbsp;dir&nbsp;is&nbsp;the&nbsp;directory&nbsp;to&nbsp;be&nbsp;listed.&nbsp;dir&nbsp;is&nbsp;considered&nbsp;<BR>
to&nbsp;be&nbsp;relative&nbsp;to&nbsp;a&nbsp;world&nbsp;read/write&nbsp;directory.&nbsp;Any&nbsp;leading&nbsp;<BR>
'/'&nbsp;is&nbsp;ignored.&nbsp;The&nbsp;response&nbsp;from&nbsp;the&nbsp;remote&nbsp;mud&nbsp;should&nbsp;be:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&nbsp;&quot;file-list-reply&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&nbsp;target_username,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mixed&nbsp;*)&nbsp;dir_list,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Where&nbsp;dir_list&nbsp;is&nbsp;an&nbsp;array&nbsp;containing&nbsp;an&nbsp;array&nbsp;of&nbsp;the&nbsp;<BR>
following&nbsp;format&nbsp;for&nbsp;each&nbsp;file&nbsp;in&nbsp;the&nbsp;reply&nbsp;list:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;fname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;fsize,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;ftime,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
To&nbsp;send&nbsp;a&nbsp;file&nbsp;to&nbsp;a&nbsp;remote&nbsp;mud,&nbsp;send&nbsp;the&nbsp;following&nbsp;packet:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;file-put&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_username,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;remote_fname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;contents,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Puts&nbsp;are&nbsp;acknoleged&nbsp;by&nbsp;the&nbsp;following&nbsp;packet&nbsp;:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;file-put-ack&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;success,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
To&nbsp;retrive&nbsp;a&nbsp;file&nbsp;from&nbsp;a&nbsp;remote&nbsp;mud,&nbsp;send&nbsp;the&nbsp;following&nbsp;<BR>
packet:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;file-get-req&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_username,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;remote_fname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
The&nbsp;remote&nbsp;mud&nbsp;should&nbsp;respond&nbsp;with&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;file-get-reply&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;success,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;contents,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Where&nbsp;success&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;following.&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-3&nbsp;&nbsp;:&nbsp;&nbsp;Request&nbsp;Failed&nbsp;(write&nbsp;permission)&nbsp;<BR>
•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-2&nbsp;&nbsp;:&nbsp;&nbsp;Request&nbsp;Failed&nbsp;(read&nbsp;&nbsp;permission)&nbsp;<BR>
•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1&nbsp;&nbsp;:&nbsp;&nbsp;Request&nbsp;Failed&nbsp;(fpath&nbsp;error)&nbsp;<BR>
•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;:&nbsp;&nbsp;Request&nbsp;Failed&nbsp;(unknown&nbsp;error)&nbsp;<BR>
•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;:&nbsp;&nbsp;Request&nbsp;successful&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
The&nbsp;file&nbsp;should&nbsp;only&nbsp;be&nbsp;transfered&nbsp;from&nbsp;a&nbsp;world&nbsp;writeable&nbsp;<BR>
directory&nbsp;on&nbsp;one&nbsp;mud&nbsp;to&nbsp;a&nbsp;world&nbsp;writable&nbsp;directory&nbsp;on&nbsp;<BR>
another.&nbsp;<BR>
remote_fname&nbsp;is&nbsp;relative&nbsp;to&nbsp;the&nbsp;same&nbsp;directory&nbsp;as&nbsp;<BR>
file-list-*&nbsp;and&nbsp;any&nbsp;leading&nbsp;'/'&nbsp;is&nbsp;ignored.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;size&nbsp;of&nbsp;the&nbsp;file&nbsp;capable&nbsp;of&nbsp;being&nbsp;sent&nbsp;in&nbsp;this&nbsp;manner&nbsp;is&nbsp;<BR>
limited&nbsp;by&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;maximum&nbsp;string&nbsp;length&nbsp;on&nbsp;both&nbsp;the&nbsp;<BR>
sending&nbsp;and&nbsp;receiving&nbsp;muds.&nbsp;<BR>
&nbsp;<BR>
An&nbsp;error&nbsp;response&nbsp;should&nbsp;be&nbsp;returned&nbsp;over&nbsp;the&nbsp;OOB&nbsp;network.&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Service:&nbsp;auth&nbsp;<BR>
&nbsp;<BR>
The&nbsp;auth&nbsp;service&nbsp;is&nbsp;used&nbsp;for&nbsp;performing&nbsp;authentication&nbsp;of&nbsp;a&nbsp;<BR>
mud.&nbsp;This&nbsp;authentication&nbsp;is&nbsp;used&nbsp;for&nbsp;OOB&nbsp;communications&nbsp;<BR>
since&nbsp;in-band&nbsp;communication&nbsp;is&nbsp;always&nbsp;authenticated&nbsp;at&nbsp;a&nbsp;<BR>
mud-level.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;authentication&nbsp;is&nbsp;used&nbsp;to&nbsp;verify&nbsp;that&nbsp;an&nbsp;incoming&nbsp;OOB&nbsp;<BR>
connection&nbsp;request&nbsp;is&nbsp;actually&nbsp;from&nbsp;the&nbsp;mud&nbsp;that&nbsp;the&nbsp;request&nbsp;<BR>
says&nbsp;it&nbsp;is&nbsp;from.&nbsp;Before&nbsp;the&nbsp;OOB&nbsp;connection&nbsp;is&nbsp;made,&nbsp;the&nbsp;<BR>
originator&nbsp;sends&nbsp;the&nbsp;following&nbsp;packet&nbsp;(over&nbsp;the&nbsp;in-band&nbsp;<BR>
network)&nbsp;to&nbsp;the&nbsp;target&nbsp;mud:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;auth-mud-req&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;5,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;0,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;target_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;0&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
The&nbsp;target&nbsp;mud&nbsp;generates&nbsp;a&nbsp;unique&nbsp;integer&nbsp;key,&nbsp;associates&nbsp;<BR>
that&nbsp;with&nbsp;the&nbsp;originating&nbsp;mud&nbsp;with&nbsp;the&nbsp;key,&nbsp;and&nbsp;then&nbsp;returns&nbsp;<BR>
the&nbsp;key&nbsp;(over&nbsp;the&nbsp;in-band&nbsp;network)&nbsp;to&nbsp;the&nbsp;originator&nbsp;with:&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;&quot;auth-mud-reply&quot;,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;5,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;originator_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;0,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;target_mudname,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string)&nbsp;0,&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;session_key&nbsp;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;})&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
At&nbsp;this&nbsp;point,&nbsp;the&nbsp;originator&nbsp;may&nbsp;contact&nbsp;the&nbsp;target&nbsp;mud&nbsp;<BR>
through&nbsp;the&nbsp;OOB&nbsp;port,&nbsp;using&nbsp;the&nbsp;session_key&nbsp;to&nbsp;authenticate&nbsp;<BR>
that&nbsp;it&nbsp;actually&nbsp;is&nbsp;the&nbsp;purported&nbsp;originator.&nbsp;<BR>
&nbsp;<BR>
It&nbsp;is&nbsp;possible,&nbsp;and&nbsp;should&nbsp;be&nbsp;accounted&nbsp;for,&nbsp;that&nbsp;a&nbsp;<BR>
particular&nbsp;originator&nbsp;might&nbsp;issue&nbsp;multiple&nbsp;auth-mud-req&nbsp;<BR>
packets&nbsp;before&nbsp;establishing&nbsp;an&nbsp;OOB&nbsp;session&nbsp;to&nbsp;the&nbsp;target&nbsp;<BR>
mud.&nbsp;Only&nbsp;the&nbsp;last&nbsp;request&nbsp;and&nbsp;session_key&nbsp;need&nbsp;to&nbsp;be&nbsp;<BR>
remembered.&nbsp;The&nbsp;keys&nbsp;from&nbsp;prior&nbsp;requests&nbsp;may&nbsp;be&nbsp;discarded&nbsp;<BR>
and&nbsp;connection&nbsp;attempts&nbsp;using&nbsp;them&nbsp;may&nbsp;be&nbsp;rejected.&nbsp;<BR>
&nbsp;<BR>
Session&nbsp;keys&nbsp;must&nbsp;remain&nbsp;valid&nbsp;for&nbsp;10&nbsp;minutes&nbsp;from&nbsp;receipt&nbsp;<BR>
of&nbsp;the&nbsp;auth-mud-req&nbsp;packet.&nbsp;After&nbsp;that&nbsp;point,&nbsp;the&nbsp;target&nbsp;mud&nbsp;<BR>
may&nbsp;discard&nbsp;the&nbsp;key&nbsp;and&nbsp;reject&nbsp;connection&nbsp;attempts&nbsp;with&nbsp;that&nbsp;<BR>
key.&nbsp;After&nbsp;a&nbsp;successful&nbsp;OOB&nbsp;connection&nbsp;is&nbsp;made,&nbsp;the&nbsp;target&nbsp;<BR>
mud&nbsp;may&nbsp;discard&nbsp;the&nbsp;key&nbsp;(the&nbsp;key&nbsp;should&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;<BR>
one-time&nbsp;key).&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
´À´ÀÓû¶¯&nbsp;<BR>
&nbsp;<BR>
¡ù&nbsp;À´Ô´:¡¤BBS&nbsp;Ë®Ä¾Çå»ªÕ¾&nbsp;bbs.net.tsinghua.edu.cn¡¤[FROM:&nbsp;166.111.26.20]&nbsp;<BR>
<A HREF="00000006.htm">ÉÏÒ»Æª</A>
<A HREF='javascript:history.go(-1)'>·µ»ØÉÏÒ»Ò³</A>
<A HREF="index.htm">»Øµ½Ä¿Â¼</A>
<A HREF="#top">»Øµ½Ò³Ê×</A>
<A HREF="00000008.htm">ÏÂÒ»Æª</A>
</H1></CENTER>
<CENTER><H1>BBSË®Ä¾Çå»ªÕ¾¡Ã¾«»ªÇø</H1></CENTER>
</BODY></HTML>