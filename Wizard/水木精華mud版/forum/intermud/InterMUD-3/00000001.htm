<HTML>
<HEAD>
<TITLE>BBS水木清华站∶精华区</TITLE>
</HEAD>
<BODY>
<CENTER><H1>BBS水木清华站∶精华区</H1></CENTER>
<A Name="top"></a>
发信人:&nbsp;Qyz&nbsp;(逡巡..在夜半空旷的校园),&nbsp;信区:&nbsp;Mud_Builder&nbsp;<BR>
标&nbsp;&nbsp;题:&nbsp;关于InterMUD-3(2)&nbsp;<BR>
发信站:&nbsp;BBS&nbsp;水木清华站&nbsp;(Sun&nbsp;Jan&nbsp;11&nbsp;21:23:51&nbsp;1998)&nbsp;<BR>
&nbsp;<BR>
------------&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Logical&nbsp;Network&nbsp;Layout&nbsp;<BR>
&nbsp;<BR>
The&nbsp;logical&nbsp;network&nbsp;of&nbsp;muds&nbsp;is&nbsp;organized&nbsp;into&nbsp;a&nbsp;set&nbsp;of&nbsp;fully&nbsp;<BR>
connected&nbsp;routers&nbsp;each&nbsp;acting&nbsp;as&nbsp;a&nbsp;hub&nbsp;for&nbsp;an&nbsp;arbitrary&nbsp;set&nbsp;<BR>
of&nbsp;muds.&nbsp;<BR>
&nbsp;<BR>
A&nbsp;mud&nbsp;has&nbsp;a&nbsp;&quot;preferred&quot;&nbsp;router,&nbsp;but&nbsp;will&nbsp;be&nbsp;told&nbsp;and&nbsp;will&nbsp;<BR>
record&nbsp;information&nbsp;about&nbsp;all&nbsp;routers&nbsp;in&nbsp;existence&nbsp;(for&nbsp;<BR>
failover&nbsp;in&nbsp;case&nbsp;the&nbsp;preferred&nbsp;is&nbsp;down).&nbsp;A&nbsp;mud's&nbsp;preferred&nbsp;<BR>
router&nbsp;may&nbsp;be&nbsp;changed&nbsp;programatically&nbsp;to&nbsp;handle&nbsp;load&nbsp;<BR>
balancing&nbsp;among&nbsp;routers.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;routers&nbsp;open&nbsp;and&nbsp;maintain&nbsp;TCP&nbsp;sessions&nbsp;(using&nbsp;MudOS's&nbsp;<BR>
&quot;MUD&quot;&nbsp;mode)&nbsp;to&nbsp;each&nbsp;of&nbsp;the&nbsp;other&nbsp;routers&nbsp;(fully&nbsp;connected&nbsp;<BR>
network).&nbsp;Each&nbsp;router&nbsp;will&nbsp;hold&nbsp;a&nbsp;list&nbsp;of&nbsp;all&nbsp;muds&nbsp;within&nbsp;<BR>
the&nbsp;intermud&nbsp;and&nbsp;which&nbsp;router&nbsp;the&nbsp;mud&nbsp;is&nbsp;connected&nbsp;to.&nbsp;<BR>
&nbsp;<BR>
An&nbsp;active&nbsp;TCP&nbsp;session&nbsp;(in&nbsp;MUD&nbsp;mode)&nbsp;is&nbsp;maintained&nbsp;between&nbsp;<BR>
a&nbsp;mud&nbsp;and&nbsp;its&nbsp;router.&nbsp;The&nbsp;mud&nbsp;is&nbsp;responsibile&nbsp;for&nbsp;opening&nbsp;<BR>
(see&nbsp;the&nbsp;startup-req-2&nbsp;packet),&nbsp;maintaining,&nbsp;reconnecting,&nbsp;<BR>
and&nbsp;shutting&nbsp;down&nbsp;this&nbsp;session.&nbsp;A&nbsp;graceful&nbsp;exit&nbsp;will&nbsp;cause&nbsp;<BR>
the&nbsp;router&nbsp;to&nbsp;propogate&nbsp;information&nbsp;about&nbsp;the&nbsp;&quot;down&quot;&nbsp;state&nbsp;<BR>
of&nbsp;the&nbsp;mud&nbsp;to&nbsp;the&nbsp;other&nbsp;routers&nbsp;and&nbsp;muds&nbsp;on&nbsp;the&nbsp;intermud.&nbsp;<BR>
A&nbsp;dropped&nbsp;connection&nbsp;will&nbsp;wait&nbsp;5&nbsp;minutes&nbsp;before&nbsp;delivering&nbsp;<BR>
&quot;down&quot;&nbsp;state&nbsp;notification&nbsp;(this&nbsp;5&nbsp;minutes&nbsp;is&nbsp;provided&nbsp;for&nbsp;<BR>
the&nbsp;mud&nbsp;to&nbsp;reconnect).&nbsp;A&nbsp;mud&nbsp;is&nbsp;removed&nbsp;after&nbsp;7&nbsp;days&nbsp;of&nbsp;<BR>
being&nbsp;in&nbsp;the&nbsp;down&nbsp;state.&nbsp;<BR>
&nbsp;<BR>
The&nbsp;network&nbsp;of&nbsp;TCP&nbsp;sessions&nbsp;between&nbsp;the&nbsp;routers&nbsp;and&nbsp;muds&nbsp;<BR>
will&nbsp;be&nbsp;used&nbsp;for&nbsp;&quot;in&nbsp;band&quot;&nbsp;transmissions.&nbsp;The&nbsp;data&nbsp;carried&nbsp;<BR>
over&nbsp;these&nbsp;connections&nbsp;will&nbsp;be&nbsp;limited&nbsp;to&nbsp;&quot;fast&nbsp;response&quot;&nbsp;<BR>
messages.&nbsp;Some&nbsp;services&nbsp;will&nbsp;be&nbsp;carried&nbsp;off&nbsp;of&nbsp;this&nbsp;network&nbsp;<BR>
and&nbsp;are&nbsp;called&nbsp;&quot;out&nbsp;of&nbsp;band&quot;&nbsp;(OOB)&nbsp;transmissions.&nbsp;<BR>
&nbsp;<BR>
Each&nbsp;mud&nbsp;will&nbsp;listen&nbsp;at&nbsp;a&nbsp;TCP&nbsp;port&nbsp;for&nbsp;incoming&nbsp;connections&nbsp;<BR>
for&nbsp;processing&nbsp;OOB&nbsp;transmissions.&nbsp;At&nbsp;the&nbsp;moment,&nbsp;the&nbsp;<BR>
services&nbsp;<BR>
that&nbsp;use&nbsp;the&nbsp;OOB&nbsp;transmissions&nbsp;are&nbsp;mail,&nbsp;news,&nbsp;and&nbsp;file&nbsp;<BR>
transfers.&nbsp;Connections&nbsp;will&nbsp;be&nbsp;opened&nbsp;as&nbsp;needed&nbsp;and&nbsp;closed&nbsp;<BR>
when&nbsp;the&nbsp;transmission&nbsp;completes.&nbsp;<BR>
&nbsp;<BR>
Lastly,&nbsp;each&nbsp;mud&nbsp;may&nbsp;maintain&nbsp;a&nbsp;UDP&nbsp;port&nbsp;for&nbsp;some&nbsp;specific&nbsp;<BR>
OOB&nbsp;transmissions.&nbsp;At&nbsp;the&nbsp;moment,&nbsp;though,&nbsp;there&nbsp;are&nbsp;no&nbsp;<BR>
UDP-based&nbsp;OOB&nbsp;services,&nbsp;so&nbsp;this&nbsp;port&nbsp;is&nbsp;typically&nbsp;not&nbsp;<BR>
opened.&nbsp;<BR>
&nbsp;<BR>
MUD&nbsp;Naming&nbsp;<BR>
&nbsp;<BR>
For&nbsp;proper&nbsp;identification&nbsp;within&nbsp;the&nbsp;Intermud&nbsp;network,&nbsp;muds&nbsp;<BR>
must&nbsp;use&nbsp;a&nbsp;canonical&nbsp;naming&nbsp;system.&nbsp;The&nbsp;canonical&nbsp;name&nbsp;is&nbsp;<BR>
defined&nbsp;to&nbsp;be&nbsp;the&nbsp;mud's&nbsp;actual&nbsp;name&nbsp;(properly&nbsp;capitalized,&nbsp;<BR>
with&nbsp;spaces,&nbsp;etc).&nbsp;Examples:&nbsp;Quendor,&nbsp;Idea&nbsp;Exchange.&nbsp;These&nbsp;<BR>
names&nbsp;will&nbsp;be&nbsp;used&nbsp;in&nbsp;the&nbsp;mudlist&nbsp;and&nbsp;in&nbsp;all&nbsp;packet&nbsp;routing.&nbsp;<BR>
The&nbsp;case&nbsp;is&nbsp;significant,&nbsp;although&nbsp;the&nbsp;routers&nbsp;may&nbsp;(?)&nbsp;<BR>
disallow&nbsp;two&nbsp;muds&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;but&nbsp;with&nbsp;different&nbsp;<BR>
casing.&nbsp;<BR>
&nbsp;<BR>
Routers&nbsp;will&nbsp;have&nbsp;names&nbsp;assigned&nbsp;to&nbsp;them;&nbsp;there&nbsp;are&nbsp;a&nbsp;few&nbsp;<BR>
cases&nbsp;where&nbsp;a&nbsp;router&nbsp;must&nbsp;be&nbsp;referenced.&nbsp;routers&nbsp;will&nbsp;be&nbsp;<BR>
distinguished&nbsp;from&nbsp;muds&nbsp;with&nbsp;a&nbsp;leading&nbsp;asterisk&nbsp;(such&nbsp;as&nbsp;<BR>
*nightmare).&nbsp;Muds&nbsp;may&nbsp;not&nbsp;define&nbsp;a&nbsp;name&nbsp;with&nbsp;a&nbsp;leading&nbsp;<BR>
asterisk&nbsp;if&nbsp;they&nbsp;wish&nbsp;to&nbsp;be&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;Intermud.&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
-----------------------------------------------------------&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
Packet&nbsp;Format&nbsp;<BR>
&nbsp;<BR>
Transmissions&nbsp;are&nbsp;LPC&nbsp;arrays&nbsp;with&nbsp;a&nbsp;predefined&nbsp;set&nbsp;of&nbsp;six&nbsp;<BR>
initial&nbsp;elements:&nbsp;({&nbsp;type,&nbsp;ttl,&nbsp;originator&nbsp;mudname,&nbsp;<BR>
originator&nbsp;username,&nbsp;target&nbsp;mudname,&nbsp;target&nbsp;username,&nbsp;...&nbsp;<BR>
}).&nbsp;<BR>
&nbsp;<BR>
type&nbsp;describes&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;packet.&nbsp;See&nbsp;Packet&nbsp;Types&nbsp;for&nbsp;<BR>
a&nbsp;summary&nbsp;of&nbsp;the&nbsp;packet&nbsp;types&nbsp;used&nbsp;in&nbsp;this&nbsp;protocol.&nbsp;<BR>
&nbsp;<BR>
ttl&nbsp;is&nbsp;the&nbsp;packet's&nbsp;Time&nbsp;To&nbsp;Live&nbsp;(TTL).&nbsp;This&nbsp;is&nbsp;similar&nbsp;to&nbsp;<BR>
an&nbsp;IP&nbsp;packet's&nbsp;TTL&nbsp;-&nbsp;it&nbsp;specifies&nbsp;the&nbsp;number&nbsp;of&nbsp;hops&nbsp;left&nbsp;<BR>
to&nbsp;a&nbsp;packet.&nbsp;This&nbsp;may&nbsp;not&nbsp;be&nbsp;absolutely&nbsp;necessary,&nbsp;but&nbsp;<BR>
provides&nbsp;a&nbsp;mechanism&nbsp;to&nbsp;handle&nbsp;the&nbsp;case&nbsp;where&nbsp;the&nbsp;routers&nbsp;<BR>
mis-route&nbsp;a&nbsp;packet&nbsp;into&nbsp;an&nbsp;endless&nbsp;loop.&nbsp;Eventually,&nbsp;it&nbsp;will&nbsp;<BR>
time&nbsp;out&nbsp;and&nbsp;be&nbsp;removed&nbsp;from&nbsp;the&nbsp;network.&nbsp;<BR>
&nbsp;<BR>
originator&nbsp;mudname&nbsp;is&nbsp;used&nbsp;to&nbsp;indicate&nbsp;the&nbsp;mud&nbsp;where&nbsp;the&nbsp;<BR>
packet&nbsp;originated.&nbsp;If&nbsp;the&nbsp;packet&nbsp;cannot&nbsp;be&nbsp;delivered&nbsp;for&nbsp;<BR>
some&nbsp;reason,&nbsp;this&nbsp;mud&nbsp;will&nbsp;be&nbsp;notified,&nbsp;if&nbsp;possible.&nbsp;<BR>
&nbsp;<BR>
originator&nbsp;username&nbsp;is&nbsp;used&nbsp;to&nbsp;indicate&nbsp;the&nbsp;user&nbsp;that&nbsp;<BR>
triggered&nbsp;the&nbsp;delivery&nbsp;of&nbsp;the&nbsp;packet.&nbsp;If&nbsp;the&nbsp;mud&nbsp;itself&nbsp;sent&nbsp;<BR>
&nbsp;the&nbsp;packet&nbsp;(e.g.&nbsp;mail&nbsp;delivery&nbsp;or&nbsp;shutdown&nbsp;notification),&nbsp;<BR>
then&nbsp;the&nbsp;username&nbsp;will&nbsp;be&nbsp;0.&nbsp;The&nbsp;username&nbsp;should&nbsp;be&nbsp;in&nbsp;<BR>
lower-case.&nbsp;<BR>
&nbsp;<BR>
target&nbsp;mudname&nbsp;is&nbsp;used&nbsp;to&nbsp;route&nbsp;the&nbsp;packet&nbsp;to&nbsp;the&nbsp;<BR>
appropriate&nbsp;<BR>
destination&nbsp;mud.&nbsp;Zero&nbsp;is&nbsp;used&nbsp;to&nbsp;indicate&nbsp;broadcast&nbsp;packets.&nbsp;<BR>
&nbsp;<BR>
target&nbsp;username&nbsp;is&nbsp;used&nbsp;to&nbsp;route&nbsp;the&nbsp;packet&nbsp;to&nbsp;a&nbsp;particular&nbsp;<BR>
user&nbsp;on&nbsp;a&nbsp;remote&nbsp;mud.&nbsp;The&nbsp;username&nbsp;may&nbsp;be&nbsp;0&nbsp;if&nbsp;the&nbsp;packet&nbsp;is&nbsp;<BR>
targeted&nbsp;for&nbsp;the&nbsp;mud&nbsp;itself&nbsp;rather&nbsp;than&nbsp;a&nbsp;specific&nbsp;user.&nbsp;<BR>
This&nbsp;<BR>
should&nbsp;always&nbsp;be&nbsp;in&nbsp;lower-case.&nbsp;The&nbsp;target&nbsp;mud&nbsp;will&nbsp;attempt&nbsp;<BR>
to&nbsp;find&nbsp;the&nbsp;user&nbsp;with&nbsp;whatever&nbsp;appropriate&nbsp;means.&nbsp;<BR>
&nbsp;<BR>
Many&nbsp;packets&nbsp;will&nbsp;specify&nbsp;a&nbsp;visname.&nbsp;This&nbsp;is&nbsp;a&nbsp;user's&nbsp;<BR>
&quot;visible&quot;&nbsp;name&nbsp;-&nbsp;the&nbsp;name&nbsp;which&nbsp;should&nbsp;be&nbsp;displayed&nbsp;to&nbsp;other&nbsp;<BR>
&nbsp;users.&nbsp;Typically,&nbsp;this&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;username&nbsp;with&nbsp;<BR>
altered&nbsp;capitalization,&nbsp;but&nbsp;may&nbsp;actually&nbsp;be&nbsp;quite&nbsp;arbitrary&nbsp;<BR>
with&nbsp;respect&nbsp;to&nbsp;the&nbsp;username.&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
------------------------------------------------------------&nbsp;<BR>
&nbsp;<BR>
&nbsp;<BR>
--&nbsp;<BR>
蠢蠢欲动&nbsp;<BR>
&nbsp;<BR>
※&nbsp;来源:・BBS&nbsp;水木清华站&nbsp;bbs.net.tsinghua.edu.cn・[FROM:&nbsp;166.111.26.20]&nbsp;<BR>
<A HREF="00000000.htm">上一篇</A>
<A HREF='javascript:history.go(-1)'>返回上一页</A>
<A HREF="index.htm">回到目录</A>
<A HREF="#top">回到页首</A>
<A HREF="00000002.htm">下一篇</A>
</H1></CENTER>
<CENTER><H1>BBS水木清华站∶精华区</H1></CENTER>
</BODY></HTML>