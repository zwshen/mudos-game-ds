
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>网虫乐园--泥潭风云</TITLE>
<META content="MSHTML 5.00.2919.6307" name=GENERATOR>
<META content=TLT name=Author>
<META content=text/html;charset=gb2312 http-equiv=content-type>
<style>
<!--      
A:link {text-decoration: none;color:blue}       
.105V         {font-size: 10.5pt; font-family: 宋体;}
TD          {font-size: 9pt; font-family: 宋体;}
.90V         {font-size: 9pt; font-family: 宋体;}
.90VE         {font-size: 9pt; font-family: arial;}
A:hover      {text-decoration: none;color:red;}
A:visited  {text-decoration: none;}
A:active     {text-decoration: none;color:#ff0000}
-->
</style>


<script>
<!--
lstart=50
loop=true
speed=350 
pr_step=5 

function makeObj(obj,nest){
nest=(!nest) ? '':'document.'+nest+'.'
this.css=(document.layers) ? eval(nest+'document.'+obj):eval(obj+'.style')
    this.scrollHeight=document.layers?this.css.document.height:eval(obj+'.offsetHeight')
    this.up=goUp
this.obj = obj + "Object"
eval(this.obj + "=this")
return this
}
function goUp(speed){
    if(parseInt(this.css.top)>-this.scrollHeight){
        this.css.top=parseInt(this.css.top)-pr_step
        setTimeout(this.obj+".up("+speed+")",speed)
    }else if(loop) {
        this.css.top=lstart
        eval(this.obj+".up("+speed+")")
    }
}
function slideInit(){
    oSlide=makeObj('divNews','divCont')
    oSlide.css.top=lstart
    oSlide.up(speed)
}
onload=slideInit
//-->
</script></head>

<body aLink="#660033" bgColor="#ffffff" leftMargin="0" text=darkgreen link="#000066" vLink="#000066"
topMargin="0" >
<div align="center"><center>
   <table border="1" width="776" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/home.gif width=15 height=15><a href=http://202.114.98.14/>网虫乐园首页</a></td> 
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/soft.gif height=15 width=15 border=0><a href="http://202.114.98.12/softroom/">软件大观园</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/mud.gif height=15 width=15 border=0><a href="http://202.114.98.14/mud/">泥潭风云</font></a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/freeweb.gif height=15 width=15 border=0><a href="http://202.114.98.14/freeweb/">个人主页空间</a></td>  
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/bbs.gif height=15 width=15 border=0><a href=http://202.114.98.14/bbs/>网虫社区</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/webresource.gif height=15 width=15 border=0><a href="http://202.114.98.14/webresource/">Web资源角</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/show.gif height=15 width=15 border=0><a href="#" onclick="window.open('http://202.114.98.14/show/','','menubar=no,toolbar=no,location=no,directories=no,status=no,resizable=1,scrollbars=1,width=800,height=600,top=0,left=0');">秀网珍藏</a></td>
        <td align="center" width="97"><P align=center><img src=http://202.114.98.14/images/links1.gif height=15 width=15 border=0><a href=http://202.114.98.14/links/>友情链接</a></td>
      </tr>
    </table></center>

<table bgcolor=white width=770 border=1 borderColor=#ffffff borderColorLight=#ab9c36   cellpadding=0 cellspacing=0>
   <tr><td><table bgcolor=white width=770 border=0 cellpadding=0 cellspacing=0>
   <tr><td width=180 height=60><img src=http://202.114.98.14/images/netbugs1.gif width=180 height=60></td>
   <td align=center width=468 valign=center  bgcolor=white><script src="http://202.114.98.14/ad1.js" width=468 height=60 border=0></script></td>
   <td width=112 bgcolor=white><div id="divCont"
style="position:absolute; width:110; height:60; top:25; left:660; clip:rect(0,110,60,0)"><div
id="divNews" style="position:absolute; top:0; left:0">

<p>欢迎光临网虫乐园！<a href=http://202.114.98.14/>首页</a>有网站各子站最新变动介绍和
教育网酷站连接。<p><a href=http://202.114.98.12/softroom/>软件大观园</a>每日更新；收藏3G软件，均为最新版本。
<p><a href=http://202.114.98.14/mud>泥潭风云</a>是教育网内最大的mud站点；<a href=http://202.114.98.14/webresource>Web资源角</a>有三千多动画和背景为你网页增添色彩。
<p><a href=http://202.114.98.14/freeweb/>10M免费个人主页空间</a>，ftp维护；申请三日内批准。<p><a href=http://202.114.98.14/show>秀网珍藏</a>图片近2G，栏目众多，包罗万象，每日都有大量图片增加。
<p>对我们网站的建设的建议欢迎<a href=mailto:softroom@wuhee.edu.cn>来信</a>或写在<a href=http://202.114.98.14/bbs>社区</a>内。</p>
</div></div>
</td>
   </tr>
   </table>
</td></tr></table>

<center>
   <table border="1" width="770" borderColor=#ffffff borderColorLight=#ab9c36  align="center" bgColor=#f0f3dc cellPadding=0 cellSpacing=0 >
      <tr>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/index.htm">首页</A></td> 
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/newcomer/">泥巴入门</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/player/">泥巴进阶</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/source/">泥巴资源</A></td>  
        <td align="center" width="96"><P align=center><A 
        href="http://202.114.98.14/mud/pmud/">图形泥巴</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/mudlife/">泥巴人生</A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/wiz/">巫师乐园</FONT></A></td>
        <td align="center" width="96"><P align=center><A href="http://202.114.98.14/mud/download/">软件下载</A>            <SCRIPT>
   document.write("<a href=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Basic&id=2138&ReferID=2138 target=_blank>");
   document.write("<img src=http://webpub.au.tsinghua.edu.cn/count/count.dll?Type=Img2&add=1&id=2138&refer="+escape(top.document.referrer)+" border=0 alt=酷站今日访问 width=12 height=12>");
   </SCRIPT></td>

      </tr>
    </table></center>
    


<table border="0" width="100%" style="color: rgb(255,255,0)" cellspacing="0" cellpadding="0">
  <tr>
    <td width="8%" rowspan="4"></td>
    <td width="83%"><p align="center"><font color="#000000">LPC语言<br>
    ―――――――――――――――――――――<br>
    <font size="2">综合地介绍MUD编程语言（LPC）<br>
    ―――――――――――――――――――――――――</font></font></td>
    <td width="9%" rowspan="4"></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><font color="#000000">LPC语言精讲（8）</td>
  </tr>
  <tr>
    <td width="83%"><font color="#000000">第四章 Lpc的继承简介<br>
    第一节 前言<br>
    通过上一章的阅读，你应该知道Lpc的函数的基本工作方式。你应该学会如何声明和调用函数。更进一步，你应该有能力自己写函数定义，即使你是首次接触Lpc。你知道了函数调用是如何执行的，函数必须有一个返回值，除非是 
    void 类型的。<br>
    下面我们来看一个例子。看看巫师的工作室，可能几乎都有类似下面的一段代码。(这个不同的 
    MudLib 是不一样的)<br>
    -----<br>
    void create();<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    room::create();<br>
    set( &quot;short&quot;, &quot;巫师工作室&quot;);<br>
    set( &quot;long&quot;, &quot;这是一片未曾开垦的土地，需要巫师的画笔去描绘。\n&quot; 
    );<br>
    set( &quot;exits&quot;, ([<br>
    &quot;trill&quot; : &quot;/u/trill/workroom&quot;,<br>
    ]);<br>
    create_door(&quot;south&quot;, &quot;时空之门&quot;, &quot;north&quot;, 0);<br>
    setup();<br>
    }<br>
    -----<br>
    如果你理解了前面的几章，你应该能立刻指出几点：<br>
    1) create() 是一个函数的定义部分。&quot;void create();&quot; 
    是它的函数声明，却有在 create() 里面有个 room::create() 没有声明。2) 
    它调用了set(), create_door(), setup()，在代码中却没有声明。3) 
    在第三行，既不是变量声明也不是函数声明，更不是函数定义。<br>
    这一章就是回答以下问题的：<br>
    1) room::create()是什么东西？<br>
    2) 函数 set()，create_door()，在哪里声明、哪里定义？<br>
    3) 第三行是什么东西？<br>
    第二节 面对对象编程(OOP)的继承<br>
    继承是面对对象编程的一个基本特性。它使你能写一些基本的代码能以不同的方式被不同的程序使用。一个 
    MudLib 做的就是创建一些基本的 Object 
    ，在此基础上你能用他们创建自己特殊的 Object。如果不得不写那些定义巫师工作室所必须的所有代码，你可能要写超过 
    1000 行的代码，这样你才可能有这个 room 
    所需要的所有函数。如果每个 room 
    都必须这么做的话，首先是浪费硬盘空间；其次，你写的代码可能根本无法和别人的写的代码组合在一起，每个人对 
    room 扩展的特性的各种函数搞出每个人自己的标准。比如，你可能把 
    room 的长描述的接口函数叫做 GetLong()，别的巫师可能喜欢把它命名为query_long()。这个就是各个 
    MudLib 不兼容的根本问题，因为它们 Object 
    相互继承、调用上使用不同的协议。OOP 
    能克服上面的问题。在上面的例子中，你直接使用的函数都定义在继承的叫做 
    &quot;/std/room.c&quot; 的 Object 里面了。它有所有那些 room 
    常用的函数的定义。当你写创建一个特别的 room，你通过继承得到 
    room的的基本的功能，通过加入你自己写的函数，这样就把它变成了一个独特的 
    room 了。<br>
    OOP 
    通过继承不只是提高了代码的可重用性，而且它可以是你只关心继承基本的 
    Object 
    后，那些特性需要改变的，而不用考虑那些东西是需要的，就是说当你看到别人写好的 
    Object 
    时，发现已经很象你心中所想的东西，就只有一点点不符合，那你所要做只是继承原先的 
    Object，然后加入和想的那一点点不同的东西就可以了。OOP 
    当然不只是继承，还有别的一些。但是对于我们现在是谈论继承的最基本的概念。<br>
    第三节 继承是如何工作的？<br>
    还记得最开始提的三个问题吗？在这一节里面，将解答这些问题。首先最后一个问题：<br>
    例子中的第三行：<br>
    -----<br>
    inherit &quot;/std/room&quot;;<br>
    -----<br>
    是做什么？我想到了现在，你应该你猜出来这一行确保你写的巫师工作室继承了标准的 
    room: &quot;/std/room.c&quot; 的特性。通过继承获得标准 room 
    的功能，你就可以使用那些已经在&quot;/std/room.c&quot; 
    底下声明和定义好的所有函数。这就是为什么你可以直接使用 set(), 
    create_door() 这些函数的原因了。在你自己写的函数 create()，你只要设置那些你要的值就可以了。这些值使得你的 
    room 与众不同，但确保和别的Object 能相互作用。那 room::create() 
    是做什么的？你可能看到类似的东西比如： ::create()、::init()等。可能现在完全理解有些困难。你只要有个印象就可以了。<br>
    在你继承的那些 Object 中，可能会有 create() 函数，但是在你写的的 
    Object 中也有 create() 了，那么 Driver 将只调用你写 create() 
    来完成一些初始化工作，一般情况下这是你所希望的。可是，有时候，你发现你继承的 
    Object，比如 /std/room.c 中的 create()，也是有用的，那怎办？那么你可以这么做：在你写的 
    room 的 create() 当中加入<br>
    -----------------<br>
    room::create();<br>
    -----------------<br>
    这一行，&quot;::&quot;这个操作符加在一个函数 example() 
    的前面，那么它就调用它继承的 Object 中的那个函数，如果 
    &quot;::&quot;的前面没有任何限定，那么就调用所有继承的当前的一级的 
    Object 中叫做 example() 的函数，如果有限定，那么就只调用给定的 
    Object 的叫做 example() 的函数，在我们的例子就调用/std/room.c 的 create() 
    函数。&quot;::&quot;这个操作符，是用于调用继承的 Object 
    一个特殊的函数。通常把 &quot;::&quot; 操作符叫做 域访问操作符 。<br>
    一个对比例子：<br>
    -----<br>
    #1<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    create();<br>
    }<br>
    -----<br>
    -----<br>
    #2<br>
    inherit &quot;/std/room&quot;;<br>
    void create()<br>
    {<br>
    room::create();<br>
    }<br>
    -----<br>
    例子 1 的后果是灾难性的。当它被装入内存中，Driver 调用 create()，接着 
    create() 调用 create()，create() 还接着调用 create()，如此往复永无穷尽。就是说，create() 
    持续不断的调用自己，除非 Driver 
    发现这是一个太深的递归，将其强制退出。例子 2 
    是对的，但是除了浪费内存之外没有任何作用，因为它和 room.c的功能没有区别。对于这个 
    Object，Driver 调用它的 create()，在它的create() 通过room::create() 
    返回去调用 room.c 中的 create()。<br>
    总的来说，每个 MudLib 
    都是不同的，每个自己有一套标准函数的集合，它们对于一些基本的功能都能完成。有些功能特性多有些，有些少一些，有些在一些特殊方面完成特殊的工作，比如 
    Es2 带了对中文的处理。但是如果这个 MudLib 
    如果比较完善的话，它一般要提供一些标准的 Object 
    的特性和功能的说明。一般可能在 &quot;/doc/build&quot; 底下，可能叫做&quot;room_prop&quot;、&quot;monster_prop&quot; 
    等。看看这些，你会得到你继承的Object 
    的有的函数，它们的输入参数，返回的数据类型，以及能完成什么工作。<br>
    第四节 小结<br>
    实际上复杂对象的继承是很复杂的，就这么简单解释是远远不够的。这篇简介只是在你创建一些简单的 
    Object 能使用继承。更全面的讨论我们将在 Lpc进阶 
    里面看到。现在你应该知道：<br>
    1) 每个 MudLib 有自己的一套基本 Object 
    的库，有着一些基本的功能，巫师们通过继承能更容易创建自己的 
    Object，不同的Object 之间的交互作用也更容易一些。<br>
    2) 每个 MudLib 有自己一套标准。通常有自己一些文档说明标准的Object 
    是什么，有什么样的功能。<br>
    3) 你可以用这样继承别的 Object 的功能：<br>
    -----<br>
    inherit &quot;filename&quot;;<br>
    -----<br>
    这里的 filename 是被继承的 Object 的文件名。inherit &quot;xxx&quot;要在你的写的代码的开头部分。</small></td>
  </tr>
  <tr>
    <td width="83%"><p align="center"><a href="lpc_7.asp">上一篇</a> 
    &nbsp;&nbsp;&nbsp;&nbsp; <a href="lpc_9.asp">下一篇</a></td>
  </tr>
</table>
   <TABLE border=0 cellPadding=0 cellSpacing=0 width=730>
  <TBODY>
  <TR>
    <TD bgColor=#000033 colSpan=3 height=2>
    </TD>
  </TR>
  </TBODY>
</TABLE>
<P>
<CENTER><FONT color=#919191 face=ARIAL,HELVETICA size=-1>对我们网站的建议和合作请与<A 
href="mailto:softroom@wuhee.edu.cn">mailto:softroom@wuhee.edu.cn</A>联系.<BR><BR>Copyright 
(C) 2000 网虫乐园工作室.<script src="http://202.114.98.14/count.js" width=468 height=60 border=0></script></FONT>
<P></P></CENTER></CENTER></CENTER></DIV></BODY></HTML>
