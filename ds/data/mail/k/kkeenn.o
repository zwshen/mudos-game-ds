#/obj/mailbox.c
dbase (["unit":"­Ó","long":"		³o¬O¤@­Ó¥Î¨Ó±H«H¡B¦¬«Hªº«H½c¡M§A¥i¥H¥Î¥H¤U«ü¥O¨Ó³B²z§Aªº¶l¥ó¡R						mail <¬Y¤H>               ±H«Hµ¹§O¤H¡C		replymail <«H¥ó½s¸¹>      ¦^«Hµ¹µo«HªÌ¡C		forward <«H¥ó½s¸¹> <¬Y¤H> ±N¬Y«Ê«HÂà±Hµ¹§O¤H¡C		from                      ¬d¬İ«H½c¤¤ªº«H¥ó¡C		read <«H¥ó½s¸¹>           ¾\\Åª¤@«Ê«H¥ó¡C		discard <«H¥ó½s¸¹>        ¥á±ó¤@«Ê«H¥ó¡C","id":"mailbox","name":"¹CÀs«Lªº«H½c","no_drop":1,"no_insert":1,"owner_id":"kkeenn","no_put":1,])
mails ({(["from":"¾Ç©fªº©j©j(iamtheking)","text":"                else if( undefinedp(score[\"p4\"]) ) {                        score[\"p4\"]=me->query(\"id\");                        message_vision(\"$N§¤¤W¤FµP®àªº¦èÃä¦ì¤l¡C\\n\",me);                        board[\"p4\"]=100;                        score[\"person\"]+=1;                }                else return notify_fail(\"µP®à¤w¸g§¤º¡¤F¡C\\n\");        }        else return notify_fail(\"§A¤w¸g§¤¦b´È¤l¤W¤F¡C\\n\");        return 1;}int do_reset(){        int i;        if( !check_poker() )        {                message_vision(\"ÂÂ§½µLªkÄ~Äò¡A$N±NµP§½­«·s³]©w...\",this_player());                score=([]);        }        else if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        /* ­«³]ÅÜ¼Æ */        score[\"clear\"] = 1;        score[\"start\"] = 0;        score[\"focus\"] = 0;        score[\"power\"] = 0;        score[\"owner\"] = \"\";        score[\"play_kind\"] = 0;        p1=([]);        p2=([]);        p3=([]);        p4=([]);        poker[\"m\"]=([]);        poker[\"f\"]=([]);        poker[\"h\"]=([]);        poker[\"t\"]=([]);        /* ³] 52 ±iµP¡A¨Ã³]©w¤j¤p */        for(i=1;i<=13;i++)        {                if( i == 2 ) {          /* ¦Ñ 2 ³Ì¤j */                        poker[\"m\"][i]=49;                        poker[\"f\"][i]=50;                        poker[\"h\"][i]=51;                        poker[\"t\"][i]=52;                }                else if( i == 1 ) {     /* A ²Ä¤G¤j */                        poker[\"m\"][i]=45;                        poker[\"f\"][i]=46;                        poker[\"h\"][i]=47;                        poker[\"t\"][i]=48;                } else {                /* ¨ä¥¦µP«ö¤½¦¡µ¹¤j¤p */                        poker[\"m\"][i]=i-2+(i-3)*3;                        poker[\"f\"][i]=i-1+(i-3)*3;                        poker[\"h\"][i]=i+(i-3)*3;                        poker[\"t\"][i]=i+1+(i-3)*3;                }        }        message_vision(\"$N±NµP­«·s¬~¹L¤@¦¸¡C\\n\",this_player());        return 1;}int do_start(){        int i, point,value;        string kind;        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !check_poker() )                return notify_fail(\"¤H¼Æ¤£¨¬¡B©ÎªÌ¦³µP¤Í¦bµo§b¡BÂ_½u¡AµLªk¶}©l¡C\\n\");        if( !score[\"clear\"] ) return notify_fail(\"ÁÙ¨S¦³¬~µP¡C\\n\");        if( score[\"start\"] ) return notify_fail(\"¤w¸g¶}©l¤F¡C\\n\");        /* ½ü¬yµoµP */        point=1;        for(i=1;i<=52;i++)        {                /* ªá¦âµLµP®É¡A§R°£ªá¦â */                if( sizeof(poker[\"m\"]) < 1 ) map_delete(poker,\"m\");                if( sizeof(poker[\"f\"]) < 1 ) map_delete(poker,\"f\");                if( sizeof(poker[\"h\"]) < 1 ) map_delete(poker,\"h\");                if( sizeof(poker[\"t\"]) < 1 ) map_delete(poker,\"t\");                                /* ¶Ã¼Æ¨úµP */                kind=keys(poker)[random(sizeof(keys(poker)))];                value=keys(poker[kind])[random(sizeof(values(poker[kind])))];                                switch( point )                {                        case 1:                                if( undefinedp(p1[kind]) ) p1[kind]=([]);                                p1[kind][value]=poker[kind][value];                                break;                        case 2:                                if( undefinedp(p2[kind]) ) p2[kind]=([]);                                p2[kind][value]=poker[kind][value];                                break;                        case 3:                                if( undefinedp(p3[kind]) ) p3[kind]=([]);                                p3[kind][value]=poker[kind][value];                                break;                        case 4:                                if( undefinedp(p4[kind]) ) p4[kind]=([]);                                p4[kind][value]=poker[kind][value];                                break;                }                map_delete(poker[kind],value);                if( kind == \"m\" && value==3 ) {                        score[\"focus\"]=point;                        /* ¤T­Ó¤Hª±¤â¤W¦³±öªá¤TªÌ¡A¦h¤@±iµP */                        if( score[\"person\"]==3 ) point--;                }                point++;                if( score[\"person\"]==3 && point > 3 ) point =1;                else if( point>4 ) point=1;        }        kind=focus_name();        message_vision(HIW\"$N±NµP¬~¤F¬~¡Aµo¤F\"+chinese_number(score[\"person\"])+\"¥÷... ±öªá¤T¦b\"+kind+\"¤â¤W¡A½Ğ\"+kind+\"¥ı¦æ¥XµP¡C\\n\"NOR,this_player());        score[\"start\"] = 1;        score[\"play_kind\"] = 7;        return 1;}int do_see(string arg){        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        /* §Å®v§@¹ú±M¥Î¡A­ü¡ãÁ`­n¯d­Ó«áªù¨«¨«§a¡I...:P           ¤£µM¨C¦¸¸òª±®aª±³£ª±½ü¡A°Z¤£¥áÁy¡H....Hehe....                */        if( arg && !wizardp(this_player()) )                return notify_fail(\"§A¤£¯à°½¬İ§O¤HªºµP¡I\\n\");        if( !arg ) arg=this_player()->query(\"id\");        switch( check_player(arg) )        {                case 1: write( \"¡i\"+score[\"p1\"]+\"¡j\"+show_poker(p1,1) ); break;                case 2: write( \"¡i\"+score[\"p2\"]+\"¡j\"+show_poker(p2,1) ); break;                case 3: write( \"¡i\"+score[\"p3\"]+\"¡j\"+show_poker(p3,1) ); break;                case 4: write( \"¡i\"+score[\"p4\"]+\"¡j\"+show_poker(p4,1) ); break;                default: return notify_fail(arg+\"¨S¦³¥[¤J³oµP§½¡C\\n\"); break;        }        return 1;}int do_dump(string arg){        int i, len, p, num, d=0;        string flo;        mapping p_num=([]), p_flo=([]);        if( !arg ) return notify_fail(\"§A­n¥´­ş±iµP¡H\\n\");        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( (flo=focus_name())==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( flo != this_player()->query(\"id\") )                return notify_fail(\"²{¦b¬O½ü¨ì\"+flo+\"¥´µP¡AÁÙ¨S´«§A¡I\\n\");        len=strlen(arg);        if( len > 19 ) return notify_fail(\"§A¥á¤Ó¦hµP¤F¡A³Ì¦h¥u¯à¥á¤­±iµP¡I\\n\");        /* §ì¨ú¥áªºµP */        for(i=0;i<len;i++)        if( arg[i..i] == \" \" || i==len-1 ) {                if( i!=len-1 ) {                        if( sscanf(arg[p..i-1], \"%d%s\", num, flo) != 2 )                                return notify_fail(\"§A¥áªºµP¦³°İÃD®@¡I\\n\");                } else {                        if( sscanf(arg[p..len], \"%d%s\", num, flo) != 2 )                                return notify_fail(\"§A¥áªºµP¦³°İÃD®@¡I\\n\");                }                if( num < 1 || num > 13 )                        return notify_fail(\"§A¥áªºµP¤j¤p¿ù¤F¡I\\n\");                if( flo != \"t\" && flo != \"h\" && flo != \"f\" && flo != \"m\" )                        return notify_fail(\"§A¥áªºµPªá¦â¦³°İÃD®@¡I\\n\");                /* ÀË¬d¥áªºµP¦³µL­«ÂĞ */                if( !undefinedp(p_flo[flo]) && !undefinedp(p_flo[flo][num]) )                        return notify_fail(\"§A¥áªºµP­«ÂĞ¤F®@¡I\\n\");                /* §PÂ_¤â¤¤¦³µL¦¹µP..&& ±NµP¥á¨ìmapping¸Ì¡A¤è«K¥H«á§PÂ_                   && ³]©w¤j¤p                */                switch( score[\"focus\"] ) {                        case 1:                                if( undefinedp(p1[flo]) || undefinedp(p1[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p1[flo][num];                                p_flo[flo][num]=p1[flo][num];                                break;                        case 2:                                if( undefinedp(p2[flo]) || undefinedp(p2[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p2[flo][num];                                p_flo[flo][num]=p2[flo][num];                                break;                        case 3:                                if( undefinedp(p3[flo]) || undefinedp(p3[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p3[flo][num];                                p_flo[flo][num]=p3[flo][num];                                break;                        case 4:                                if( undefinedp(p4[flo]) || undefinedp(p4[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p4[flo][num];                                p_flo[flo][num]=p4[flo][num];                                break;                }                       d++;                p=i+1;        }                        /* µP§½¤@¶}©l¥²¶·¥á¥X±öªá¤T */        if( score[\"play_kind\"]==7 && ( undefinedp(p_flo[\"m\"]) || undefinedp(p_flo[\"m\"][3]) ) )                return notify_fail(\"µP§½¤@¶}©l¥²¶·¥á¥X±öªá¤T¡C\\n\");        if( score[\"owner\"] == this_player()->query(\"id\") ) {                score[\"power\"] = 0;                score[\"play_kind\"] = 0;        }        switch( d ) {                case 1: /* ½m³æ */                        if( score[\"play_kind\"] != 1 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                return notify_fail(\"²{¦b¤£¬O½m³æªº®É­Ô¡C\\n\");                        /* check power */                        p=0;                        foreach( flo in keys(p_flo) )                        foreach( i in keys(p_flo[flo]) )                                p=p_flo[flo][i];                        if( p < score[\"power\"] )                                 return notify_fail(\"§A¥áªºµP¤£°÷¤j®@¡I\\n\");                        score[\"play_kind\"] = 1;                        score[\"power\"]=p;                        message_vision(\"$N»¡¹D¡G\"HIW\"¡u \"NOR+YEL\"½m³æ¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                        break;                case 2: /* ¹ï¤l */                        if( score[\"play_kind\"] != 2 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                return notify_fail(\"²{¦b¤£¬O¥á¹ï¤lªº®É­Ô¡C\\n\");                        /* check¬O§_¬°¹ï¤l */                        if( sizeof( keys(p_num) ) > 1 )                                return notify_fail(\"¥á¤G±iµP®É¡A¥²»İ¥á¹ï¤l¤~¦æ¡C\\n\");                        /* check power */                        p=0;                        foreach( flo in keys(p_flo) )                        foreach( i in keys(p_flo[flo]) )                                if( p < p_flo[flo][i] ) p=p_flo[flo][i];                        if( p < score[\"power\"] )                                 return notify_fail(\"§A¥áªº¹ï¤l¤£°÷¤j®@¡I\\n\");                        score[\"play_kind\"] = 2;                        score[\"power\"]=p;                        message_vision(\"$N»¡¹D¡G\"HIW\"¡u \"NOR+MAG\"¹ï¤l¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                        break;                case 3: return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                case 4: return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                case 5:                         num=sizeof(keys(p_num));                        /* ¶¶¤l¡B¦Pªá¶¶ */                        if( num == 5) {                                int *check, x, y, swap;                                check=keys(p_num);                                /* ±Æ§Ç */                                for(x=4;x>0;x--)                                for(y=1;y<=x;y++)                                if( check[y-1] < check[y] )                                {                                        swap=check[y-1];                                        check[y-1]=check[y];                                        check[y]=swap;                                }                                                                /* check¬O§_¬°¶¶¤l,1 10,11,12,13 ¤]¬O¶¶¤l */                                if( check[0]!=13 || check[1]!=12 || check[2]!=11 || check[3]!=10 || check[4]!=1 ) {                                        y=check[0];                                        for(x=1;x<5;x++) {                                                if( y-check[x] != 1 )                                                        return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP§a¡H(5)\\n\");                                                y=check[x];                                        }                                }                                /* check power 1~5³Ì¤p */                                if( check[0]==5 && check[1]==4 && check[2]==3 && check[3]==2 && check[4]==1 ) {                                        foreach( flo in keys(p_num[5]) )                                                p=p_num[5][flo];                                } else {                                        p=0;                                        foreach( flo in keys(p_flo) )                                        foreach( i in keys(p_flo[flo]) )                                                if( p < p_flo[flo][i] ) p=p_flo[flo][i];                                }                                /* check ¬O§_¦Pªá */                                num=0;                                foreach( flo in keys(p_flo) )                                if( num < sizeof(keys(p_flo[flo])) ) num = sizeof(keys(p_flo[flo]));                                if( num==5 ) {                                        if( score[\"play_kind\"] == 6 && p < score[\"power\"] )                                                return notify_fail(\"§A¥áªº¦Pªá¶¶¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=6;                                        message_vision(\"$N¨g¯º¹D¡G\"HIW\"¡u \"HIY\"«z¡I«¢¡I«¢¡I¦Pªá¶¶¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                } else {                                        if( score[\"play_kind\"] != 4 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                                return notify_fail(\"²{¦b¤£¬O¥X¶¶¤lªº®É­Ô¡C\\n\");                                        if( p < score[\"power\"] )                                                 return notify_fail(\"§A¥áªº¶¶¤l¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=4;                                        message_vision(\"$N¥s¹D¡G\"HIW\"¡u \"HIM\"¶¶¤l¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                }                                score[\"power\"]=p;                        /* ÅK¤ä¡B¸¬Äª */                        } else if( num == 2 ) {                                i=0; len=0; p=0;                                foreach( num in keys(p_num) )                                if( i < sizeof(keys(p_num[num])) ) {                                        i=sizeof(keys(p_num[num]));                                        len=num;                                }                                /* ¸¬Äª */                                if( i == 3 ) {                                        if( score[\"play_kind\"] != 3 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                                return notify_fail(\"²{¦b¤£¬O¥X¸¬Äªªº®É­Ô¡C\\n\");                                        foreach( flo in keys(p_num[len]) )                                                if( p < p_num[len][flo] ) p = p_num[len][flo];                                        if( score[\"power\"] > p )                                                return notify_fail(\"§A¥áªº¸¬Äª¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=3;                                        message_vision(\"$N³Û¹D¡G\"HIW\"¡u \"HIG\"¸¬Äª¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                /* ÅK¤ä */                                } else if( i==4 ) {                                        if( score[\"play_kind\"] == 6 )                                                return notify_fail(\"²{¦b¤£¬O¥XÅK¤äªº®É­Ô¡C\\n\");                                        foreach( flo in keys(p_num[len]) )                                                if( p < p_num[len][flo] ) p = p_num[len][flo];                                        if( score[\"play_kind\"] == 5 && score[\"power\"] > p )                                                return notify_fail(\"§A¥áªºÅK¤ä¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=5;                                        message_vision(\"$N¤jÁn¯º¹D¡G\"HIW\"¡u \"HIC\"«¢¡I«¢¡IÅK¤ä¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                } else return notify_fail(\"§A¥XªºµP²Õ¦X¦³°İÃD®@¡C\\n\");                                score[\"power\"]=p;                        } else return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                        break;                default: return notify_fail(\"§A¥áªºµP¤Ó¦h±i¤F¡A³Ì¦h¤­±i¡C\\n\"); break;        }        pok=p_flo;        /* ¥á¥XªºµP±q¤â¤¤²M°£ */        foreach( flo in keys(p_flo) )        foreach( i in keys(p_flo[flo]) )        switch( score[\"focus\"] )        {                case 1: map_delete(p1[flo],i); break;                case 2: map_delete(p2[flo],i); break;                case 3: map_delete(p3[flo],i); break;                case 4: map_delete(p4[flo],i); break;        }        score[\"owner\"]=this_player()->query(\"id\");        message_vision(show_poker(p_flo,0),this_player());        if( !check_over(this_player()->query(\"id\")) ) {                score[\"focus\"] += 1;                if( score[\"person\"]==3 && score[\"focus\"] > 3 ) score[\"focus\"]=1;                else if( score[\"focus\"] > 4 ) score[\"focus\"]= 1;                message_vision(\"... ½ü¨ì\"+focus_name()+\"¥´µP¡C\\n\",this_player());        } else {                message_vision(\"\\n$Nµo¤F¨g¯ë¯º¹D¡G\"HIW\"¡u \"HIY\"¤f¦c¡I¤f¦X¡I¤f¦X¡I¤f¦X¡I §Ú  Ä¹  ¤F¡I¡I¡I\"HIW\"¡v\\n\\n\"NOR,this_player());                check_board(this_player()->query(\"id\"));                do_reset();        }        return 1;}int do_pass(){        string who;        object me=this_player();        if( !check_player(me->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( (who=focus_name())==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( who != me->query(\"id\") )                return notify_fail(\"²{¦b¬O½ü¨ì\"+who+\"¥´µP¡AÁÙ¨S´«§A¡I\\n\");        if( score[\"play_kind\"]==7 )                return notify_fail(\"²{¦b°_½X­n¥á¤@±i±öªá¤T¡A¤£¦æPass®@¡C\\n\");        if( score[\"owner\"] == me->query(\"id\") )                return notify_fail(\"§A¤£¯à°÷Pass¡A§A´NÀH«K¥á´X±iµP§a¡C\\n\");        score[\"focus\"] += 1;        if( score[\"person\"] == 3 && score[\"focus\"] > 3 )  score[\"focus\"]=1;        else if( score[\"focus\"] > 4 ) score[\"focus\"]= 1;        message_vision(\"$N¤jÁn»¡¹D¡G\"HIW\"¡y \"HIY\"¢Ş¢é¢û¢û¡I\"HIW\"¡z\"NOR\"... ½ü¨ì\"+focus_name()+\"¥´µP¡C\\n\",me);        return 1;}int do_check(){        string msg;                if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( focus_name()==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( sizeof(pok) < 1 )                return notify_fail(\"¥Ø«e®à­±¤W¨S¦³µP¡I\\n\");        msg = \"¥Ñ\"+score[\"owner\"]+\"©Ò¥XªºµP¡G\";        msg += show_poker(pok,0);        msg += \"±µ¤U¨Ó´«\"+focus_name()+\"¥XµP¡C\\n\";        write(msg);        return 1;}int do_leave(){        object me=this_player();        if( !check_player(me->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( score[\"p1\"] == me->query(\"id\") )                 map_delete(score,\"p1\");        else if( score[\"p2\"] == me->query(\"id\") )                map_delete(score,\"p2\");        else if( score[\"p3\"] == me->query(\"id\") )                map_delete(score,\"p3\");        else {                if( undefinedp(score[\"p4\"]) ) return 0;                if( score[\"p4\"] == me->query(\"id\") )                map_delete(score,\"p4\");        }        message_vision(\"$NÂ÷¶}¤FµP®à¤£ª±¤F¡C\\n\",me);        score[\"person\"]-=1;        if( score[\"start\"] ) do_reset();        return 1;}int do_rules(){        write(@rules        ùİùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùß        ùø               ¾ë§JµP-¤j¦Ñ¤G ¹CÀ¸³W«h»¡©ú             ùø        ùàùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùâ        ùø  ¤j®a³£ª¾¹D¤F... Ãi±o¥´¤F ccc..                      ùø        ùø                                                      ùø        ùø  »İ­nª`·Nªº¬O¡G                                      ùø        ùø       ¤@¡B¨S¦³¡u¦R©A¡v                               ùø        ùø       ¤G¡B¨S¦³¡u¤T±ø¡v                               ùø        ùø       ¤T¡B¶¶¤l1~5¬O³Ì¤pªº                            ùø        ùø       ¥|¡B¥u­n¨ä¤¤¤@­Óª±ªÌ¤â¤¤¨SµP§YÄ¹¤F             ùø        ùø       ¤­¡B¤T­Ó¤H¤]¥i¥Hª±¡A¤â¤¤¦³±öªá¤Tªº¤H¦h¤@±iµP   ùø        ùø                                                      ùø        ùø  ­p¤À¤è¦¡¡G                                          ùø        ùø       ·íµP§½µ²§ô«á¡A¤â¤¤³Ñ´X±iµP´N¦©´XÂI¤À¼Æ         ùø        ùø       ¦pªG¶W¹L¤Q±i«h­¼¤G¡A¦pªG¦³¤j¦Ñ¤G¤]­¼¤G         ùø        ùø       ¨ä¥¦¤H¦©ªºÂI¼Æ«h¥[µ¹Ä¹ªº¤H¡C                   ùø        ùø                                                      ùø        ùø                             write by -Acme@ED-       ùø        ùãùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùårules);        return 1;}int do_score(){        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( focus_name()==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        write(show_score()+\"\\n\");        return 1;}/* Åã¥Ü¥Ø«e¥XµP¤H¤§¦W¦r */string focus_name(){        if( undefinedp(score[\"focus\"]) ) return \"??\";        switch( score[\"focus\"] )        {                case 1: if( !undefinedp(score[\"p1\"]) ) return score[\"p1\"]; break;                case 2: if( !undefinedp(score[\"p2\"]) ) return score[\"p2\"]; break;                case 3: if( !undefinedp(score[\"p3\"]) ) return score[\"p3\"]; break;                case 4: if( !undefinedp(score[\"p4\"]) ) return score[\"p4\"]; break;        }        return \"??\";}/* Åã¥Ü¤â¤WªºµP */string show_poker(mapping mm,int s){        int i, t;        string msg=\"\", msg2=\"\",bar_up,bar_down, num;        t=sizeof(mm[\"t\"])+sizeof(mm[\"h\"])+sizeof(mm[\"f\"])+sizeof(mm[\"m\"])-1;        bar_up = \"\\nùİ\";        bar_down = \"ùã\";        while( t-- ) {                bar_up += \"ùùùŞ\";                bar_down += \"ùùùä\";        }        bar_up += \"ùùùß\\n\";        bar_down += \"ùùùå\\n\";        /* «ö·Ó¤j¤p±Æ¦C */        for(i=13;i>0;i--)        {                num=show_number(i);                if( member_array(\"t\",keys(mm))!=-1 && !undefinedp(mm[\"t\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HBK\"®ç\"NOR;                }                if( member_array(\"h\",keys(mm))!=-1 && !undefinedp(mm[\"h\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HIR\"¤ß\"NOR;                }                if( member_array(\"f\",keys(mm))!=-1 && !undefinedp(mm[\"f\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HIR\"¤è\"NOR;                }                if( member_array(\"m\",keys(mm))!=-1 && !undefinedp(mm[\"m\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HBK\"±ö\"NOR;                }        }        if( s ) {                msg+=\"ùø\\tt->\"HBK\"¶Â®ç\"NOR\", h->\"HIR\"¬õ¤ß\"NOR\"\\n\";                msg2+=\"ùø\\tf->\"HIR\"¤è¶ô\"NOR\", m->\"HBK\"±öªá\"NOR\"\\n\";        }        else {                msg+=\"ùø\\n\";                msg2+=\"ùø\\n\";        }        return bar_up+msg+msg2+bar_down;}/* ¨q¼Æ¦r */string show_number(int i){        switch( i ) {                case 1: return \"¢Ï\"; break;                case 2: return HIW\"¢±\"NOR; break;                case 3: return \"¢²\"; break;                case 4: return \"¢³\"; break;                case 5: return \"¢´\"; break;                case 6: return \"¢µ\"; break;                case 7: return \"¢¶\"; break;                case 8: return \"¢·\"; break;                case 9: return \"¢¸\"; break;                case 10: return \"10\"; break;                case 11: return \"¢Ø\"; break;                case 12: return \"¢ß\"; break;                case 13: return \"¢Ù\"; break;        }        return \"??\";}/* ¨qªá¦â */string show_flower(string str){        switch( str ) {                case \"t\": return \"¶Â®ç\"; break;                case \"h\": return \"¬õ¤ß\"; break;                case \"f\": return \"¤è¶ô\"; break;                case \"m\": return \"±öªá\"; break;        }        return \"??\";}string show_score(){        string msg=\"\";        if( !undefinedp(board[\"p1\"]) && !undefinedp(score[\"p1\"]) )                msg+=score[\"p1\"]+\"¥Ø«e¬°\"+board[\"p1\"]+\"¤À  \";        if( !undefinedp(board[\"p2\"]) && !undefinedp(score[\"p2\"]) )                msg+=score[\"p2\"]+\"¥Ø«e¬°\"+board[\"p2\"]+\"¤À  \";        if( !undefinedp(board[\"p3\"]) && !undefinedp(score[\"p3\"]) )                msg+=score[\"p3\"]+\"¥Ø«e¬°\"+board[\"p3\"]+\"¤À  \";        if( !undefinedp(board[\"p4\"]) && !undefinedp(score[\"p4\"]) )                msg+=score[\"p4\"]+\"¥Ø«e¬°\"+board[\"p4\"]+\"¤À  \";        return msg;}/* ÀË¬d¬O§_§¤¦bµP®à«e */int check_player(string name){        if( name == score[\"p1\"] ) return 1;        else if( name == score[\"p2\"] ) return 2;        else if( name == score[\"p3\"] ) return 3;        else {                if( undefinedp(score[\"p4\"]) ) return 0;                if( name == score[\"p4\"] ) return 4;        }        return 0; }/* ÀË¬dµP§½¬O§_¥i¥HÄ~Äò°õ¦æ */int check_poker(){        object user;        if( !undefinedp(score[\"p1\"]) &&             /* ª±®aÂ÷¶}¡BÂ_½u©Îµo§b¡AµLªk¶i¦æ */            user = present(score[\"p1\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        if( !undefinedp(score[\"p2\"]) &&             user = present(score[\"p2\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        if( !undefinedp(score[\"p3\"]) &&             user = present(score[\"p3\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        /* ¤T¤H¤]¥iª± */        if( score[\"person\"] == 3 ) return 1;        if( !undefinedp(score[\"p4\"]) &&             user = present(score[\"p4\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        return 1;}/* ÀË¬dµP§½¬O§_µ²§ô */int check_over(string name){        int i;        i=check_player(name);        switch( i )        {                case 1: if( sizeof(p1[\"m\"]) < 1 && sizeof(p1[\"f\"]) < 1                         && sizeof(p1[\"h\"]) < 1 && sizeof(p1[\"t\"]) < 1 ) return 1; break;                case 2: if( sizeof(p2[\"m\"]) < 1 && sizeof(p2[\"f\"]) < 1                         && sizeof(p2[\"h\"]) < 1 && sizeof(p2[\"t\"]) < 1 ) return 1; break;                case 3: if( sizeof(p3[\"m\"]) < 1 && sizeof(p3[\"f\"]) < 1                         && sizeof(p3[\"h\"]) < 1 && sizeof(p3[\"t\"]) < 1 ) return 1; break;                case 4:                         if( undefinedp(score[\"p4\"]) ) return 0;                        if( sizeof(p4[\"m\"]) < 1 && sizeof(p4[\"f\"]) < 1                         && sizeof(p4[\"h\"]) < 1 && sizeof(p4[\"t\"]) < 1 ) return 1; break;        }        return 0;}void check_board(string winner){        int num=0, x, i;        string flo;        object me=this_player();        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        message_vision(\"                              µ²      ºâ                              \\n\",me);        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        i=x=0;        if( winner != score[\"p1\"] ) {                message_vision(score[\"p1\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p1,0),me);                foreach( flo in keys(p1) ) {                        i+=sizeof(keys(p1[flo]));                        if( !undefinedp(p1[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p1\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p1\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( winner != score[\"p2\"] ) {                message_vision(score[\"p2\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p2,0),me);                foreach( flo in keys(p2) ) {                        i+=sizeof(keys(p2[flo]));                        if( !undefinedp(p2[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p2\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p2\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( winner != score[\"p3\"] ) {                message_vision(score[\"p3\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p3,0),me);                foreach( flo in keys(p3) ) {                        i+=sizeof(keys(p3[flo]));                        if( !undefinedp(p3[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p3\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p3\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( !undefinedp(score[\"p4\"]) && winner != score[\"p4\"] ) {                message_vision(score[\"p4\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p4,0),me);                foreach( flo in keys(p4) ) {                        i+=sizeof(keys(p4[flo]));                        if( !undefinedp(p4[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p4\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p4\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        if( score[\"p1\"] == winner ) {                message_vision(HIY+score[\"p1\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p1\"]+=num;        } else if( score[\"p2\"] == winner ) {                message_vision(HIY+score[\"p2\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p2\"]+=num;        } else if( score[\"p3\"] == winner ) {                message_vision(HIY+score[\"p3\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p3\"]+=num;        } else if( !undefinedp(score[\"p4\"]) && score[\"p4\"] == winner ) {                message_vision(HIY+score[\"p4\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p4\"]+=num;        }        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        message_vision(show_score()+\"\\n\",me);        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        return;}string long(){        string msg=\"\";                        msg += \"ùİùùùùùùùùùùùùùß\\n\";        msg += \"ùø ¤j¦Ñ¤GµP®à ùø\\n\";        msg += \"ùàùùùùùùùùùùùùùäùùùùùùùùùùùùùùùùùùùŞùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùß\\n\";        msg += \"ùø                                ùø                              ùø\\n\";        msg += \"ùø     rules     Æ[¬İ³W«h         ùø                              ùø\\n\";        msg += \"ùø     leave     Â÷¶}µP®à         ùø                              ùø\\n\";        msg += sprintf(\"ùø     sit       §ä®y¦ì§¤         ùø%13s%-17sùø\\n\",\"\",                        !undefinedp(score[\"p1\"]) ? score[\"p1\"] : \"\" );        msg += \"ùø     reset     ³]¸m·s§½¡B¬~µP   ùø            ùİùùùß            ùø\\n\";        msg += sprintf(\"ùø     start     ¶}©lµP§½         ùø%12sùø®àùø%-12sùø\\n\",                        !undefinedp(score[\"p4\"]) ? score[\"p4\"] : \"\",                        !undefinedp(score[\"p2\"]) ? score[\"p2\"] : \"\" );        msg += \"ùø     .         Æ[¬İ¤â¤¤ªºµP     ùø            ùãùùùå            ùø\\n\";        msg += sprintf(\"ùø     du        ¥áµP             ùø%13s%-17sùø\\n\",\"\",                        !undefinedp(score[\"p3\"]) ? score[\"p3\"] : \"\" );        msg += \"ùø     pa        ¥XµPÅvÅıµ¹¤U®a   ùø                              ùø\\n\";        msg += \"ùø     ch        ÀËµø¥Ø«e¬O¤°»òµP ùø                              ùø\\n\";        msg += \"ùø     ,         ÀËµø¥Ø«e¤À¼Æ     ùø                              ùø\\n\";        msg += \"ùø                                ùø                              ùø\\n\";        msg += \"ùàùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùäùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùâ\\n\";        msg += \"ùø     ¶Â®ç¬Ot, ¬õ¤ß¬Oh, ¤è¶ô¬Of, ±öªá¬Om                         ùø\\n\";        msg += \"ùø     ¦Ñ¢Ù¬O13, ¢ß¬O12, ¢Ø¬O11, ¢Ï¬O1                            ùø\\n\";        msg += \"ùø     du®É¬°du 10t 3h, ¥á¦h±iµP®É¥HªÅ¥Õ¹j¶}                      ùø\\n\";        msg += \"ùø     ¤£¥i¥HK,Q,J,A¤è¦¡¥á¡A¥²¶·¬O¼Æ¦r¤~¦æ                        ùø\\n\";        msg += \"ùãùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùå\\n\";        return msg;}[0m","to":"kkeenn","title":"¤j¦Ñ¤Gcode","time":1070035177,]),(["from":"¾Ç©fªº©j©j(iamtheking)","text":"        /* ­«³]ÅÜ¼Æ */        score[\"clear\"] = 1;        score[\"start\"] = 0;        score[\"focus\"] = 0;        score[\"power\"] = 0;        score[\"owner\"] = \"\";        score[\"play_kind\"] = 0;        p1=([]);        p2=([]);        p3=([]);        p4=([]);        poker[\"m\"]=([]);        poker[\"f\"]=([]);        poker[\"h\"]=([]);        poker[\"t\"]=([]);        /* ³] 52 ±iµP¡A¨Ã³]©w¤j¤p */        for(i=1;i<=13;i++)        {                if( i == 2 ) {          /* ¦Ñ 2 ³Ì¤j */                        poker[\"m\"][i]=49;                        poker[\"f\"][i]=50;                        poker[\"h\"][i]=51;                        poker[\"t\"][i]=52;                }                else if( i == 1 ) {     /* A ²Ä¤G¤j */                        poker[\"m\"][i]=45;                        poker[\"f\"][i]=46;                        poker[\"h\"][i]=47;                        poker[\"t\"][i]=48;                } else {                /* ¨ä¥¦µP«ö¤½¦¡µ¹¤j¤p */                        poker[\"m\"][i]=i-2+(i-3)*3;                        poker[\"f\"][i]=i-1+(i-3)*3;                        poker[\"h\"][i]=i+(i-3)*3;                        poker[\"t\"][i]=i+1+(i-3)*3;                }        }        message_vision(\"$N±NµP­«·s¬~¹L¤@¦¸¡C\\n\",this_player());        return 1;}int do_start(){        int i, point,value;        string kind;        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !check_poker() )                return notify_fail(\"¤H¼Æ¤£¨¬¡B©ÎªÌ¦³µP¤Í¦bµo§b¡BÂ_½u¡AµLªk¶}©l¡C\\n\");        if( !score[\"clear\"] ) return notify_fail(\"ÁÙ¨S¦³¬~µP¡C\\n\");        if( score[\"start\"] ) return notify_fail(\"¤w¸g¶}©l¤F¡C\\n\");        /* ½ü¬yµoµP */        point=1;        for(i=1;i<=52;i++)        {                /* ªá¦âµLµP®É¡A§R°£ªá¦â */                if( sizeof(poker[\"m\"]) < 1 ) map_delete(poker,\"m\");                if( sizeof(poker[\"f\"]) < 1 ) map_delete(poker,\"f\");                if( sizeof(poker[\"h\"]) < 1 ) map_delete(poker,\"h\");                if( sizeof(poker[\"t\"]) < 1 ) map_delete(poker,\"t\");                                /* ¶Ã¼Æ¨úµP */                kind=keys(poker)[random(sizeof(keys(poker)))];                value=keys(poker[kind])[random(sizeof(values(poker[kind])))];                                switch( point )                {                        case 1:                                if( undefinedp(p1[kind]) ) p1[kind]=([]);                                p1[kind][value]=poker[kind][value];                                break;                        case 2:                                if( undefinedp(p2[kind]) ) p2[kind]=([]);                                p2[kind][value]=poker[kind][value];                                break;                        case 3:                                if( undefinedp(p3[kind]) ) p3[kind]=([]);                                p3[kind][value]=poker[kind][value];                                break;                        case 4:                                if( undefinedp(p4[kind]) ) p4[kind]=([]);                                p4[kind][value]=poker[kind][value];                                break;                }                map_delete(poker[kind],value);                if( kind == \"m\" && value==3 ) {                        score[\"focus\"]=point;                        /* ¤T­Ó¤Hª±¤â¤W¦³±öªá¤TªÌ¡A¦h¤@±iµP */                        if( score[\"person\"]==3 ) point--;                }                point++;                if( score[\"person\"]==3 && point > 3 ) point =1;                else if( point>4 ) point=1;        }        kind=focus_name();        message_vision(HIW\"$N±NµP¬~¤F¬~¡Aµo¤F\"+chinese_number(score[\"person\"])+\"¥÷... ±öªá¤T¦b\"+kind+\"¤â¤W¡A½Ğ\"+kind+\"¥ı¦æ¥XµP¡C\\n\"NOR,this_player());        score[\"start\"] = 1;        score[\"play_kind\"] = 7;        return 1;}int do_see(string arg){        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        /* §Å®v§@¹ú±M¥Î¡A­ü¡ãÁ`­n¯d­Ó«áªù¨«¨«§a¡I...:P           ¤£µM¨C¦¸¸òª±®aª±³£ª±½ü¡A°Z¤£¥áÁy¡H....Hehe....                */        if( arg && !wizardp(this_player()) )                return notify_fail(\"§A¤£¯à°½¬İ§O¤HªºµP¡I\\n\");        if( !arg ) arg=this_player()->query(\"id\");        switch( check_player(arg) )        {                case 1: write( \"¡i\"+score[\"p1\"]+\"¡j\"+show_poker(p1,1) ); break;                case 2: write( \"¡i\"+score[\"p2\"]+\"¡j\"+show_poker(p2,1) ); break;                case 3: write( \"¡i\"+score[\"p3\"]+\"¡j\"+show_poker(p3,1) ); break;                case 4: write( \"¡i\"+score[\"p4\"]+\"¡j\"+show_poker(p4,1) ); break;                default: return notify_fail(arg+\"¨S¦³¥[¤J³oµP§½¡C\\n\"); break;        }        return 1;}int do_dump(string arg){        int i, len, p, num, d=0;        string flo;        mapping p_num=([]), p_flo=([]);        if( !arg ) return notify_fail(\"§A­n¥´­ş±iµP¡H\\n\");        if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( (flo=focus_name())==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( flo != this_player()->query(\"id\") )                return notify_fail(\"²{¦b¬O½ü¨ì\"+flo+\"¥´µP¡AÁÙ¨S´«§A¡I\\n\");        len=strlen(arg);        if( len > 19 ) return notify_fail(\"§A¥á¤Ó¦hµP¤F¡A³Ì¦h¥u¯à¥á¤­±iµP¡I\\n\");        /* §ì¨ú¥áªºµP */        for(i=0;i<len;i++)        if( arg[i..i] == \" \" || i==len-1 ) {                if( i!=len-1 ) {                        if( sscanf(arg[p..i-1], \"%d%s\", num, flo) != 2 )                                return notify_fail(\"§A¥áªºµP¦³°İÃD®@¡I\\n\");                } else {                        if( sscanf(arg[p..len], \"%d%s\", num, flo) != 2 )                                return notify_fail(\"§A¥áªºµP¦³°İÃD®@¡I\\n\");                }                if( num < 1 || num > 13 )                        return notify_fail(\"§A¥áªºµP¤j¤p¿ù¤F¡I\\n\");                if( flo != \"t\" && flo != \"h\" && flo != \"f\" && flo != \"m\" )                        return notify_fail(\"§A¥áªºµPªá¦â¦³°İÃD®@¡I\\n\");                /* ÀË¬d¥áªºµP¦³µL­«ÂĞ */                if( !undefinedp(p_flo[flo]) && !undefinedp(p_flo[flo][num]) )                        return notify_fail(\"§A¥áªºµP­«ÂĞ¤F®@¡I\\n\");                /* §PÂ_¤â¤¤¦³µL¦¹µP..&& ±NµP¥á¨ìmapping¸Ì¡A¤è«K¥H«á§PÂ_                   && ³]©w¤j¤p                */                switch( score[\"focus\"] ) {                        case 1:                                if( undefinedp(p1[flo]) || undefinedp(p1[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p1[flo][num];                                p_flo[flo][num]=p1[flo][num];                                break;                        case 2:                                if( undefinedp(p2[flo]) || undefinedp(p2[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p2[flo][num];                                p_flo[flo][num]=p2[flo][num];                                break;                        case 3:                                if( undefinedp(p3[flo]) || undefinedp(p3[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p3[flo][num];                                p_flo[flo][num]=p3[flo][num];                                break;                        case 4:                                if( undefinedp(p4[flo]) || undefinedp(p4[flo][num]) )                                        return notify_fail(\"§A¤â¤W¨S¦³\"+show_flower(flo)+show_number(num)+\"³o±iµP¡C\\n\");                                if(undefinedp(p_num[num])) p_num[num]=([]);                                if(undefinedp(p_flo[flo])) p_flo[flo]=([]);                                p_num[num][flo]=p4[flo][num];                                p_flo[flo][num]=p4[flo][num];                                break;                }                       d++;                p=i+1;        }                        /* µP§½¤@¶}©l¥²¶·¥á¥X±öªá¤T */        if( score[\"play_kind\"]==7 && ( undefinedp(p_flo[\"m\"]) || undefinedp(p_flo[\"m\"][3]) ) )                return notify_fail(\"µP§½¤@¶}©l¥²¶·¥á¥X±öªá¤T¡C\\n\");        if( score[\"owner\"] == this_player()->query(\"id\") ) {                score[\"power\"] = 0;                score[\"play_kind\"] = 0;        }        switch( d ) {                case 1: /* ½m³æ */                        if( score[\"play_kind\"] != 1 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                return notify_fail(\"²{¦b¤£¬O½m³æªº®É­Ô¡C\\n\");                        /* check power */                        p=0;                        foreach( flo in keys(p_flo) )                        foreach( i in keys(p_flo[flo]) )                                p=p_flo[flo][i];                        if( p < score[\"power\"] )                                 return notify_fail(\"§A¥áªºµP¤£°÷¤j®@¡I\\n\");                        score[\"play_kind\"] = 1;                        score[\"power\"]=p;                        message_vision(\"$N»¡¹D¡G\"HIW\"¡u \"NOR+YEL\"½m³æ¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                        break;                case 2: /* ¹ï¤l */                        if( score[\"play_kind\"] != 2 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                return notify_fail(\"²{¦b¤£¬O¥á¹ï¤lªº®É­Ô¡C\\n\");                        /* check¬O§_¬°¹ï¤l */                        if( sizeof( keys(p_num) ) > 1 )                                return notify_fail(\"¥á¤G±iµP®É¡A¥²»İ¥á¹ï¤l¤~¦æ¡C\\n\");                        /* check power */                        p=0;                        foreach( flo in keys(p_flo) )                        foreach( i in keys(p_flo[flo]) )                                if( p < p_flo[flo][i] ) p=p_flo[flo][i];                        if( p < score[\"power\"] )                                 return notify_fail(\"§A¥áªº¹ï¤l¤£°÷¤j®@¡I\\n\");                        score[\"play_kind\"] = 2;                        score[\"power\"]=p;                        message_vision(\"$N»¡¹D¡G\"HIW\"¡u \"NOR+MAG\"¹ï¤l¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                        break;                case 3: return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                case 4: return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                case 5:                         num=sizeof(keys(p_num));                        /* ¶¶¤l¡B¦Pªá¶¶ */                        if( num == 5) {                                int *check, x, y, swap;                                check=keys(p_num);                                /* ±Æ§Ç */                                for(x=4;x>0;x--)                                for(y=1;y<=x;y++)                                if( check[y-1] < check[y] )                                {                                        swap=check[y-1];                                        check[y-1]=check[y];                                        check[y]=swap;                                }                                                                /* check¬O§_¬°¶¶¤l,1 10,11,12,13 ¤]¬O¶¶¤l */                                if( check[0]!=13 || check[1]!=12 || check[2]!=11 || check[3]!=10 || check[4]!=1 ) {                                        y=check[0];                                        for(x=1;x<5;x++) {                                                if( y-check[x] != 1 )                                                        return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP§a¡H(5)\\n\");                                                y=check[x];                                        }                               }                                /* check power 1~5³Ì¤p */                                if( check[0]==5 && check[1]==4 && check[2]==3 && check[3]==2 && check[4]==1 ) {                                        foreach( flo in keys(p_num[5]) )                                                p=p_num[5][flo];                                } else {                                        p=0;                                        foreach( flo in keys(p_flo) )                                        foreach( i in keys(p_flo[flo]) )                                                if( p < p_flo[flo][i] ) p=p_flo[flo][i];                                }                                /* check ¬O§_¦Pªá */                                num=0;                                foreach( flo in keys(p_flo) )                                if( num < sizeof(keys(p_flo[flo])) ) num = sizeof(keys(p_flo[flo]));                                if( num==5 ) {                                        if( score[\"play_kind\"] == 6 && p < score[\"power\"] )                                                return notify_fail(\"§A¥áªº¦Pªá¶¶¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=6;                                        message_vision(\"$N¨g¯º¹D¡G\"HIW\"¡u \"HIY\"«z¡I«¢¡I«¢¡I¦Pªá¶¶¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                } else {                                        if( score[\"play_kind\"] != 4 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                                return notify_fail(\"²{¦b¤£¬O¥X¶¶¤lªº®É­Ô¡C\\n\");                                        if( p < score[\"power\"] )                                                 return notify_fail(\"§A¥áªº¶¶¤l¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=4;                                        message_vision(\"$N¥s¹D¡G\"HIW\"¡u \"HIM\"¶¶¤l¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                }                                score[\"power\"]=p;                        /* ÅK¤ä¡B¸¬Äª */                        } else if( num == 2 ) {                                i=0; len=0; p=0;                                foreach( num in keys(p_num) )                                if( i < sizeof(keys(p_num[num])) ) {                                        i=sizeof(keys(p_num[num]));                                        len=num;                                }                                /* ¸¬Äª */                                if( i == 3 ) {                                        if( score[\"play_kind\"] != 3 && score[\"play_kind\"] != 0 && score[\"play_kind\"] != 7 )                                                return notify_fail(\"²{¦b¤£¬O¥X¸¬Äªªº®É­Ô¡C\\n\");                                        foreach( flo in keys(p_num[len]) )                                                if( p < p_num[len][flo] ) p = p_num[len][flo];                                       if( score[\"power\"] > p )                                                return notify_fail(\"§A¥áªº¸¬Äª¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=3;                                        message_vision(\"$N³Û¹D¡G\"HIW\"¡u \"HIG\"¸¬Äª¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                /* ÅK¤ä */                                } else if( i==4 ) {                                        if( score[\"play_kind\"] == 6 )                                                return notify_fail(\"²{¦b¤£¬O¥XÅK¤äªº®É­Ô¡C\\n\");                                        foreach( flo in keys(p_num[len]) )                                                if( p < p_num[len][flo] ) p = p_num[len][flo];                                        if( score[\"play_kind\"] == 5 && score[\"power\"] > p )                                                return notify_fail(\"§A¥áªºÅK¤ä¤£°÷¤j®@¡I\\n\");                                        score[\"play_kind\"]=5;                                        message_vision(\"$N¤jÁn¯º¹D¡G\"HIW\"¡u \"HIC\"«¢¡I«¢¡IÅK¤ä¡I\"HIW\"¡v\"NOR\"\\n\",this_player());                                } else return notify_fail(\"§A¥XªºµP²Õ¦X¦³°İÃD®@¡C\\n\");                                score[\"power\"]=p;                        } else return notify_fail(\"¨S¦³³oºØ²Õ¦XªºµP®@¡C\\n\"); break;                        break;                default: return notify_fail(\"§A¥áªºµP¤Ó¦h±i¤F¡A³Ì¦h¤­±i¡C\\n\"); break;        }        pok=p_flo;        /* ¥á¥XªºµP±q¤â¤¤²M°£ */        foreach( flo in keys(p_flo) )        foreach( i in keys(p_flo[flo]) )        switch( score[\"focus\"] )        {                case 1: map_delete(p1[flo],i); break;                case 2: map_delete(p2[flo],i); break;                case 3: map_delete(p3[flo],i); break;                case 4: map_delete(p4[flo],i); break;        }        score[\"owner\"]=this_player()->query(\"id\");        message_vision(show_poker(p_flo,0),this_player());        if( !check_over(this_player()->query(\"id\")) ) {                score[\"focus\"] += 1;                if( score[\"person\"]==3 && score[\"focus\"] > 3 ) score[\"focus\"]=1;                else if( score[\"focus\"] > 4 ) score[\"focus\"]= 1;                message_vision(\"... ½ü¨ì\"+focus_name()+\"¥´µP¡C\\n\",this_player());        } else {                message_vision(\"\\n$Nµo¤F¨g¯ë¯º¹D¡G\"HIW\"¡u \"HIY\"¤f¦c¡I¤f¦X¡I¤f¦X¡I¤f¦X¡I §Ú  Ä¹  ¤F¡I¡I¡I\"HIW\"¡v\\n\\n\"NOR,this_player());                check_board(this_player()->query(\"id\"));                do_reset();        }        return 1;}[0m","to":"kkeenn","title":"§Ú­«±H§a,¤À¦¨¨â¥÷,³o¬O²Ä¤@¥÷","time":1070036439,]),(["from":"¾Ç©fªº©j©j(iamtheking)","text":"int do_pass(){        string who;        object me=this_player();        if( !check_player(me->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( (who=focus_name())==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( who != me->query(\"id\") )                return notify_fail(\"²{¦b¬O½ü¨ì\"+who+\"¥´µP¡AÁÙ¨S´«§A¡I\\n\");        if( score[\"play_kind\"]==7 )                return notify_fail(\"²{¦b°_½X­n¥á¤@±i±öªá¤T¡A¤£¦æPass®@¡C\\n\");        if( score[\"owner\"] == me->query(\"id\") )                return notify_fail(\"§A¤£¯à°÷Pass¡A§A´NÀH«K¥á´X±iµP§a¡C\\n\");        score[\"focus\"] += 1;        if( score[\"person\"] == 3 && score[\"focus\"] > 3 )  score[\"focus\"]=1;        else if( score[\"focus\"] > 4 ) score[\"focus\"]= 1;        message_vision(\"$N¤jÁn»¡¹D¡G\"HIW\"¡y \"HIY\"¢Ş¢é¢û¢û¡I\"HIW\"¡z\"NOR\"... ½ü¨ì\"+focus_name()+\"¥´µP¡C\\n\",me);        return 1;}int do_check(){        string msg;                if( !check_player(this_player()->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( focus_name()==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        if( sizeof(pok) < 1 )                return notify_fail(\"¥Ø«e®à­±¤W¨S¦³µP¡I\\n\");        msg = \"¥Ñ\"+score[\"owner\"]+\"©Ò¥XªºµP¡G\";        msg += show_poker(pok,0);        msg += \"±µ¤U¨Ó´«\"+focus_name()+\"¥XµP¡C\\n\";        write(msg);        return 1;}int do_leave(){        object me=this_player();        if( !check_player(me->query(\"id\")) )                return notify_fail(\"§A¨Ã¨S¦³°Ñ»P³o¦¸ªºµP§½¡C\\n\");        if( score[\"p1\"] == me->query(\"id\") )                 map_delete(score,\"p1\");        else if( score[\"p2\"] == me->query(\"id\") )                map_delete(score,\"p2\");        else if( score[\"p3\"] == me->query(\"id\") )                map_delete(score,\"p3\");        else {                if( undefinedp(score[\"p4\"]) ) return 0;                if( score[\"p4\"] == me->query(\"id\") )                map_delete(score,\"p4\");        }        message_vision(\"$NÂ÷¶}¤FµP®à¤£ª±¤F¡C\\n\",me);        score[\"person\"]-=1;        if( score[\"start\"] ) do_reset();        return 1;}int do_rules(){        write(@rules        ùİùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùß        ùø               ¾ë§JµP-¤j¦Ñ¤G ¹CÀ¸³W«h»¡©ú             ùø        ùàùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùâ        ùø  ¤j®a³£ª¾¹D¤F... Ãi±o¥´¤F ccc..                      ùø        ùø                                                      ùø        ùø  »İ­nª`·Nªº¬O¡G                                      ùø        ùø       ¤@¡B¨S¦³¡u¦R©A¡v                               ùø        ùø       ¤G¡B¨S¦³¡u¤T±ø¡v                               ùø        ùø       ¤T¡B¶¶¤l1~5¬O³Ì¤pªº                            ùø        ùø       ¥|¡B¥u­n¨ä¤¤¤@­Óª±ªÌ¤â¤¤¨SµP§YÄ¹¤F             ùø        ùø       ¤­¡B¤T­Ó¤H¤]¥i¥Hª±¡A¤â¤¤¦³±öªá¤Tªº¤H¦h¤@±iµP   ùø        ùø                                                      ùø        ùø  ­p¤À¤è¦¡¡G                                          ùø        ùø       ·íµP§½µ²§ô«á¡A¤â¤¤³Ñ´X±iµP´N¦©´XÂI¤À¼Æ         ùø        ùø       ¦pªG¶W¹L¤Q±i«h­¼¤G¡A¦pªG¦³¤j¦Ñ¤G¤]­¼¤G         ùø        ùø       ¨ä¥¦¤H¦©ªºÂI¼Æ«h¥[µ¹Ä¹ªº¤H¡C                   ùø        ùø                                                      ùø        ùø                             write by -Acme@ED-       ùø        ùãùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùårules);        return 1;}int do_score(){        if( !score[\"start\"] )                 return notify_fail(\"µP§½ÁÙ¨S¶}©l¡I\\n\");        if( focus_name()==\"??\" )                return notify_fail(\"³oµP§½ÁÙ¨S­«³]¡B©ÎÁÙ¥¼µoµP¡C\\n\");        write(show_score()+\"\\n\");        return 1;}/* Åã¥Ü¥Ø«e¥XµP¤H¤§¦W¦r */string focus_name(){        if( undefinedp(score[\"focus\"]) ) return \"??\";        switch( score[\"focus\"] )        {                case 1: if( !undefinedp(score[\"p1\"]) ) return score[\"p1\"]; break;                case 2: if( !undefinedp(score[\"p2\"]) ) return score[\"p2\"]; break;                case 3: if( !undefinedp(score[\"p3\"]) ) return score[\"p3\"]; break;                case 4: if( !undefinedp(score[\"p4\"]) ) return score[\"p4\"]; break;        }        return \"??\";}/* Åã¥Ü¤â¤WªºµP */string show_poker(mapping mm,int s){        int i, t;        string msg=\"\", msg2=\"\",bar_up,bar_down, num;        t=sizeof(mm[\"t\"])+sizeof(mm[\"h\"])+sizeof(mm[\"f\"])+sizeof(mm[\"m\"])-1;        bar_up = \"\\nùİ\";        bar_down = \"ùã\";        while( t-- ) {                bar_up += \"ùùùŞ\";                bar_down += \"ùùùä\";        }        bar_up += \"ùùùß\\n\";        bar_down += \"ùùùå\\n\";        /* «ö·Ó¤j¤p±Æ¦C */        for(i=13;i>0;i--)        {                num=show_number(i);                if( member_array(\"t\",keys(mm))!=-1 && !undefinedp(mm[\"t\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HBK\"®ç\"NOR;                }                if( member_array(\"h\",keys(mm))!=-1 && !undefinedp(mm[\"h\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HIR\"¤ß\"NOR;                }                if( member_array(\"f\",keys(mm))!=-1 && !undefinedp(mm[\"f\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HIR\"¤è\"NOR;                }                if( member_array(\"m\",keys(mm))!=-1 && !undefinedp(mm[\"m\"][i]) ) {                        msg+=sprintf(\"ùø%s\",num);                        msg2+=\"ùø\"+HBK\"±ö\"NOR;                }        }        if( s ) {                msg+=\"ùø\\tt->\"HBK\"¶Â®ç\"NOR\", h->\"HIR\"¬õ¤ß\"NOR\"\\n\";                msg2+=\"ùø\\tf->\"HIR\"¤è¶ô\"NOR\", m->\"HBK\"±öªá\"NOR\"\\n\";        }        else {                msg+=\"ùø\\n\";                msg2+=\"ùø\\n\";        }        return bar_up+msg+msg2+bar_down;}/* ¨q¼Æ¦r */string show_number(int i){        switch( i ) {                case 1: return \"¢Ï\"; break;                case 2: return HIW\"¢±\"NOR; break;                case 3: return \"¢²\"; break;                case 4: return \"¢³\"; break;                case 5: return \"¢´\"; break;                case 6: return \"¢µ\"; break;                case 7: return \"¢¶\"; break;                case 8: return \"¢·\"; break;                case 9: return \"¢¸\"; break;                case 10: return \"10\"; break;                case 11: return \"¢Ø\"; break;                case 12: return \"¢ß\"; break;                case 13: return \"¢Ù\"; break;        }        return \"??\";}/* ¨qªá¦â */string show_flower(string str){        switch( str ) {                case \"t\": return \"¶Â®ç\"; break;                case \"h\": return \"¬õ¤ß\"; break;                case \"f\": return \"¤è¶ô\"; break;                case \"m\": return \"±öªá\"; break;        }        return \"??\";}string show_score(){        string msg=\"\";        if( !undefinedp(board[\"p1\"]) && !undefinedp(score[\"p1\"]) )                msg+=score[\"p1\"]+\"¥Ø«e¬°\"+board[\"p1\"]+\"¤À  \";        if( !undefinedp(board[\"p2\"]) && !undefinedp(score[\"p2\"]) )                msg+=score[\"p2\"]+\"¥Ø«e¬°\"+board[\"p2\"]+\"¤À  \";        if( !undefinedp(board[\"p3\"]) && !undefinedp(score[\"p3\"]) )                msg+=score[\"p3\"]+\"¥Ø«e¬°\"+board[\"p3\"]+\"¤À  \";        if( !undefinedp(board[\"p4\"]) && !undefinedp(score[\"p4\"]) )                msg+=score[\"p4\"]+\"¥Ø«e¬°\"+board[\"p4\"]+\"¤À  \";        return msg;}/* ÀË¬d¬O§_§¤¦bµP®à«e */int check_player(string name){        if( name == score[\"p1\"] ) return 1;        else if( name == score[\"p2\"] ) return 2;        else if( name == score[\"p3\"] ) return 3;        else {                if( undefinedp(score[\"p4\"]) ) return 0;                if( name == score[\"p4\"] ) return 4;        }        return 0; }/* ÀË¬dµP§½¬O§_¥i¥HÄ~Äò°õ¦æ */int check_poker(){        object user;        if( !undefinedp(score[\"p1\"]) &&             /* ª±®aÂ÷¶}¡BÂ_½u©Îµo§b¡AµLªk¶i¦æ */            user = present(score[\"p1\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        if( !undefinedp(score[\"p2\"]) &&             user = present(score[\"p2\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        if( !undefinedp(score[\"p3\"]) &&             user = present(score[\"p3\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        /* ¤T¤H¤]¥iª± */        if( score[\"person\"] == 3 ) return 1;        if( !undefinedp(score[\"p4\"]) &&             user = present(score[\"p4\"], environment(this_object()))) {                if(!interactive(user)) return 0;                if(query_idle(user) > 180) return 0;        }        else return 0;        return 1;}/* ÀË¬dµP§½¬O§_µ²§ô */int check_over(string name){        int i;        i=check_player(name);        switch( i )        {                case 1: if( sizeof(p1[\"m\"]) < 1 && sizeof(p1[\"f\"]) < 1                         && sizeof(p1[\"h\"]) < 1 && sizeof(p1[\"t\"]) < 1 ) return 1; break;                case 2: if( sizeof(p2[\"m\"]) < 1 && sizeof(p2[\"f\"]) < 1                         && sizeof(p2[\"h\"]) < 1 && sizeof(p2[\"t\"]) < 1 ) return 1; break;                case 3: if( sizeof(p3[\"m\"]) < 1 && sizeof(p3[\"f\"]) < 1                         && sizeof(p3[\"h\"]) < 1 && sizeof(p3[\"t\"]) < 1 ) return 1; break;                case 4:                         if( undefinedp(score[\"p4\"]) ) return 0;                        if( sizeof(p4[\"m\"]) < 1 && sizeof(p4[\"f\"]) < 1                         && sizeof(p4[\"h\"]) < 1 && sizeof(p4[\"t\"]) < 1 ) return 1; break;        }        return 0;}void check_board(string winner){        int num=0, x, i;        string flo;        object me=this_player();        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        message_vision(\"                              µ²      ºâ                              \\n\",me);        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        i=x=0;        if( winner != score[\"p1\"] ) {                message_vision(score[\"p1\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p1,0),me);                foreach( flo in keys(p1) ) {                        i+=sizeof(keys(p1[flo]));                        if( !undefinedp(p1[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p1\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p1\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( winner != score[\"p2\"] ) {                message_vision(score[\"p2\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p2,0),me);                foreach( flo in keys(p2) ) {                        i+=sizeof(keys(p2[flo]));                        if( !undefinedp(p2[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p2\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p2\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( winner != score[\"p3\"] ) {                message_vision(score[\"p3\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p3,0),me);                foreach( flo in keys(p3) ) {                        i+=sizeof(keys(p3[flo]));                        if( !undefinedp(p3[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p3\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p3\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        i=x=0;        if( !undefinedp(score[\"p4\"]) && winner != score[\"p4\"] ) {                message_vision(score[\"p4\"]+\"¤â¤¤©Ò³Ñ¤UªºµP¡G\"+show_poker(p4,0),me);                foreach( flo in keys(p4) ) {                        i+=sizeof(keys(p4[flo]));                        if( !undefinedp(p4[flo][2]) ) {                                message_vision(show_flower(flo)+\"¢±¥¼¥á(x2) \",me);                                x+=2;                        }                }                if( i > 9 ) {                        message_vision(\"³Ñ¤UªºµP¶W¹L¤Q±i(x2)¡C\",me);                        x+=2;                }                if( !x ) x=1;                message_vision(score[\"p4\"]+\"Á`¦@¦©¤F\"+i+\"*\"+x+\"=\"+i*x+\"ÂI¤À¼Æ¡C\\n\",me);                i=i*x;                board[\"p4\"]-=i;                num+=i;                message_vision(\"\\n\\n\",me);        }        if( score[\"p1\"] == winner ) {                message_vision(HIY+score[\"p1\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p1\"]+=num;        } else if( score[\"p2\"] == winner ) {                message_vision(HIY+score[\"p2\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p2\"]+=num;        } else if( score[\"p3\"] == winner ) {                message_vision(HIY+score[\"p3\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p3\"]+=num;        } else if( !undefinedp(score[\"p4\"]) && score[\"p4\"] == winner ) {                message_vision(HIY+score[\"p4\"]+\"Ä¹¤F³o³õ¡A¦@±o\"+num+\"¤À¡C\\n\"NOR,me);                board[\"p4\"]+=num;        }        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        message_vision(show_score()+\"\\n\",me);        message_vision(\"ùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùù\\n\",me);        return;}string long(){        string msg=\"\";                        msg += \"ùİùùùùùùùùùùùùùß\\n\";        msg += \"ùø ¤j¦Ñ¤GµP®à ùø\\n\";        msg += \"ùàùùùùùùùùùùùùùäùùùùùùùùùùùùùùùùùùùŞùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùß\\n\";        msg += \"ùø                                ùø                              ùø\\n\";        msg += \"ùø     rules     Æ[¬İ³W«h         ùø                              ùø\\n\";        msg += \"ùø     leave     Â÷¶}µP®à         ùø                              ùø\\n\";        msg += sprintf(\"ùø     sit       §ä®y¦ì§¤         ùø%13s%-17sùø\\n\",\"\",                        !undefinedp(score[\"p1\"]) ? score[\"p1\"] : \"\" );        msg += \"ùø     reset     ³]¸m·s§½¡B¬~µP   ùø            ùİùùùß            ùø\\n\";        msg += sprintf(\"ùø     start     ¶}©lµP§½         ùø%12sùø®àùø%-12sùø\\n\",                        !undefinedp(score[\"p4\"]) ? score[\"p4\"] : \"\",                        !undefinedp(score[\"p2\"]) ? score[\"p2\"] : \"\" );        msg += \"ùø     .         Æ[¬İ¤â¤¤ªºµP     ùø            ùãùùùå            ùø\\n\";        msg += sprintf(\"ùø     du        ¥áµP             ùø%13s%-17sùø\\n\",\"\",                        !undefinedp(score[\"p3\"]) ? score[\"p3\"] : \"\" );        msg += \"ùø     pa        ¥XµPÅvÅıµ¹¤U®a   ùø                              ùø\\n\";        msg += \"ùø     ch        ÀËµø¥Ø«e¬O¤°»òµP ùø                              ùø\\n\";        msg += \"ùø     ,         ÀËµø¥Ø«e¤À¼Æ     ùø                              ùø\\n\";        msg += \"ùø                                ùø                              ùø\\n\";        msg += \"ùàùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùäùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùâ\\n\";        msg += \"ùø     ¶Â®ç¬Ot, ¬õ¤ß¬Oh, ¤è¶ô¬Of, ±öªá¬Om                         ùø\\n\";        msg += \"ùø     ¦Ñ¢Ù¬O13, ¢ß¬O12, ¢Ø¬O11, ¢Ï¬O1                            ùø\\n\";        msg += \"ùø     du®É¬°du 10t 3h, ¥á¦h±iµP®É¥HªÅ¥Õ¹j¶}                      ùø\\n\";        msg += \"ùø     ¤£¥i¥HK,Q,J,A¤è¦¡¥á¡A¥²¶·¬O¼Æ¦r¤~¦æ                        ùø\\n\";        msg += \"ùãùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùùå\\n\";        return msg;}[0m","to":"kkeenn","title":"²Ä¤G¥÷","time":1070036564,]),(["from":"³·¨à¤X(promise)","text":"?[0m","to":"kkeenn","title":"?","time":1070073335,]),})
last_read_time 1070073335
newest_mail_time 1070073335
